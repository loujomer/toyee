{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Obsidian Notes","text":"<p>Publish your public notes with MkDocs</p>"},{"location":"#hello-world","title":"Hello World!","text":"<p>The <code>index.md</code> in the <code>/docs</code> folder is the homepage you see here.</p> <p>The folders in <code>/docs</code> appear as the main sections on the navigation bar.</p> <p>The notes appear as pages within these sections. For example, [[Note 1]] in <code>Topic 1</code></p>"},{"location":"Linking%20notes/","title":"Linking notes","text":""},{"location":"Linking%20notes/#link-to-a-file","title":"Link to a file","text":"<ul> <li>Type\u00a0<code>[[</code>\u00a0in the editor then select the file you want to create a link to. OR</li> <li>Select text in the editor and then type\u00a0<code>[[</code>.</li> </ul>"},{"location":"Linking%20notes/#link-to-a-heading-in-a-note","title":"Link to a heading in a note","text":""},{"location":"Linking%20notes/#linking-to-a-heading-within-the-same-note","title":"Linking to a heading within the same note","text":"<p>type\u00a0<code>[[#</code>\u00a0to get a list of headings within the note to link to. ^maoba</p>"},{"location":"Linking%20notes/#linking-to-subheadings","title":"Linking to subheadings","text":"<p>You can add multiple hash symbols for each subheading.</p>"},{"location":"Linking%20notes/#link-to-a-block-in-a-note","title":"Link to a block in a note","text":"<p>add ^ to the end of the target block then specify the identifier link to a block by adding\u00a0<code>#^</code> at the end of the link destination and provide the identifier</p>"},{"location":"Linking%20notes/#searching-for-blocks-across-the-vault","title":"Searching for blocks across the vault","text":"<p>using the\u00a0<code>[[^^block]]</code>\u00a0syntax</p>"},{"location":"Linking%20notes/#searching-for-headers-across-the-vault","title":"Searching for headers across the vault","text":"<p>use the\u00a0<code>[## header](&lt;#-header&gt;)</code>\u00a0syntax</p>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/","title":"Define Active Directory Domain Services","text":"<p>The AD DS database is the central store of all the domain objects, such as user accounts, computer accounts, and groups.</p>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#what-are-the-logical-components","title":"What are the logical components?","text":"<p>are structures that you use to implement an AD DS design that is appropriate for an organization</p> Logical component Description Partition A partition, or naming context, is a portion of the AD DS database. Although the database consists of one file named Ntds.dit, different partitions contain different data. For example:schema partition contains a copy of the Active Directory schemaconfiguration partition contains the configuration objects for the forestdomain partition contains the users, computers, groups, and other objects specific to the domainActive Directory stores copies of partitions on multiple domain controllers and updates them through directory replication. Schema A schema is the set of definitions of the object types and attributes that you use to define the objects created in AD DS. Domain A domain is a logical administrative container for objects such as users and computers. . Domain tree A domain tree is a hierarchical collection of domains that share a common root domain and a contiguous Domain Name System (DNS) namespace. Forest A forest is a collection of one or more domains that have a common AD DS root, a common schema, and a common global catalog. OU An OU is a container object for users, groups, and computers that provides a framework for delegating administrative rights and administration by linking Group Policy Objects (GPOs). Container A container is an object that provides an organizational framework for use in AD DS. You can use the default containers, or you can create custom containers. You can't link GPOs to containers."},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#ad-ds-forests-and-domains","title":"AD DS forests and domains","text":"<p>Forest -  a collection of one or more AD DS trees  that contain one or more AD DS domains Domain - a logical administrative container for objects</p> <p>Domains in a forest share: - A common root. - A common schema. - A global catalog.</p> <p></p>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#what-is-an-ad-ds-forest","title":"What is an AD DS forest?","text":"<p>The forest root domain is the first domain that you create in the forest. The forest root domain contains the following objects that don't exist in other domains in the forest: </p> <ul> <li>schema master role (can be moved to other dc in the forest)</li> <li>domain naming master role (can be moved to other dc in the forest)</li> <li>Enterprise Admins group</li> <li>Schema Admins group</li> </ul> <p>An AD DS forest is often described as: - A security boundary.      - By default, no users from outside the forest can access any resources inside the forest     - All the domains in a forest automatically trust the other domains in the forest - A replication boundary.     - An AD DS forest is the replication boundary for the configuration and schema partitions in the AD DS database.     - Therefore, organizations that want to deploy applications with incompatible schemas must deploy additional forests     - The forest is also the replication boundary for the global catalog. The global catalog makes it possible to find objects from any domain in the forest. </p>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#what-is-an-ad-ds-domain","title":"What is an AD DS domain?","text":"<p>An AD DS domain is a logical container for managing user, computer, group, and other objects.</p> <p>The AD DS database stores all domain objects, and each domain controller stores a copy of the database.</p> <p>The following objects exist in each domain (including the forest root):</p> <ul> <li>Relative ID (RID) master role.</li> <li>Infrastructure master role.</li> <li>Primary domain controller (PDC) emulator master role.</li> <li>Domain Admins group.</li> </ul> <p> An AD DS domain is often described as:</p> <ul> <li>A replication boundary</li> <li>An administrative unit.</li> </ul> <p>An AD DS domain provides:</p> <ul> <li>Authentication</li> <li>Authorization.</li> </ul>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#-when-you-make-changes-to-any-object-in-the-domain-the-domain-controller-where-the-change-occurred-replicates-that-change-to-all-other-domain-controllers-in-the-domain","title":"- When you make changes to any object in the domain, the domain controller where the change occurred replicates that change to all other domain controllers in the domain","text":""},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#what-are-trust-relationships","title":"What are trust relationships?","text":"<p>The trusts that create automatically in the forest are all transitive trusts, which means that if domain A trusts domain B, and domain B trusts domain C, then domain A trusts domain C.</p> Trust type Description Direction Description Parent and child Transitive Two-way When you add a new AD DS domain to an existing AD DS tree, you create new parent and child trusts. Tree-root Transitive Two-way When you create a new AD DS tree in an existing AD DS forest, you automatically create a new tree-root trust. External Nontransitive One-way or two-way External trusts enable resource access with a Windows NT 4.0 domain or an AD DS domain in another forest. You also can set these up to provide a framework for a migration. Realm Transitive or nontransitive One-way or two-way Realm trusts establish an authentication path between a Windows Server AD DS domain and a Kerberos version 5 (v5) protocol realm that implements by using a directory service other than AD DS. Forest (complete or selective) Transitive One-way or two-way Trusts between AD DS forests allow two forests to share resources. Shortcut Nontransitive One-way or two-way Configure shortcut trusts to reduce the time taken to authenticate between AD DS domains that are in different parts of an AD DS forest. No shortcut trusts exist by default, and an administrator must create them if they are required."},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#deploy-ad-ds-domain-controllers","title":"Deploy AD DS domain controllers","text":"<p>Domain controllers authenticate all users and computers in a domain.</p>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#deploy-ad-ds-domain-controllers-in-an-on-premises-environment","title":"Deploy AD DS domain controllers in an on-premises environment","text":"<p>2 step process of domain controller deployment: 1. install the binaries necessary to implement the domain controller role 2. configure AD DS role</p>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#manage-ad-ds-operations-masters","title":"Manage AD DS operations masters","text":"<p>Active Directory Domain Services (AD DS) uses a multiple-master process to copy data between domain controllers, and automatically implements a conflict resolution algorithm that remediates simultaneous, conflicting updates.</p> <p>However, certain operations can be performed only by a specific role, on a specific domain controller.</p>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#what-are-ad-ds-operations-masters","title":"What are AD DS operations masters?","text":"<p>AD DS operation master roles are responsible for performing operations that are not suitable for a multiple-master model.</p> <p>A domain controller that has one of these roles is an operations master. An operations master role is also known as a Flexible Single Master Operation (FSMO) role.</p> <p>There are five operations master roles:</p> <ul> <li>Schema master</li> <li>Domain-naming master</li> <li>Infrastructure master</li> <li>RID master</li> <li>PDC emulator master</li> </ul> <p>By default, the first domain controller installed in a forest hosts all five roles.</p> <p>However, you can transfer these roles after deploying additional domain controllers. </p> <p>When performing operations master-specific changes, you must connect to the domain controller with the role.</p> <p>The five operations master roles have the following distribution:</p> <ul> <li>Each forest has one schema master and one domain naming master.</li> <li>Each AD DS domain has one RID master, one infrastructure master, and one primary domain controller (PDC) emulator.</li> </ul>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#forest-operations-masters","title":"Forest operations masters","text":"<p>A forest has the following operations master roles - Get-ADForesst</p> <ul> <li>Domain naming master. - This is the domain controller that you must contact when you add or remove a domain or make domain name changes.</li> <li>Schema master. - This is the domain controller in which you make all schema changes.</li> </ul>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#domain-operations-masters","title":"Domain operations masters","text":"<p>A domain has the following operations master roles - Get-ADDomain</p> <ul> <li>RID master<ul> <li>Whenever you create a security principal such as a user, computer, or group in AD DS, the domain controller where you created the object assigns the object a unique identifying number known as a security ID (SID). </li> <li>To ensure that no two domain controllers assign the same SID to two different objects, the RID master allocates blocks of RIDs to each domain controller within the domain to use when building SIDs.</li> <li>If the RID master is unavailable, you might experience difficulties adding security principals to the domain. </li> <li>Also, as domain controllers use their existing RIDs, they eventually run out of them and are unable to create new objects.</li> </ul> </li> <li>Infrastructure master<ul> <li>This role maintains interdomain object references, such as when a group in one domain has a member from another domain. In this situation, the infrastructure master manages maintaining the integrity of this reference. </li> <li>For example, when you review an object's Security tab, the system references the listed SIDs and translates them into names. In a multiple-domain forest, the infrastructure master updates references to SIDs from other domains with the corresponding security principal names.</li> <li>If the infrastructure master is unavailable, domain controllers that are not global catalogs will not be able to perform translation of SIDs security principal names.</li> <li>The infrastructure master role should not reside on the domain controller that's hosting the global catalog role unless every domain controller in the forest is configured to serve as a global catalog. In this case, the infrastructure master role is not necessary because every domain controller knows about every object in the forest.</li> </ul> </li> <li>PDC emulator master<ul> <li>The domain controller that is the PDC emulator master serves as the time source for the domain.</li> <li>The PDC emulator master in each domain in a forest synchronizes their time with the PDC emulator master in the forest root domain.</li> <li>You set the PDC emulator master in the forest root domain to synchronize with a reliable external time source</li> <li>Additionally, by default, changes to Group Policy Objects (GPOs) are by default written to the PDC Emulator master.</li> <li>The PDC emulator master is also the domain controller that receives urgent password changes</li> <li>If a user's password changes, the domain controller with the PDC emulator master role receives this information immediately.</li> <li>This means that if the user tries to sign in, the domain controller in the user's current location will contact the domain controller with the PDC emulator master role to check for recent changes</li> <li>This will occur even if a domain controller in a different location that had not yet received the new password information authenticated the user.</li> <li>If the PDC emulator master is unavailable, users might have trouble signing in until their password changes have replicated to all the domain controllers.</li> </ul> </li> </ul>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#manage-ad-ds-operations-masters_1","title":"Manage AD DS operations masters","text":"<p>transferring the role - planned transfer seizing the role - emergency transfer</p>"},{"location":"AD%20DS/01%20Deploy%20and%20manage%20Active%20Directory%20Domain%20Services%20domain%20controllers/Define%20Active%20Directory%20Domain%20Services/#transfer-operations-master-roles","title":"Transfer operations master roles","text":"<p>You can transfer operations master roles by using the AD DS snap-ins that the following table lists. You cannot use AD DS snap-ins to seize operations master roles. Instead, you must use either the\u00a0ntdsutil.exe\u00a0command-line tool or Windows PowerShell to seize roles.</p> Role Snap-in Schema master Active Directory Schema Domain-naming master Active Directory Domains and Trusts Infrastructure master Active Directory Users and Computers RID master Active Directory Users and Computers PDC emulator master Active Directory Users and Computers <p>Seizing a role using PowerShell:</p> <p>`Move-ADDirectoryServerOperationsMasterRole -Identity \"\" -OperationsMasterRole \"\" -Force <p>servername: The name of the target domain controller to which you are transferring one or more roles. rolenamelist: A comma-separated list of AD DS role names to move to the target server. **-Force**: An optional parameter that you include to seize a role instead of transferring it.</p> <p>Video here: Manage Active Directory Domain Services operations masters - Training | Microsoft Learn</p>"},{"location":"AD%20DS/02%20Create%20and%20manage%20Active%20Directory%20objects/Define%20users%2C%20groups%2C%20and%20computers/","title":"Define users, groups, and computers","text":""},{"location":"AD%20DS/02%20Create%20and%20manage%20Active%20Directory%20objects/Define%20users%2C%20groups%2C%20and%20computers/#what-are-managed-service-accounts","title":"What are managed service accounts?","text":""},{"location":"AD%20DS/02%20Create%20and%20manage%20Active%20Directory%20objects/Define%20users%2C%20groups%2C%20and%20computers/#group-types","title":"Group types","text":"<ul> <li>Security</li> <li>Distribution</li> </ul>"},{"location":"AD%20DS/02%20Create%20and%20manage%20Active%20Directory%20objects/Define%20users%2C%20groups%2C%20and%20computers/#group-scopes","title":"Group scopes","text":"Type Description Characteristics Local use this type of group for standalone servers or workstations, on domain-member servers that are not domain controllers, or on domain-member workstationsavailable only on the computer where they exist - You can assign abilities and permissions on local resources only, meaning on the local computer.- Members can be from anywhere in the AD DS forest. Domain-local primarily to manage access to resources or to assign management rights and responsibilities.exist on domain controllers in an AD DS domain, and so, the group\u2019s scope is local to the domain in which it resides - You can assign abilities and permissions on domain-local resources only, which means on all computers in the local domain.- Members can be from anywhere in the AD DS forest Global primarily to consolidate users who have similar characteristics - You can assign abilities and permissions anywhere in the forest.- Members can be from the local domain only and can include users, computers, and global groups from the local domain. Universal use this type of group most often in multidomain networks because it combines the characteristics of both domain-local groups and global groups - You can assign abilities and permissions anywhere in the forest similar to how you assign them for global groups.- Members can be from anywhere in the AD DS forest."},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/","title":"Managing EXO mailboxes","text":""},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#the-link-between-exods-and-azure-ad","title":"The Link Between EXODS and Azure AD","text":"<p>ExternalDirectoryObjectId</p> <ul> <li>identifier that is stamped on EXODS object to link to Azure AD</li> <li>not found in on-premises Exchange</li> </ul>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#change-in-naming-convention-of-users-name-parameter","title":"Change in naming convention of user\u2019s Name parameter","text":"<p>https://techcommunity.microsoft.com/t5/exchange-team-blog/change-in-naming-convention-of-user-s-name-parameter/ba-p/3284733</p>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#creating-a-mailbox-with-powershell","title":"Creating a Mailbox with PowerShell","text":"<p>remote mailbox * is a cloud mailbox associated with a mail user object that\u2019s  stored in an on-premises Active Directory * You\u2019ll create remote mailboxes when you want your users  anchored in on-premises AD but their mailboxes in Exchange Online</p> <p>https://learn.microsoft.com/en-us/microsoft-365/enterprise/create-user-accounts-with-microsoft-365-powershell?view=o365-worldwide</p>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#creating-a-cloud-mailbox-for-an-on-premises-user-remote-mailbox","title":"Creating a Cloud Mailbox for an On-Premises User (remote mailbox)","text":"<ol> <li>Make sure that your PowerShell session loads the necessary modules. You need to load both the ExchangeOnlineManagement and Microsoft Graph PowerShell SDK modules to create mailboxes and manipulate the underlying Azure AD objects.</li> <li>Run the New-RemoteMailbox cmdlet to create a new user account and its Exchange Online mailbox.</li> <li>Run the Set-User cmdlet to update the on-premises directory with the organizational and personal settings for the user object.</li> <li>Run the Update-MgUser cmdlet to set the correct country code (location) for the new mailbox in the cloud. You assign a country to a user account to ensure that Microsoft 365 makes the services designated for that country available to the user.      For example:     <code>[PS] C:\\&gt; Update-MgUser -UserId Kim.Akers@Office365itpros.com -PreferredDataLocation DE</code></li> <li>Assign a license to the user.</li> </ol>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#creating-a-cloud-only-mailbox","title":"Creating a Cloud-Only Mailbox","text":"<p>[PS] C:&gt; New-Mailbox -alias paulr -MicrosoftOnlineServicesId paulr@Office365itpros.com </p>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#updating-mailbox-attributes","title":"Updating Mailbox Attributes","text":"<p>Some of the attributes commonly populated for mailboxes are not set with the New-Mailbox or Set-Mailbox cmdlets. </p> <p>These are attributes controlled by Azure AD and are common to all Exchange recipient objects,  whether they have a mailbox, and are updated with the Set-User cmdlet. </p> <p>Example: </p> <p><code>[PS] C:\\&gt; Set-User \u2013Identity \"Kim Akers\" \u2013City \"Dublin\" \u2013CountryOrRegion \"Ireland\" \u2013Department \"Marketing Operations\" \u2013Title \"VP Marketing (New Products)\" \u2013Manager \"Paul.Robichaux\" \u2013Office \"Dublin HQ\" \u2013Company \"Popular Books\"</code></p>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#add-user-photos-to-mailboxes","title":"Add User Photos to Mailboxes","text":"<p>Set-UserPhoto  * updates the photo data in a mailbox</p> <p>Set-UserPhoto * update a photo for a group mailbox (be sure to specify the GroupMailbox switch) (can also be used to update Team picture)</p> <p>New-MgUserPhoto and Update-MgUserPhoto * writes photo data to an Azure AD user account that doesn't have a mailbox (like a guest account)</p> <p>648 x 648 pixels * largest resolution supported</p> <p>64 x 64 and 96 x 96-pixel * generated by EXO to use when small thumbnails are appropriate</p> <p>&lt;500 KB * recommended size</p> <p>Set user photo:</p> <p><code>Set-UserPhoto -Identity James.Smith@office365itpros.com -PictureData</code> <code>([System.IO.File]::ReadAllBytes(\"c:\\Temp\\James.Smith.jpg\")) -Confirm:$False</code></p> <p>Check if photo already exist:</p> <p>`If (Get-UserPhoto -Identity Kim.Akers@Office365Itpros.com) {Write-Host \"Kim has a photo\"}</p> <p>Remove user photo:</p> <p><code>Remove-UserPhoto -Identity James.Smith@office365itpros.com -Confirm:$False</code></p> <p>Prevent users from changing photo:</p> <p><code>Set-OWAMailboxPolicy -Identity *OWAFullAccess* -SetPhotoEnabled $False</code></p>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#mailbox-plans","title":"Mailbox Plans","text":"<p><code>Get-MailboxPlan | Format-Table DisplayName, IsDefault, Name</code></p> <ul> <li>a template holding settings for mailbox properties</li> <li>newly created mailbox inherits the settings from the mailbox plan chosen by EXO</li> <li>EXO uses the license assigned to the account to select the mailbox plan to apply to the new mailbox</li> </ul> Products Mailbox Plan Exchange Online Kiosk, Microsoft 365 F3, Office 365 F3 ExchangeOnlineDeskless Exchange Online Plan 1, Microsoft 365 E1, Office 365 E1 ExchangeOnline Exchange Online Plan 2, Microsoft 365 E3/E5, Office 365 E3/E5 ExchangeOnlineEnterprise Microsoft 365 Business Basic ExchangeOnlineEssentials"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#recipient-limits","title":"Recipient Limits","text":"<p>500  * default recipient limit in the To field, max is 1000</p> <p>Set the recipient limit for a user <code>Set-Mailbox -Identity James.Ryan -RecipientLimits 900</code></p> <p>Set the recipient limit for all users <code>Get-ExoMailbox -RecipientTypeDetails UserMailbox -ResultSize Unlimited | Set-Mailbox -RecipientLimits 900</code></p> <p>Set a new default recipient limit for new mailboxes Set-MailboxPlan -Identity ExchangeOnlineEnterprise-8fc1c029-5e32-485e-9810-179fb4701447 -RecipientLimits 750</p>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#email-primary-and-proxy-addresses","title":"Email Primary and Proxy Addresses","text":"<p>set the primary SMTP address of a mailbox: </p> <p><code>Set-Mailbox -Identity Jimmy.Jones -WindowsEmailAddress Jimmy@office365itpros.com</code></p>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#sending-email-using-proxy-addresses","title":"Sending Email Using Proxy Addresses","text":"<p><code>Set-OrganizationConfig -SendFromAliasEnabled $True</code></p>"},{"location":"Exchange%20Online/Managing%20EXO%20mailboxes/#custom-attributes","title":"Custom Attributes","text":"<ul> <li>these custom attributes are properties of the mailbox object associated with a user</li> </ul> <p>2 sets of custom attributes:</p> <ol> <li>CustomAttribute1 through CustomAttribute15: <ul> <li>These attributes can store a single value. </li> <li>Can be updated in EAC. </li> </ul> </li> <li>ExtensionCustomAttribute1 through ExtensionCustomAttribute5: <ul> <li>These attributes can store multiple values. </li> <li>Can only be updated in PS. </li> </ul> </li> </ol>"},{"location":"Exchange%20Online/Hybrid/Hybrid%20Exchange%20Architecture/","title":"Hybrid Exchange Architecture","text":"<p>ExchangeGUID - mailbox identifier msExchangeMailboxGUID </p>"},{"location":"Exchange%20Online/Hybrid/Hybrid%20Exchange%20Architecture/#native-mailbox-moves","title":"Native Mailbox Moves","text":"<p>Moving mailboxes between an on-premises organization and Office 365 is like a mailbox move between two on-premises organizations and is also performed by the Mailbox Replication Service (MRS). </p> <p>These moves are called Exchange online moves, which means that users can send and receive email while their mailbox is being moved.</p>"},{"location":"Exchange%20Online/Migration/Google%20Workspace/","title":"Google Workspace","text":"<p>[!faq] what can be migrated? - Mail &amp; Rules - Calendar - Contacts</p> <p>Overview of the G Suite migration process in Exchange Online | Microsoft Learn</p>"},{"location":"Exchange%20Online/Migration/Google%20Workspace/#prerequisites","title":"prerequisites","text":"<ol> <li>Must have a project creator role in Google Workspace</li> <li>Create a subdomain for mail routing to Microsoft 365 or Office 365</li> <li>Create a subdomain for mail routing to your Google Workspace domain</li> <li>Provision users in Microsoft 365 or Office 365</li> </ol>"},{"location":"Exchange%20Online/Migration/Google%20Workspace/#check-google-cloud-platform-permissions","title":"Check Google Cloud platform permissions","text":"<p>[!info] for Automated migration required roles: - Projector Creator - Service Accounts Creator</p> <p>Required permissions for the Google Migration admin: 1. Create a Google Workspace project. 2. Create a Google Workspace service account in the project. 3. Create a service key. 4. Enable all APIs - Gmail, Calendar, and Contacts.</p>"},{"location":"Exchange%20Online/Migration/Google%20Workspace/#create-a-subdomain-for-mail-routing-to-microsoft-365-or-office-365","title":"Create a subdomain for mail routing to Microsoft 365 or Office 365","text":"<p>performed in Google Workspace Admin page</p> <ol> <li> <p>add subdomain (routing domain)      recommended:</p> <ul> <li>A subdomain of your primary domain (for example, \"o365.fabrikaminc.net\", when \"fabrikaminc.net\" is your primary domain) so that it will be automatically verified.</li> </ul> <p>not recommended: * If another domain (such as \"fabrikaminc.onmicrosoft.com\") is set, Google will send emails to each individual address with a link to verify the permission to route mail. Migration won't complete until the verification is completed.</p> </li> <li> <p>add this subdomain (routing domain) as an accepted domain in M365</p> </li> <li> <p>add an MX record of this subdomain that will point to M365</p> </li> </ol>"},{"location":"Exchange%20Online/Migration/Google%20Workspace/#create-a-subdomain-for-mail-routing-to-your-google-workspace-domain","title":"Create a subdomain for mail routing to your Google Workspace domain","text":"<p>performed in Google Workspace Admin page</p> <ol> <li> <p>add domain     recommended:</p> <ul> <li>A subdomain of your primary domain (for example, \"gsuite.fabrikaminc.net\", when \"fabrikaminc.net\" is your primary domain)</li> </ul> </li> <li> <p>add an MX record of this subdomain that will point to Google</p> </li> </ol> <p>[!info] Remote domain Remote domain must have Automatic forwarding enabled -  this will allow mail flow from o365 to gw</p>"},{"location":"Exchange%20Online/Migration/Google%20Workspace/#provision-users-in-microsoft-365-or-office-365","title":"Provision users in Microsoft 365 or Office 365","text":"<ul> <li>create mail users</li> <li>the primary address for each user should be at the primary domain<ul> <li>this means that the email address should match between M365 and Gmail</li> <li>if any user has a different domain for their primary address, then that user should have a proxy address at the primary domain</li> </ul> </li> <li>each user should have their\u00a0<code>ExternalEmailAddress</code>\u00a0point to the user in their Google Workspace routing domain (\"will@gsuite.fabrikaminc.net\").</li> </ul>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/","title":"Distribution Lists","text":""},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#who-can-be-members-of-a-dl","title":"who can be members of a DL?","text":"<ol> <li>User and shared mailboxes.</li> <li>Mail-enabled public folders.</li> <li>Other distribution lists, including dynamic distribution lists.</li> <li>Mail contacts. You can include a Teams channel in a distribution list by creating a mail contact using the channel\u2019s email address.</li> <li>Mail users (including those created for guest accounts).</li> <li>Microsoft 365 Groups (these objects can only be added using PowerShell).</li> </ol> <ul> <li>Groups created by administrators are not subject to the organizational group naming policy as this only applies to user-created groups.</li> </ul>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#blocking-bcc-delivery-to-distribution-lists","title":"Blocking BCC Delivery to Distribution Lists","text":"<p>`[PS] C:&gt; Set-DistributionGroup -Identity \"Message Board Posting\" -BccBlocked $True</p> <p>Inbox rules can process TO and CC recipients, but not BCC recipients because these recipients are not present in the message header</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#reporting-distribution-list-membership","title":"Reporting Distribution List Membership","text":"<p>`[PS] C:&gt; Get-DistributionGroupMember \u2013Identity \"Executive Committee\" | Select-Object Name, DisplayName, PrimarySmtpAddress | Export-CSV \"c:\\temp\\ExecutiveCommittee.csv\" -NoTypeInformation</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#updating-distribution-list-membership-with-powershell","title":"Updating Distribution List Membership with PowerShell","text":"<p>overwrite existing DL membership: `[PS] C:&gt; Update-DistributionGroupMember -Identity \"Blog Writers\" -Members @(\"TRedmond\", \"Bowens\")</p> <p>add/remove a single object <code>[PS] C:\\&gt; Add-DistributionGroupMember \u2013Identity \"Blog Writers\" \u2013Member VanHybrid</code>Remove-DistributionGroupMember \u2013Identity \"Blog Writers\" \u2013Member VanHybrid \u2013Confirm:$False</p> <p>add member to multiple DLs: first, create a one column CSV file that holds the alias of the target DL ![[Pasted image 20240506102017.png]]</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#how-to-move-distribution-list-membership-from-one-mailbox-to-another","title":"How to Move Distribution List Membership from One Mailbox to Another","text":""},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#add-a-microsoft-365-group-in-a-distribution-list","title":"Add a Microsoft 365 Group in a Distribution List","text":"<p>`[PS] C:&gt; Add-DistributionGroupMember -Identity P365.Authors -Member ExchangeMVPs</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#add-a-teams-channel-in-a-distribution-list","title":"Add a Teams Channel in a Distribution List","text":"<p>To add a team channel email address to a distribution list, create a new mail contact with the address and add the mail contact to the distribution list.</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#add-a-guest-account-in-a-distribution-list","title":"Add a Guest Account in a Distribution List","text":"<p>`[PS] C:&gt; Add-DistributionGroupMember -Identity MyDL -Member JohnSmith_outlook.com#EXT#</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#discovering-distribution-lists-and-groups-someone-belongs-to","title":"Discovering Distribution Lists and Groups Someone Belongs to","text":"<p>can be done in EAC, Others -&gt; Group membership</p> <p>`[PS] C:&gt; $Dn = (Get-ExoMailbox \u2013Identity Kim.Akers).DistinguishedName</p> <p>`Get-ExoRecipient -Filter \"Members -eq '$Dn'\" -Properties RecipientTypeDetails | Sort RecipientTypeDetails | Format-Table DisplayName, RecipientTypeDetails</p> <p>or for specific group type: `[PS] C:&gt; Get-Recipient -Filter \"Members -eq '$Dn'\" -RecipientTypeDetails GroupMailbox | ft DisplayName</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#remove-a-distribution-list","title":"Remove a Distribution List","text":"<p>`[PS] C:&gt; Remove-DistributionGroup -Identity P365.Authors -Confirm:$False</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#how-to-find-and-report-inactive-distribution-lists","title":"How to Find and Report Inactive Distribution Lists","text":""},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#preventing-users-from-creating-a-distribution-list","title":"Preventing users from creating a distribution list","text":"<p>Option 1: uncheck the My Distribution Groups (will hide the UI of owned DLs)</p> <ul> <li>uncheck the MyDistributionGroups</li> <li>EAC -&gt; Roles -&gt; User Roles, either create a new role assignment policy or edit the default policy, then uncheck the </li> </ul> <p>Option 2: disable the creation of new DLs but still access the existing DLs</p> <p>1: create a new user role assignment policy EAC -&gt; Roles -&gt; User Roles -&gt; New role assignment policy</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#distribution-list-naming-policy","title":"Distribution List Naming Policy","text":"<p>Exchange applies the naming policy to distribution lists belonging to the on-premises organization when they synchronize with Azure AD objects with AADConnect. </p> <p>Thus, an on-premises distribution list might have a different name in the on-premises directory than that shown in Azure AD unless you make sure to apply the same naming policy in both environments. </p> <p>view group naming policy:  `Get-OrganizationConfig | Format-Table Distr* -AutoSize</p> <p>edit the group naming policy: `Set-OrganizationConfig -DistributionGroupNamingPolicy \"DL- \" <p>remove the group naming policy `Set-OrganizationConfig -DistributionGroupNamingPolicy $Null</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#migrating-on-premises-distribution-lists-to-exchange-online","title":"Migrating On-Premises Distribution Lists to Exchange Online","text":"<ul> <li>in hybrid deployment, the suggested method is to remove the distribution list from on-premises and recreate it as a brand-new object in the cloud</li> <li>an on-premises user cannot manage a cloud-based distribution list</li> </ul>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#dynamic-distribution-lists","title":"Dynamic Distribution lists","text":"<ul> <li>Dynamic distribution lists are EXODS objects and do not exist in Azure AD</li> <li>in hybrid deployment, synchronization utilities do not process dynamic distribution lists</li> </ul>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#recipient-filters","title":"Recipient filters","text":"<ul> <li>OPATH queries executed against the directory to return a set of objects</li> </ul>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#how-recipient-filters-work","title":"How Recipient Filters Work","text":"<p>2 types of recipient filters:</p> <ol> <li>Precanned filters </li> <li>Custom filters</li> </ol>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#view-ddl-filter-using-powershell","title":"view DDL filter using PowerShell","text":"<p>`Get-DynamicDistributionGroup \u2013Identity \"Microsoft 365 Gurus\" | Select RecipientFilter, RecipientFilterType</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#checking-the-effectiveness-of-a-recipient-filter","title":"Checking the Effectiveness of a Recipient Filter","text":"<p>`Get-Recipient -RecipientPreviewFilter (Get-DynamicDistributionGroup -Identity \"testddl\").RecipientFilter | select displayname</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#finding-the-set-of-dynamic-distribution-lists-a-user-belongs-to","title":"Finding the set of dynamic distribution lists a user belongs to","text":"<p>`$Dn = (Get-ExoMailbox \u2013Identity dario).DistinguishedName</p> <p>`Get-DynamicDistributionGroup | Where-Object {(Get-DynamicDistributionGroupMember -Identity \\(_.PrimarySMTPAddress | Where-Object {\\)_.DistinguishedName -eq $Dn})}</p>"},{"location":"Exchange%20Online/Recipients/Distribution%20Lists/#membership-calculation","title":"Membership Calculation","text":"<ul> <li>At least once daily.</li> <li>After the recipient filter changes.</li> <li>Following the creation of a new dynamic distribution group.</li> </ul>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/","title":"O365 addressing","text":""},{"location":"Exchange%20Online/Recipients/O365%20addressing/#email-address-policies","title":"Email Address Policies","text":"<ul> <li>only available in on-premise Exchange</li> <li> <p>although EXO has a default address policy</p> <p>` Get-EmailAddressPolicy | fl</p> </li> <li> <p>can be used with O365 groups only</p> <p>`[PS] C:&gt; New-EmailAddressPolicy \u2013Name MarketingGroups \u2013IncludeUnifiedGroupRecipients \u2013EnabledEmailAddressTemplates \"SMTP:@Marketing.Office365ITPros.com\", \"smtp:@anotherdomain.com\" - ManagedByFilter {Department \u2013eq \"Marketing\"} \u2013Priority</p> </li> <li> <p>catch all policy to assign groups with a specific domain</p> <p>`[PS] C:&gt; New-EmailAddressPolicy -Name AllOtherGroups -IncludeUnifiedGroupRecipients -EnabledPrimarySMTPAddressTemplate \"SMTP:@Office365ITPros.com\" -Priority 3</p> </li> <li> <p>update email address policies</p> <p>`[PS] C:&gt; Set-EmailAddressPolicy -Identity AllOtherGroups -EnabledPrimarySMTPAddressTemplate \"@Office365ITPros.com\"</p> </li> </ul>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#smtp-addresses-and-mail-enabled-objects","title":"SMTP Addresses and Mail-Enabled Objects","text":"<ul> <li> <p>add a new smtp address</p> <p>`[PS] C:&gt; Set-Mailbox \u2013Identity TRedmond \u2013EmailAddresses @{Add=\"Tony.Redmond@Office365ITPros.com\"}</p> </li> <li> <p>set the primary SMTP and others (will replace existing smtp)</p> <p>`Set-Mailbox -Identity \"Alexander Hart\" -EmailAddresses SMTP:Alexander.Hart@gwapahon.onmicrosoft.com,Alexander@mstestavaceblobor.onmicrosoft.com,Alexander@mgashufa.onmicrosoft.com</p> </li> <li> <p>change the primary SMTP by changing `WindowsEmailAddress</p> <p>`Set-Mailbox \u2013Identity \"Alexander Hart\" \u2013WindowsEmailAddress Alex@mstestavaceblobor.onmicrosoft.com</p> </li> <li> <p>for M365 groups, you can't use <code>WindowsEmailAddress</code>, so you have to use `PrimarySmtpAddress</p> <p>`Set-UnifiedGroup -Identity fdfd -PrimarySmtpAddress wayolark@mstestavaceblobor.onmicrosoft.com</p> </li> <li> <p>check recipients with more than 400 email proxy</p> <p>`Get-Recipient | Where {($_.EmailAddresses).count -gt 400} | Format-Table DisplayName, Alias, RecipientType</p> </li> </ul>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#the-spo-proxy-address","title":"The SPO Proxy Address","text":"<p>This is an address that is automatically created by SharePoint Online when the mailbox participates in sharing operations involving SharePoint Online or OneDrive for Business sites, including those used with Office 365 Groups.</p> <p>It allow SharePoint Online to use Exchange Web Services (EWS) to impersonate the user to send messages on their behalf.</p> <p>These messages will have the same display name (such as the person who is doing the sharing), but will always use\u00a0no-reply@sharepointonline.com\u00a0as the\u00a0From\u00a0address.</p>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#address-lists","title":"Address Lists","text":""},{"location":"Exchange%20Online/Recipients/O365%20addressing/#global-address-list-gal","title":"Global Address List (GAL)","text":"<ul> <li>includes all mail-enabled recipients</li> </ul>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#exo-standard-address-lists","title":"EXO standard address lists:","text":"<ol> <li>All rooms: All room mailboxes.</li> <li>All users: All mailboxes \u2013 including, shared, and resource (room and equipment) mailboxes (but not Office 365 group mailboxes).</li> <li>All distribution lists: All standard and dynamic distribution groups, including Office 365 Groups.</li> <li>All contacts: All mail-enabled contacts.</li> <li>All groups: All Office 365 groups. The recipient filter still refers to these objects as \u201cgroup mailboxes\u201d.</li> <li>Offline Global Address List: The GAL as downloaded and made available for offline use by Outlook clients. Mail-enabled public folders are included in this address list. </li> <li> <p>Public Folders (an address list generated on-premises when in a hybrid deployment)</p> </li> <li> <p>creating new Address lists has to be done with PowerShell</p> </li> <li> <p>qurery used to locate the desired objects in an Address list     `Get-AddressList \u2013Identity \"Offline Global Address List\"</p> </li> </ol>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#rbac-permission","title":"RBAC permission","text":"<p>\u201cAddress Lists\u201d management role</p>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#new-address-list-not-updated","title":"New address list not updated","text":"<p>Because Exchange Online does not support the Update-AddressList cmdlet, objects that already exist might not show up in the new address list. </p> <p>The reason is that address list membership is evaluated when an object changes, so any recipients that should be in the list already exist in the directory will not appear until the next time that their object is updated (by EAC, Office 365 Admin, or PowerShell). </p> <p>Microsoft says that this is \u201cby design\u201d and it\u2019s understandable in some respects because Microsoft clearly wants to avoid processing operations that could be resource-intensive and impact multiple tenants.</p> <p>If you want to be sure that a new address list is correctly populated, you have to force this by updating all of the objects that should be in the list.</p>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#sample-script","title":"Sample Script","text":"<p>`[PS] C:&gt; $Filter = (Get-AddressList \u2013Identity \"Ireland Users\").RecipientFilter </p> <p>`[PS] C:&gt; Get-Recipient \u2013RecipientPreviewFilter $Filter | Set-Mailbox \u2013CustomAttribute6 \"Updated\"</p>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#create-a-recipient-filter","title":"Create a recipient filter","text":"<p>One workaround is to create a dynamic distribution group with a filter for the same recipient set that you\u2019d like to use in an address list and then reuse the filter. You can extract the filter for a dynamic group to a variable with a command like:</p> <p>`[PS] C:&gt; $Filter = (Get-DynamicDistributionGroup \u2013Identity \"Dynamic User\").RecipientFilter</p> <p>Then, use the $Filter variable as input to either the <code>New-AddressList</code> or <code>Set-AddressList</code> cmdlets to create a new address list or modify an existing address list</p>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#offline-address-book-oab","title":"Offline Address Book (OAB)","text":"<ul> <li>Outlook clients configured to use cached Exchange mode use the OAB for address validation and directory lookup</li> <li>an Office 365 tenant cannot force the generation of the OAB <ul> <li>must wait for Exchange Online to run the OAB generation process, which is sometimes delayed due to server load</li> <li>Offline address books are generated every 8 hours.</li> </ul> </li> <li>Users can force an OAB update by selecting Download Address Book from Outlook\u2019s Send/Receive menu, but the client can only download the available OAB updates, which might not include new recipients.</li> <li>Exchange Online does not allow you to assign a different OAB to a mailbox by running the Set-Mailbox cmdlet. </li> <li>In addition, you cannot make a new OAB the default OAB. </li> <li>The only way that a customized OAB can be provided to a user is through Address Book Policies.</li> </ul>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#user-photos-and-the-oab","title":"User Photos and the OAB","text":"<p>Set-UserPhoto \"Ben Owens\" -PictureData  ([System.IO.File]::ReadAllBytes(\"C:\\Temp\\BenOwens.jpg\")</p>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#hierarchical-address-book-hab","title":"Hierarchical Address Book (HAB)","text":"<ul> <li>Because the feature is based on the OAB, Outlook is the only supported client</li> </ul>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#address-book-policies","title":"Address Book Policies","text":"<ul> <li>used to control what directory objects are shown to users</li> </ul>"},{"location":"Exchange%20Online/Recipients/O365%20addressing/#test-recipient-filters","title":"Test recipient filters","text":"<p><code>Get-Recipient -RecipientType UserMailbox -RecipientPreviewFilter {CustomAttribute6 -eq</code> <code>'POI'}</code></p>"},{"location":"Features/LaTeX%20Math%20Support/","title":"LaTeX Math Support","text":"<p>LaTeX math is supported using MathJax.</p> <p>Inline math looks like \\(f(x) = x^2\\). The input for this is <code>$f(x) = x^2$</code>. Use <code>$...$</code>.</p> <p>For a block of math, use <code>$$...$$</code> on separate lines</p> <pre><code>$$\nF(x) = \\int^a_b \\frac{1}{2}x^4\n$$\n</code></pre> <p>gives </p> \\[ F(x) = \\int^a_b \\frac{1}{2}x^4 \\]"},{"location":"Features/Mermaid%20Diagrams/","title":"Mermaid diagrams","text":"<p>Here's the example from MkDocs Material documentation: </p> <pre><code>graph LR\n  A[Start] --&gt; B{Error?};\n  B --&gt;|Yes| C[Hmm...];\n  C --&gt; D[Debug];\n  D --&gt; B;\n  B ----&gt;|No| E[Yay!];</code></pre>"},{"location":"Features/Text%20Formatting/","title":"Text Formatting","text":"<p>You can have lists like this</p> <ul> <li>first</li> <li>second</li> <li>third</li> </ul> <p>Or checklist lists to</p> <ul> <li> Get</li> <li> things</li> <li> done</li> </ul> <p>Also, get highlights and strikethroughs as above (similar to Obsidian).</p> <p>More formatting options for your webpage here. (but not compatible with Obsidian)</p>"},{"location":"Managing%20Groups/Basics/","title":"Basics","text":"<ol> <li>is created from client of choice, e.g. Outlook, Teams</li> <li>new group object exists in both Azure AD and Exchange Online<ol> <li>. Azure AD is the system of record and is responsible for synchronizing information about the new group to other workloads across Microsoft 365 (for example, Planner and SharePoint Online) to make those applications aware that a new group is available.</li> <li>a workload must recognize Groups as a valid security mechanism before Groups can control access to resources.</li> <li>The Exchange Online directory holds email-related information about Microsoft 365 Groups, including their proxy addresses.</li> <li>When you use Exchange clients or cmdlets from the Exchange Online PowerShell module to update Groups, a dual-write mechanism commits the updates simultaneously in Azure AD and Exchange Online. Following a successful update, Azure AD synchronizes the changes with other application directories</li> </ol> </li> </ol>"},{"location":"Managing%20Groups/Basics/#applications-that-use-microsoft-365-groups","title":"Applications that use Microsoft 365 Groups","text":"<ul> <li>Outlook</li> <li>Microsoft Teams</li> <li>Microsoft Planner</li> <li>Viva Engage (Yammer) Communities</li> <li>SharePoint sites </li> <li>Stream</li> <li>Power BI</li> </ul>"},{"location":"Managing%20Groups/Basics/#core-principles","title":"Core Principles","text":""},{"location":"Managing%20Groups/Basics/#1-azure-ad-is-the-directory-of-record","title":"1. Azure AD is the directory of record","text":"<ul> <li>when a new group is created, it is first created in Azure AD</li> <li>then it is created in EXODS to create the group mailbox</li> <li>EXO then updates the object in AAD with information such as its email address</li> <li>provisioning process creates other components like SPO site, notebook, etc</li> <li>Azure AD use \"forward sync\"</li> </ul>"},{"location":"Managing%20Groups/Basics/#2-federated-resources-are-drawn-from-multiple-applications","title":"2. Federated resources are drawn from multiple applications","text":""},{"location":"Managing%20Groups/Basics/#3-loose-coupling-with-groups-and-applications","title":"3. Loose coupling with groups and applications","text":""},{"location":"Managing%20Groups/Basics/#groups-basics","title":"Groups Basics","text":""},{"location":"Managing%20Groups/Basics/#a-focus-on-self-service","title":"A focus on self-service","text":""},{"location":"Managing%20Groups/Basics/#simple-permissions","title":"Simple permissions","text":""},{"location":"Managing%20Groups/Basics/#sharing-is-easy","title":"Sharing is easy","text":""},{"location":"Managing%20Groups/Basics/#a-shared-memory","title":"A shared memory","text":""},{"location":"Managing%20Groups/Basics/#a-growing-experience","title":"A growing experience","text":""},{"location":"Managing%20Groups/Basics/#group-components","title":"Group Components","text":""},{"location":"Managing%20Groups/Basics/#members-and-owners","title":"Members and Owners","text":"<ul> <li>Owners</li> <li>Members</li> <li>Subscribers</li> </ul> <p>Azure AD supports two types of group membership: * Dynamic user * Assigned</p> <p>[!tip] Printing a Report of Microsoft 365 Group (Team) Membership - Office 365 for IT Pros (office365itpros.com)</p>"},{"location":"Managing%20Groups/Basics/#ownerless-groups-policy","title":"Ownerless Groups Policy","text":"<p>Check ownerless groups:  `[PS] C:&gt; [array]$Groups = (Get-UnifiedGroup -ResultSize Unlimited | Select-Object DisplayName, ManagedBy) \\(Groups | Where-Object {\\)_.ManagedBy.Count -eq 0</p>"},{"location":"Managing%20Groups/Basics/#group-privacy-access-type","title":"Group Privacy (Access Type)","text":"<p>Set the default group access type `[PS] C:&gt; Set-OrganizationConfig \u2013DefaultGroupAccessType Public</p> <p>Set a group's privacy `[PS] C:&gt; Set-UnifiedGroup \u2013Identity TestGroup \u2013AccessType Private</p>"},{"location":"Managing%20Groups/Basics/#conversations","title":"Conversations","text":""},{"location":"Managing%20Groups/Basics/#access-to-other-folders-in-the-group-mailbox","title":"Access to Other Folders in the Group Mailbox","text":"<ul> <li>clients usually only expose the Inbox and Calendar folders</li> <li>Sent Items folder stores copies of messages generated by clients, such as notifications to users that someone has assigned them a task using Planner</li> </ul>"},{"location":"Managing%20Groups/Basics/#assigning-send-as-and-send-on-behalf-of-permissions-to-groups","title":"Assigning Send As and Send On Behalf Of Permissions to Groups","text":"<p>`[PS] C:&gt; Add-RecipientPermission Microsoft365Gurus@Office365ITPros.com -AccessRights SendAs -Trustee Kim.Akers@Office365ITPros.com</p> <p>`[PS] C:&gt; Set-UnifiedGroup -Identity \"Microsoft 365 Gurus\" -GrantSendOnBehalfTo @{Add=\"John.Smith@Office365ITPros.com\"}</p>"},{"location":"Managing%20Groups/Basics/#auto-reply-for-group-mailboxes","title":"Auto-Reply for Group Mailboxes","text":"<p>`[PS] C:&gt; Set-MailboxAutoReplyConfiguration -Identity \"Office 365 for IT Pros\" -ExternalMessage \"Sorry, this mailbox doesn't accept email\" -AutoReplyState Enabled -InternalMessage 'Please! We use Teams for communication, so send your message to Teams and it will be dealt with there.'</p>"},{"location":"Managing%20Groups/Basics/#group-document-libraries","title":"Group Document Libraries","text":"<ul> <li>When a file is in a Group\u2019s document library, the group controls its permissions. </li> <li>All documents in the library inherit the permissions to allow group members equal access to the content.</li> <li>SharePoint checks permissions when a user requests access to a file by checking the group membership</li> <li>It is also important to remember that the group owns the content in the group document library rather than the original authors. </li> </ul> <p>Regional settings: * The regional settings for document libraries created for Groups inherit their time zone and locale (country) from the account which creates the group.  * Group members see date and timestamps for documents as if they were in that time zone. * You can change the site\u2019s time zone and locale (country) by updating the Regional Settings (in Site Information).  * Sites created in the SharePoint admin center use the regional settings defined in the Site creation settings</p>"},{"location":"Managing%20Groups/Basics/#implementing-groups","title":"Implementing Groups","text":""},{"location":"Managing%20Groups/Basics/#group-controls","title":"Group Controls","text":"<p>group creation is available at these levels: 1. Azure AD (directory) 2. Microsoft 365 (all workloads) 3. App-level     1. : Outlook clients use a setting in the OWA mailbox policy to define if a user can create a new group through Outlook (including OWA and Outlook mobile). This control does not require any additional licenses.</p>"},{"location":"Managing%20Groups/Basics/#azure-ad-policy-for-groups","title":"Azure AD Policy for Groups","text":""},{"location":"Managing%20Groups/Basics/#licensing-groups-functionality","title":"Licensing Groups Functionality","text":""},{"location":"Managing%20Groups/Basics/#guest-access-licenses","title":"Guest Access Licenses","text":"<ul> <li>included in all Microsoft 365 Business Standard and Premium plans and Enterprise subscriptions, which means that you do not need to assign licenses to guest users to access applications like Groups, Teams, and Planner</li> </ul>"},{"location":"Managing%20Groups/Basics/#creating-and-updating-the-groups-policy","title":"Creating and Updating the Groups Policy","text":"<ul> <li>By default, a tenant does not have an active Groups policy, and applications use default settings. </li> <li>To change any settings, we first create a directory setting object to hold the policy settings from the correct template. </li> <li>Azure AD loads default values into the new policy and you can then update those settings</li> </ul>"},{"location":"Managing%20Groups/Basics/#container-management-for-groups-sites-and-teams","title":"Container Management for Groups, Sites, and Teams","text":"<ul> <li>A classification is a text-only marker (like \u201cSecret\u201d or \u201cConfidential\u201d) assigned to a group and displayed by applications</li> <li>A tenant can choose to use classifications or sensitivity labels to mark groups. They cannot use both</li> </ul>"},{"location":"Managing%20Groups/Basics/#creating-group-classifications","title":"Creating Group Classifications","text":""},{"location":"Managing%20Groups/Basics/#switching-from-classifications-to-sensitivity-labels","title":"Switching from Classifications to Sensitivity Labels","text":""},{"location":"Managing%20Groups/Basics/#controlling-group-creation","title":"Controlling Group Creation","text":"<p>check if group creation is enabled: </p> <p>`Get-OrganizationConfig | Format-List Group,Data</p>"},{"location":"Managing%20Groups/Basics/#groups-and-transport","title":"Groups and Transport","text":"<ul> <li>clients can post new conversations and reply to existing conversations</li> <li>Outlook handles a message posted to a group conversation much like any other message.</li> <li>By default, the Exchange Online transport service does not deliver copies of messages posted by a user to their Inbox.</li> </ul>"},{"location":"Managing%20Groups/Basics/#managing-groups-with-outlook-clients","title":"Managing Groups with Outlook Clients","text":""},{"location":"Managing%20Groups/Basics/#guest-access-to-microsoft-365-groups","title":"Guest Access to Microsoft 365 Groups","text":"<ul> <li>there is no specific limit on the number of guests who can join a group (or team)</li> </ul>"},{"location":"PowerShell/Scripts/","title":"Scripts","text":""},{"location":"PowerShell/Scripts/#setup-autoreply-for-all-users","title":"Setup autoreply for all users","text":"<p><code>#Import the required module for Exchange Online</code></p> <p><code>Import-Module ExchangeOnlineManagement</code></p> <p><code># Connect to Exchange Online</code></p> <p><code>Connect-ExchangeOnline -UserPrincipalName admin@example.com -ShowProgress $true</code></p> <p><code># Get all mailboxes</code></p> <p><code>$mailboxes = Get-Mailbox -ResultSize Unlimited</code></p> <p><code># Loop through each mailbox and set the auto reply configuration</code></p> <p><code>foreach ($mailbox in $mailboxes) {</code></p> <p><code>Set-MailboxAutoReplyConfiguration -Identity $mailbox.UserPrincipalName -AutoReplyState Enabled -ExternalMessage \"Your message has been received. We will get back to you soon.\" -InternalMessage \"Your message has been received. We will get back to you soon.\"</code> <code>}</code></p> <p><code># Disconnect from Exchange Online</code> <code>Disconnect-ExchangeOnline -Confirm:$false</code> </p>"},{"location":"PowerShell/Scripts/#setup-email-forwarding-for-all-users","title":"Setup email forwarding for all users","text":"<p>`$forwardingAddresses = Import-Csv -Path \"C:\\path\\to\\your\\file.csv\" </p> <p># Loop through each row in the CSV file and set forwarding </p> <p><code>foreach ($row in $forwardingAddresses) {</code> <code>Set-Mailbox -Identity $row.UserPrincipalName -ForwardingSmtpAddress $row.ForwardingAddress -DeliverToMailboxAndForward $true }</code></p>"},{"location":"PowerShell/Scripts/#find-the-oldest-email","title":"find the oldest email","text":"<p><code>$user = \"admin@mstestavaceblobor.onmicrosoft.com\"</code></p> <p><code>$stats = Get-MailboxFolderStatistics -IncludeOldestAndNewestItems -Identity $user</code></p> <p><code>$oldestemail = $stats | Where-Object {$_.oldestitemreceiveddate -and $_.containerclass -eq 'ipf.note'} | sort-object oldestitemreceiveddate | select-object containerclass, oldestitemreceiveddate, folderpath -first 1</code></p> <p><code>$oldestemail</code></p>"},{"location":"PowerShell/Scripts/#recreate-distro","title":"recreate distro","text":"<p><code>#Connect-ExchangeOnline</code></p> <p><code>#Get-DistributionGroupMember -Identity distro1 | select primarysmtpaddress | Export-Csv -Path C:\\Users\\VMASUser\\Downloads\\test\\distromember.csv</code></p> <p><code>#Update-DistributionGroupMember -Identity distro1 -Members dario@mstestavaceblobor.onmicrosoft.com</code></p> <p><code>Import-Csv C:\\Users\\VMASUser\\Downloads\\newmembers.csv | ForEach-Object {</code></p> <p><code>Add-DistributionGroupMember -Identity distro1 -Member $_.upn</code> <code>}</code></p>"},{"location":"PowerShell/Scripts/#search-unified-audit-log-email","title":"search unified audit log - email","text":"<p><code>Search-UnifiedAuditLog -StartDate 01/01/2024 -EndDate 03/15/2024 -UserIds\u00a0[shaw@mstestavacebshsua.onmicrosoft.com](mailto:shaw@mstestavacebshsua.onmicrosoft.com)\u00a0-RecordType ExchangeItem -SessionCommand ReturnLargeSet | Export-CSV -Path C:\\Users\\ShaSha\\Documents\\audit.csv</code></p>"},{"location":"PowerShell/Scripts/#test-smtp-client-auth-submission","title":"Test SMTP Client Auth Submission","text":"<p><code>$cred= Get-Credential</code></p> <p><code>$mailParams = @{</code></p> <pre><code>smtpServer = \"smtp.office365.com\"\n\nport = \"587\"\n\nuseSSL = $true\n\ncredential = $cred\n\nfrom = baks@kangkongan.store\n\nto = admin@kangkongan.store, loujomer@gmail.com\n\nsubject = \"Test Email from PowerShell\"\n\nbody = \"This is a test email from Powershell\"\n\ndeliveryNotificationOption = \"onFailure\", \"onSuccess\"\n</code></pre> <p>}</p> <p>send-mailmessage @mailParams</p> <p>Requirements:</p> <ol> <li>disable Security defaults (security defaults will disable smtp authentication)</li> <li>enable smtp authentication</li> <li>enforce mfa to use app password</li> <li>m365 mailbox</li> <li>tls 1.2 or higher</li> </ol>"},{"location":"PowerShell/Scripts/#test-direct-send","title":"Test Direct Send","text":"<p><code>$mailParams = @{</code></p> <pre><code>smtpServer = \"kangkongan-store.mail.protection.outlook.com\"\n\nport = \"25\"\n\nuseSSL = $true\n\nfrom = harvey@kangkongan.store\n\nto = admin@kangkongan.store\n\nsubject = \"Test Email from PowerShell\"\n\nbody = \"This is a test email from Powershell\"\n\ndeliveryNotificationOption = \"onFailure\", \"onSuccess\"\n</code></pre> <p>}</p> <p>send-mailmessage @mailParams</p> <p>note: no need to have a mailbox</p>"},{"location":"PowerShell/Scripts/#get-users-manager","title":"get user's manager","text":"<p>$userlist = Get-AzureADUser -All $true $output = @()</p> <p><code>foreach ($item in $userlist) {</code> <code>$manager = Get-AzureADUserManager -ObjectId $item.ObjectId</code></p> <pre><code>$data = New-Object -TypeName psobject\n$data | Add-Member -MemberType NoteProperty -Name UsersObjectId -Value $item.ObjectId\n$data | Add-Member -MemberType NoteProperty -Name UserUPN -Value $item.UserPrincipalName\n$data | Add-Member -MemberType NoteProperty -Name UserType -Value $item.UserType\n$data | Add-Member -MemberType NoteProperty -Name ManagersObjectId -Value $manager.ObjectId\n$data | Add-Member -MemberType NoteProperty -Name ManagerUPN -Value $manager.UserPrincipalName\n$data | Add-Member -MemberType NoteProperty -Name ManagerUserType -Value $manager.UserType\n\n\n$output += $data\n</code></pre> <p>} </p> <p><code>$output | Export-Csv -Path C:\\Temp\\UsersAndManagersReport.csv -NoTypeInformation</code></p>"},{"location":"PowerShell/Scripts/#archive-storage-for-all-users","title":"archive storage for all users","text":"<p><code>Get-Mailbox -ResultSize Unlimited -RecipientTypeDetails UserMailbox | Select DisplayName, ArchiveStatus, @{Name=\"ArchiveSize\"; Expression={(Get-MailboxStatistics $_.DistinguishedName -Archive).TotalItemSize}} | Export-Csv \"C:\\Users\\VMASUser\\Downloads\\test\\ArchiveMailboxes.csv\" -NoTypeInformation -Encoding UTF8</code></p>"},{"location":"PowerShell/Scripts/#dynamic-distribution-list","title":"dynamic distribution list","text":"<p><code>#create recipient filter based from Title</code> <code>$Filter = \"((Title -eq 'CRM') -and (ExchangeUserAccountControl -ne 'AccountDisabled'))\"</code></p> <p><code>#check matching recipients - optional cmdlet to run</code> <code>Get-Recipient -RecipientPreviewFilter $Filter | ft displayname, title</code></p> <p><code>New-DynamicDistributionGroup -Name \"My New DDL\" -DisplayName \"CRM Employees\" -Alias CRMEmployees -PrimarySmtpAddress crm@mstestavaceblobor.onmicrosoft.com -RecipientFilter $Filter</code></p> <p><code>Set-DynamicDistributionGroup -Identity CRMEmployees -ManagedBy admin@mstestavaceblobor.onmicrosoft.com -MailTip \"Distribution List for anyone with CRM in the job title</code> </p>"},{"location":"PowerShell/Scripts/#check-users-mfa","title":"check user's MFA","text":"<p><code>#Import the AzureAD module</code> <code>Import-Module AzureAD</code></p> <p><code>#Connect to Azure AD</code> <code>Connect-AzureAD</code></p> <p><code>#Specify the user's UPN (User Principal Name) or Object ID</code></p> <p><code>$userUPN = \"&lt;User's UPN or Object ID&gt;\"</code></p> <p><code>#Get the user's MFA information</code> <code>$user = Get-AzureADUser -ObjectId $userUPN</code></p> <p><code>#Check if the user has MFA configured</code> <code>if ($user.StrongAuthenticationMethods.Count -gt 0) {</code></p> <pre><code># Loop through the MFA methods to find the phone number\n\nforeach ($method in $user.StrongAuthenticationMethods) {\n\n    if ($method.MethodType -eq \"Phone\") {\n\n        Write-Host \"MFA Phone Number: $($method.PhoneNumber)\"\n        break\n    }\n}\n</code></pre> <p><code>}</code></p> <p><code>else {</code> <code>Write-Host \"MFA is not configured for this user.\"</code> `}</p> <p><code>#Disconnect from Azure AD</code></p> <p><code>Disconnect-AzureAD</code></p>"},{"location":"PowerShell/Scripts/#enable-archive-mailbox-for-all-users","title":"enable archive mailbox for all users","text":"<p><code>Get-Mailbox -Filter {ArchiveStatus -Eq \"None\" -AND RecipientTypeDetails -Eq \"UserMailbox\"} | Enable-Mailbox -Archive</code></p>"},{"location":"PowerShell/Scripts/#find-sharepoint-sites-with-no-group","title":"find sharepoint sites with no group","text":"<p><code>Get-SPOSite -IncludePersonalSite:$false | Where-Object -Property groupid -eq '00000000-0000-0000-0000-000000000000'</code></p>"},{"location":"PowerShell/Tricks/","title":"Tricks","text":""},{"location":"PowerShell/Tricks/#expand-multi-valued-properties","title":"Expand multi-valued properties","text":"<p>`| Select-Object -Property property -ExpandProperty property</p>"},{"location":"PowerShell/Tricks/#get-a-list-of-property-members","title":"Get a list of property members","text":"<p>`| Get-Member -MemberType property</p>"},{"location":"PowerShell/Tricks/#filter-property-values","title":"Filter property values","text":"<p><code>| Where-Object -Property *property* -eq \"value\"</code></p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/01%20Configure%20and%20manage%20microsoft%20entra%20roles/","title":"01 Configure and manage microsoft entra roles","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/01%20Configure%20and%20manage%20microsoft%20entra%20roles/#microsoft-entra-roles","title":"Microsoft Entra roles","text":"<ul> <li>Global admin</li> <li>user admin</li> <li>billing admin</li> </ul> <p>by default, the Global Administrator doesn't have access to Azure resources.</p> <p>By default, Azure roles and Microsoft Entra roles don't span Azure and Microsoft Entra ID. However, if a Global Administrator elevates their access by choosing the\u00a0Access management for Azure resources\u00a0switch in the Azure portal, the Global Administrator will be granted the User Access Administrator role (an Azure role) on all subscriptions for a particular tenant. The User Access Administrator role enables the user to grant other users access to Azure resources. This switch can be helpful to regain access to a subscription ^hello</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/01%20Configure%20and%20manage%20microsoft%20entra%20roles/#assign-roles","title":"Assign roles","text":"<ul> <li>Assign a role to a user or group</li> <li>Assign a user or group to a role</li> <li>Assign a role to a broad-scope, like a Subscription, Resource Group, or Management Group</li> <li>Assign a role using PowerShell or Microsoft Graph API.</li> <li>Assign a role using Privileged Identity Management (PIM)</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/01%20Configure%20and%20manage%20microsoft%20entra%20roles/#what-admin-roles-are-available-for-an-administrative-unit","title":"What admin roles are available for an administrative unit?","text":"<ul> <li>Authentication administrator</li> <li>Groups administrator</li> <li>Helpdesk administrator</li> <li>License administrator</li> <li>Password administrator</li> <li>User administrator</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/01%20Configure%20and%20manage%20microsoft%20entra%20roles/#configure-tenant-wide-setting","title":"Configure tenant-wide setting","text":"<ul> <li>Tenant Properties</li> <li>User Settings</li> <li>External Collaboration Settings</li> </ul> <p>this is a test #^hello</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/","title":"02 Create, configure, and manage identities","text":"<p>Microsoft Entra ID defines users in three ways: - Cloud identities     - These users exist only in Microsoft Entra ID.     - Their source is\u00a0Microsoft Entra ID\u00a0or\u00a0External Microsoft Entra directory - Directory-synchronized identities     - \u00a0These users exist in an on-premises Active Directory - Guest users     - \u00a0These users exist outside Azure</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#key-properties-of-the-microsoft-entra-b2b-collaboration-user","title":"Key properties of the Microsoft Entra B2B collaboration user","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#usertype","title":"UserType","text":"<ul> <li>The UserType has no relation to how the user signs in, the directory role of the user, and so on. This property simply indicates the user's relationship to the host organization and allows the organization to enforce policies that depend on this property.<ul> <li>Member</li> <li>Guest</li> </ul> </li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#identities","title":"Identities","text":"Identities property value Sign-in state External Microsoft Entra tenant This user is homed in an external organization and authenticates by using a Microsoft Entra account that belongs to the other organization. Microsoft account This user is homed in a Microsoft account and authenticates by using a Microsoft account. {host\u2019s domain} This user authenticates by using a Microsoft Entra account that belongs to this organization. google.com This user has a Gmail account and has signed up by using self-service to the other organization. facebook.com This user has a Facebook account and has signed up by using self-service to the other organization. mail This user has signed up by using Microsoft Entra Email one-time passcode (OTP). {issuer URI} This user is homed in an external organization that doesn't use Microsoft Entra ID as their identity provider, but instead uses a SAML/WS-Fed-based identity provider. <p>Microsoft Entra ID group types: - Security groups - Microsoft 365 groups</p> <p>Membership types: - Assigned - Dynamic</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#microsoft-entra-registered-devices","title":"Microsoft Entra registered devices","text":"<ul> <li>Registered to Microsoft Entra ID without requiring organizational account to sign in to the device</li> <li>Microsoft Entra registered devices are signed in to using a local account like a Microsoft account on a Windows 10 device, but additionally have a Microsoft Entra account attached for access to organizational resources</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#microsoft-entra-joined-devices","title":"Microsoft Entra joined devices","text":"<ul> <li>Joined only to Microsoft Entra ID requiring organizational account to sign in to the device</li> <li>Microsoft Entra joined devices are signed in to using an organizational Microsoft Entra account.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#hybrid-microsoft-entra-joined-devices","title":"Hybrid Microsoft Entra joined devices","text":"<ul> <li>Joined to on-premises AD and Microsoft Entra ID requiring organizational account to sign in to the device</li> <li>These devices are devices that are joined to your on-premises Active Directory and registered with your Microsoft Entra directory.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#device-writeback","title":"Device Writeback","text":"<ul> <li>Device writeback helps you to keep a track of devices registered with Microsoft Entra ID in AD. You will have a copy of the device objects in the container \"Registered Devices\"</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#find-license-assignment-errors","title":"Find license assignment errors","text":"<ul> <li>Not enough licenses</li> <li>Service plans that conflict</li> <li>Other products depend on this license</li> <li>Usage location isn't allowed</li> <li>Duplicate proxy addresses</li> <li>Microsoft Entra Mail and ProxyAddresses attribute change</li> <li>LicenseAssignmentAttributeConcurrencyException in audit logs</li> <li>More than one product license assigned to a group</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#what-is-a-custom-security-attribute","title":"What is a custom security attribute?","text":"<ul> <li>are business-specific attributes (key-value pairs) that you can define and assign to Microsoft Entra objects.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#explore-automatic-user-creation","title":"Explore automatic user creation","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#why-use-scim","title":"Why use SCIM?","text":"<ul> <li>is an open standard protocol for automating the exchange of user identity information between identity domains and IT systems</li> <li>SCIM ensures that employees added to the Human Capital Management (HCM) system automatically have accounts created in Microsoft Entra ID or Windows Server Active Directory</li> <li>User attributes and profiles are synchronized between the two systems, updating removing users based on the user status or role change.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/02%20Create%2C%20configure%2C%20and%20manage%20identities/#components-of-scim-system-for-cross-domain-identity-management","title":"Components of SCIM (System for Cross-Domain Identity Management)","text":"<ul> <li>HCM system (Human Capital Management)<ul> <li>Applications and technologies that enable Human Capital Management process and practices that support and automate HR processes throughout the employee lifecycle.</li> </ul> </li> <li>Microsoft Entra Provisioning Service<ul> <li>Uses the SCIM 2.0 protocol for automatic provisioning. The service connects to the SCIM endpoint for the application, and uses the SCIM user object schema and REST APIs to automate provisioning and de-provisioning of users and groups.</li> </ul> </li> <li>Microsoft Entra ID<ul> <li>User repository used to manage the lifecycle of identities and their entitlements.</li> </ul> </li> <li>Target system<ul> <li>Application or system that has SCIM endpoint and works with the Microsoft Entra provisioning to enable automatic provisioning of users and groups.</li> </ul> </li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/","title":"03 Implement and manage external identities","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#invitation-redemption-flow","title":"Invitation redemption flow","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#what-is-entra-verified-id","title":"What is Entra Verified ID?","text":"<ul> <li>The service allows you to issue and verify credentials</li> <li>Verifiable credentials are data objects consisting of claims made by the issuer attesting information about a subject</li> <li>These claims are identified by schema and include the DID (decentralized identity) issuer and subject.</li> <li>The issuer's DID creates a digital signature as proof that they attest to this information.</li> <li>For issuers, Microsoft Entra ID provides a service that they can customize and use to issue their own verifiable credentials</li> <li>For verifiers, the service provides a free REST API that makes it easy to request and accept verifiable credentials in your apps and services.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#configure-identity-providers","title":"Configure identity providers","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#when-is-a-guest-user-authenticated-with-samlws-fed-idp-federation","title":"When is a guest user authenticated with SAML/WS-Fed IdP federation?","text":"<ul> <li>After you set up federation with an organization's SAML/WS-Fed IdP, any new guest users you invite will be authenticated using that SAML/WS-Fed IdP. </li> <li>It\u2019s important to note that setting up federation doesn\u2019t change the authentication method for guest users who have already redeemed an invitation from you.</li> <li>In any of the scenarios below, you can update a guest user\u2019s authentication method by resetting their redemption status. </li> <li>SAML/WS-Fed IdP federation is tied to domain namespaces, such as contoso.com and fabrikam.com.</li> <li>When the admin establishes federation with AD FS or a third-party IdP, organizations associate one or more domain-namespaces to these IdPs.</li> </ul> <p>Example scenarios: - Guest users have already redeemed invitations from you, and then later you set up federation with the organization's SAML/WS-Fed IdP. These guest users continue to use the same authentication method they used before you set up federation. - You set up federation with an organization's SAML/WS-Fed IdP and invite guest users, and then the partner organization later moves to Microsoft Entra ID. The guest users who have already redeemed invitations continue to use the federated SAML/WS-Fed IdP, as long as the federation policy in your tenant exists. - You delete federation with an organization's SAML/WS-Fed IdP. Any guest users currently using the SAML/WS-Fed IdP are unable to sign in.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#end-user-experience","title":"End-user experience","text":"<ul> <li>With SAML/WS-Fed IdP federation, guest users sign into your Microsoft Entra tenant using their own organizational account</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#saml-security-assertion-markup-language-20-configuration","title":"SAML: Security Assertion Markup Language 2.0 configuration","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#note","title":"Note","text":"<p>The target domain for direct federation must not be DNS-verified on Microsoft Entra ID.</p> <p>To set up direct federation, the following attributes must be received in the SAML 2.0 response from the identity provider.</p> <p>These attributes can be configured by linking to the online security token service XML file or by entering them manually.</p> <p>Required attributes for the SAML 2.0 response from the IdP:</p> Attribute Value AssertionConsumerService <code>https://login.microsoftonline.com/login.srf</code> Audience <code>urn:federation:MicrosoftOnline</code> Issuer The issuer URI of the partner IdP, for example\u00a0<code>https://www.example.com/exk10l6w90DHM0yi...</code> <p>Required claims for the SAML 2.0 token issued by the IdP:</p> Attribute Value NameID Format <code>urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</code> emailaddress <code>https://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</code> ## WS-Federation configuration"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#note_1","title":"Note","text":"<p>The target domain for direct federation must not be DNS-verified on Microsoft Entra ID. The authentication URL domain must match either the target domain or the domain of an allowed identity provider.</p> <p>To set up direct federation, the following attributes must be received in the WS-Fed message from the identity provider.</p> <p>These attributes can be configured by linking to the online security token service XML file or by entering them manually.</p> <p>Required attributes in the WS-Fed message from the IdP:</p> Attribute Value PassiveRequestorEndpoint <code>https://login.microsoftonline.com/login.srf</code> Audience <code>urn:federation:MicrosoftOnline</code> Issuer The issuer URI of the partner IdP, for example\u00a0<code>https://www.example.com/exk10l6w90DHM0yi...</code> <p>Required claims  for the WS-Fed token issued by the IdP:</p> Attribute Value ImmutableID <code>https://schemas.microsoft.com/LiveID/Federation/2008/05/ImmutableID</code> emailaddress <code>https://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</code>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#google-gmail-federation","title":"Google (Gmail) Federation","text":"<ul> <li>Google federation is designed specifically for Gmail users.</li> <li>To federate with G Suite domains, use\u00a0direct federation.</li> </ul> <p>When you send an invitation to Google Gmail users, the guest users should access your shared apps or resources by using a link that includes the tenant context.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#sign-in-endpoints","title":"Sign-in endpoints","text":"<ul> <li>Google users can sign in to Teams from a common endpoint like\u00a0https://teams.microsoft.com</li> <li>Other applications' common endpoints might not support Google users. </li> <li>Google guest users must sign in by using a link that includes your tenant information. Following are examples:<ul> <li><code>https://myapps.microsoft.com/?tenantid= your tenant ID</code></li> <li><code>https://portal.azure.com/ your tenant ID</code></li> <li><code>https://myapps.microsoft.com/ your verified domain .onmicrosoft.com</code></li> </ul> </li> </ul> <p>If Google guest users try to use a link like\u00a0<code>https://myapps.microsoft.com</code>\u00a0or\u00a0<code>https://portal.azure.com</code>, they'll get an error.</p> <p>You can also give Google guest users a direct link to an application or resource, as long as the link includes your tenant information. For example,\u00a0<code>https://myapps.microsoft.com/signin/x/ application ID?tenantId= your tenant ID</code></p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#facebook-federation","title":"Facebook federation","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#note_2","title":"Note","text":"<p>Users can only use their Facebook accounts to sign up through apps using self-service-sign-up and user flows. Users cannot be invited and redeem their invitation using a Facebook account.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#implement-cross-tenant-access-controls","title":"Implement cross-tenant access controls","text":"<p>- Cross-tenant access settings give you granular control over how external Microsoft Entra organizations collaborate with you,\u00a0inbound access.  \u00a0- You can also control how your users collaborate with external Microsoft Entra organizations,\u00a0outbound access</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/03%20Implement%20and%20manage%20external%20identities/#manage-inbound-and-outbound-settings","title":"Manage inbound and outbound settings","text":"Cross-tenant access setting name Operations managed Outbound access settings Control whether users can access resources in an external organization. You can apply settings to everyone, or specify individual users, groups, and applications. Inbound access settings Control whether users from external Microsoft Entra organizations can access resources in your organization. You can apply these settings to everyone, or specify individual users, groups, and applications. Trust settings (inbound) Determine whether your Conditional Access policies will trust the multifactor authentication (MFA). You can also require compliant device, and hybrid Microsoft Entra joined device. And finally, allow or restrict user from an external organization if their users have already satisfied these requirements in their home tenants. B2b direct connect Set up a mutual trust relationship with another Microsoft Entra organization for seamless collaboration. This feature currently works with Microsoft Teams shared channels."},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/","title":"04 Implement and manage hybrid identity","text":"<p>Microsoft Entra Connect provides the following capabilities: - Synchronization - Password hash synchronization - Pass-through authentication - Federation integration - Health monitoring</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#select-an-authentication-method","title":"Select an authentication method","text":"<ul> <li>Cloud authentication</li> <li>Federated authentication</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#cloud-authentication","title":"Cloud authentication","text":"<ul> <li>Microsoft Entra ID handles users' sign-in process</li> </ul> <p>2 options: - Microsoft Entra password hash synchronization (PHS) - Microsoft Entra pass-through authentication (PTA)</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#microsoft-entra-password-hash-synchronization-phs","title":"Microsoft Entra password hash synchronization (PHS)","text":"<p>Users can use the same username and password that they use on-premises without having to deploy any more infrastructure.</p> <ul> <li>Effort<ul> <li>requires the least effort</li> <li>runs every two minutes.</li> </ul> </li> <li>User experience<ul> <li>Seamless SSO eliminates unnecessary prompts when users are signed in.</li> </ul> </li> <li>Advanced scenarios<ul> <li>it's possible to use insights from identities with Microsoft Entra Identity Protection reports</li> </ul> </li> <li>Business continuity<ul> <li>is highly available as a cloud service that scales to all Microsoft datacenters</li> </ul> </li> <li>Considerations<ul> <li>doesn't immediately enforce changes in on-premises account states</li> </ul> </li> </ul> <p></p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#microsoft-entra-pass-through-authentication-pta","title":"Microsoft Entra pass-through authentication (PTA)","text":"<p>Provides a simple password validation for Microsoft Entra authentication services by using a software agent that runs on one or more on-premises servers. The servers validate the users directly with your on-premises Active Directory, which ensures that the password validation doesn't happen in the cloud. Companies with a security requirement to immediately enforce on-premises user account states, password policies, and sign in hours might use this authentication method.</p> <ul> <li>Effort<ul> <li>you need one or more (we recommend three) lightweight agents installed on existing servers</li> <li>These agents must have access to your on-premises Active Directory Domain Services, including your on-premises AD domain controllers</li> <li>They need outbound access to the Internet and access to your domain controllers. For this reason, it's not supported to deploy the agents in a perimeter network.</li> </ul> </li> <li>User experience<ul> <li>Seamless SSO eliminates unnecessary prompts after users sign in.</li> </ul> </li> <li>Advanced scenarios<ul> <li>enforces the on-premises account policy at the time of sign-in.</li> </ul> </li> <li>Business continuity<ul> <li>it's recommended to deploy two extra pass-through authentication agents</li> </ul> </li> <li>Considerations<ul> <li>You can use PHS as a backup authentication method for PTA when the agents can't validate a user's credentials due to a significant on-premises failure.</li> <li>Fail over to PHS doesn't happen automatically and you must use Microsoft Entra Connect to switch the sign-in method manually.</li> </ul> </li> </ul> <p></p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#federated-authentication","title":"Federated authentication","text":"<p>Microsoft Entra ID hands off the authentication process to a separate trusted authentication system such as ADFS to validate the user\u2019s password</p> <ul> <li>Effort<ul> <li>relies on an external trusted system to authenticate users</li> <li>It's up to the organization by using the federated system to make sure it's deployed securely and can handle the authentication load.</li> </ul> </li> <li>User experience<ul> <li>UX \u00a0depends on the implementation of the features, topology, and configuration of the federation farm</li> </ul> </li> <li>Advanced scenarios.<ul> <li>A federated authentication solution is required when customers have an authentication requirement that Microsoft Entra ID doesn't support natively.<ul> <li>Authentication that requires smartcards or certificates.</li> <li> <ul> <li>On-premises MFA servers or third-party multifactor providers requiring a federated identity provider.</li> </ul> </li> <li>Authentication by using third-party authentication solutions.</li> <li>Sign in that requires a sAMAccountName, for example DOMAIN\\username, instead of a User Principal Name (UPN), for example, user@domain.com</li> </ul> </li> </ul> </li> <li>Business continuity.<ul> <li>typically require a load-balanced array of servers, known as a farm.</li> <li>This farm is configured in an internal network and perimeter network topology to ensure high availability for authentication requests.</li> </ul> </li> <li>Considerations<ul> <li>typically require a more significant investment in on-premises infrastructure</li> <li>more complex to operate and troubleshoot compared to cloud authentication solutions</li> </ul> </li> </ul> <p></p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#recommendations","title":"Recommendations","text":"<p>Use or enable PHS for whichever authentication method you choose, for the following reasons:</p> <ol> <li>High availability and disaster recovery.</li> <li>On-premises outage survival</li> <li>Identity protection.</li> </ol>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#microsoft-entra-connect-design-concepts","title":"Microsoft Entra Connect design concepts","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#sourceanchor","title":"sourceAnchor","text":"<ul> <li>sourceAnchor attribute is defined as\u00a0_an attribute immutable during the lifetime of an object</li> <li>uniquely identifies an object as being the same object on-premises and in Microsoft Entra ID</li> <li>The attribute is also called\u00a0immutableId</li> <li>recommended attribute to use as sourceAnchor: objectGUID</li> </ul> <p>Usage: - When a new sync engine server is built, or rebuilt, this attribute links existing objects in Microsoft Entra ID with objects on-premises. - If you move from a cloud-only identity to a synchronized identity model, then this attribute allows objects to \"hard match\" existing objects in Microsoft Entra ID with on-premises objects. - If you use federation, then this attribute together with the\u00a0userPrincipalName\u00a0is used in the claim to uniquely identify a user.</p> <p>objectGuid - used if you have a single forest on-premises - used with express settings in Microsoft Entra Connect - used by DirSync - used with multiple forests if users aren't moved between forests and domains</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#microsoft-entra-sign-in","title":"Microsoft Entra sign-in","text":"<ul> <li>Microsoft Entra uses userPrincipalName (UPN) to authenticate the user</li> <li>when you synchronize your users, you must choose the attribute to be used for value of userPrincipalName carefully</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#custom-domain-state-and-user-principal-name","title":"Custom domain state and User Principal Name","text":"<ul> <li>If the UPN suffix of a user doesn't match a verified domain in Microsoft Entra ID, then the tool replaces the UPN suffix with tenant.onmicrosoft.com.</li> <li>if you're running under contoso.local (non routable), Microsoft Entra Connect suggests you use custom settings rather than using express settings</li> <li>Using custom settings, you're able to specify the attribute that should be used as UPN to sign in to Azure after the users are synced to Microsoft Entra ID.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#topologies-for-microsoft-entra-connect","title":"Topologies for Microsoft Entra Connect","text":"<ol> <li>Single forest, single Microsoft Entra tenant</li> <li>Multiple forests, single Microsoft Entra tenant</li> <li>Multiple forests, single sync server, users are represented in only one directory</li> <li>Multiple forests: full mesh with optional GALSync</li> <li>Multiple forests: account-resource forest</li> <li>Staging server</li> <li>Multiple Microsoft Entra tenants</li> <li>Each object only once in a Microsoft Entra tenant</li> </ol>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#microsoft-entra-connect-component-factors","title":"Microsoft Entra Connect component factors","text":"<ol> <li>Import - the process of reading information from each directory</li> <li>Export - updating the directories from the provisioning engine</li> <li>Sync - evaluates the rules of how the objects will flow inside the provisioning engine.</li> </ol> <p>Microsoft Entra Connect uses the following staging areas, rules, and processes to allow the sync from Active Directory to Microsoft Entra ID:</p> <ul> <li>Connector Space (CS)<ul> <li>Objects from each connected directory (CD), the actual directories, are staged here first before they can be processed by the provisioning engine.</li> <li>Microsoft Entra ID has its own CS and each forest you connect to will have its own CS.</li> </ul> </li> <li>Metaverse (MV)<ul> <li>Objects that need to be synced are created here based on the sync rules.</li> <li>Objects must exist in the MV before they can populate objects and attributes to the other connected directories</li> </ul> </li> <li>Sync rules<ul> <li>They decide which objects will be created (projected) or connected (joined) to objects in the MV</li> <li>The sync rules also decide which attribute values will be copied or transformed to and from the directories.</li> </ul> </li> <li>Run profiles<ul> <li>Bundles the process steps of copying objects and their attribute values according to the sync rules between the staging areas and connected directories.</li> </ul> </li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#microsoft-entra-cloud-sync","title":"Microsoft Entra cloud sync","text":"<ul> <li>designed to accomplish hybrid identity goals for synchronization of users, groups and contacts to Microsoft Entra ID</li> <li>synchronization is accomplished by using the\u00a0cloud provisioning agent\u00a0instead of the Microsoft Entra Connect application</li> <li>can be used alongside Microsoft Entra Connect sync</li> <li>provisioning from AD to Microsoft Entra ID is orchestrated in Microsoft Online Services</li> <li>An organization only needs to deploy, in their on-premises or IaaS-hosted environment, a light-weight agent that acts as a bridge between Microsoft Entra ID and AD.</li> <li>The provisioning configuration is stored and managed as part of the service. Reminder that the sync runs every 2 minutes.</li> </ul> <p>Benefits: - Support for synchronizing to a Microsoft Entra tenant from a multi-forest disconnected Active Directory forest environment - Simplified installation with light-weight provisioning agents: The agents act as a bridge from AD to Microsoft Entra ID, with all the sync configuration managed in the cloud. - Multiple provisioning agents can be used to simplify high availability deployments - Support for large groups with up to fifty-thousand members</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#implement-manage-phs","title":"Implement manage PHS","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#how-password-hash-synchronization-works","title":"How password hash synchronization works","text":"<p>Microsoft Entra Connect synchronizes a hash, of the hash, of a user's password from an on-premises Active Directory instance to a cloud-based Microsoft Entra instance</p> <ul> <li>ADDS stores passwords in the form of a hash value representation of the actual user password</li> <li>To synchronize your password, Microsoft Entra Connect sync extracts your password hash from the on-premises AD</li> <li>Extra security processing is applied to the password hash before it is synchronized to the Microsoft Entra authentication service.</li> <li>Passwords are synchronized on a per-user basis and in chronological order</li> <li>The password hash synchronization process runs every 2 minutes. You cannot modify the frequency of this process.</li> <li>When you synchronize a password, it overwrites the existing cloud password.</li> <li>The first time you enable the password hash synchronization feature, it performs an initial synchronization of the passwords of all in-scope users</li> <li>You cannot explicitly define a subset of user passwords that you want to synchronize during the first synchronization. </li> <li>Once the initial synchronization completes, you can set up a\u00a0selective password hash synch\u00a0for future synchronizations.</li> <li>If there are multiple connectors, it is possible to disable password hash sync for some connectors but not others.</li> <li>When you change an on-premises password, the updated password is synchronized, most often in a matter of minutes. </li> <li>The password hash synchronization feature automatically retries failed synchronization attempts. </li> <li>If an error occurs during an attempt to synchronize a password, an error is logged in your event viewer.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#enable-password-hash-synchronization","title":"Enable password hash synchronization","text":"<ul> <li>Express settings - PHS automatically enabled</li> <li>Custom settings -  PHS available on the user sign-in page (ss above)</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#implement-manage-pass-through-authentication-pta","title":"Implement manage pass-through authentication (PTA)","text":"<ul> <li>PTA signs users in by validating their passwords directly against on-premises Active Directory.</li> <li>PTA is a tenant level feature</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#enable-the-feature","title":"Enable the feature","text":"<p> - available in custom installation - At the\u00a0User sign-in\u00a0page, choose\u00a0Pass-through authentication\u00a0as the\u00a0Sign On method - If you have already installed Microsoft Entra Connect by using the express installation or the custom installation path, select the\u00a0Change user sign-in\u00a0task on Microsoft Entra Connect</p> <p></p> <p>On successful completion, a PTA agent is installed on the same server as Microsoft Entra Connect. In addition, the pass-through authentication feature is enabled on your tenant.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/04%20Implement%20and%20manage%20hybrid%20identity/#demo-pta-and-sso","title":"Demo PTA and SSO","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/","title":"05 Implement and manage federation","text":"<ul> <li>Federation is a collection of domains that have established trust. </li> <li>The level of trust varies, but typically includes authentication and almost always includes authorization.</li> <li>This sign-in method ensures that all user authentication occurs on-premises.</li> <li>Federation with AD FS and PingFederate is available.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#requirement-to-deploy-federation-with-ad-fs-and-microsoft-entra-connect","title":"Requirement to deploy federation with AD FS and Microsoft Entra Connect","text":"<ul> <li>Local administrator credentials on your federation servers.</li> <li>Local administrator credentials on any workgroup servers (not domain-joined) that you intend to deploy the Web Application Proxy role on.</li> <li>The machine that you run the wizard on to be able to connect to any other machines that you want to install AD FS or Web Application Proxy on by using Windows Remote Management.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#set-up-your-federation-using-microsoft-entra-connect-to-connect-to-an-ad-fs-farm","title":"Set up your federation using Microsoft Entra Connect to connect to an AD FS farm","text":"<p>Specify the AD FS servers - Specify the servers where you want to install AD FS - Before you set up this configuration, join all AD FS servers to Active Directory - This step isn't required for the Web Application Proxy servers.</p> <p>Specify the Web Application Proxy servers - The Web Application Proxy server is deployed in your perimeter network, facing the extranet - \u00a0It supports authentication requests from the extranet</p> <p>Specify the service account for the AD FS service - The AD FS service requires a domain service account to authenticate users and to look up user information in Active Directory. It can support two types of service accounts:     - Group managed service account     - Domain user account Select the Microsoft Entra domain that you want to federate - Use the Microsoft Entra domain page to set up the federation relationship between AD FS and Microsoft Entra ID</p> <p></p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#microsoft-entra-connect-tools-to-manage-your-federation","title":"Microsoft Entra Connect tools to manage your federation","text":"<ul> <li>Repair the trust</li> <li>Federate with Microsoft Entra ID using AlternateID</li> <li>Add a federated domain</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#device-writeback","title":"Device writeback","text":"<ul> <li>used to enable device-based conditional Access for ADFS-protected devices</li> <li>This conditional Access provides extra security and assurance that access to applications is granted only to trusted devices</li> <li>Device writeback enables this security by synchronizing all devices registered in Azure back to the on-premises Active Directory</li> <li>When configured during setup, the following operations are performed to prepare the AD forest:<ul> <li>If they do not exist already, create and configure new containers and objects under:\u00a0CN=Device Registration Configuration,CN=Services,CN=Configuration,[forest dn ].</li> <li>If they do not exist already, create and configure new containers and objects under:\u00a0CN=RegisteredDevices,[domain-dn]. Device objects will be created in this container.</li> <li>Set necessary permissions on the Microsoft Entra Connector account, to manage devices on your Active Directory.</li> </ul> </li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#trouble-shoot-synchronization-errors","title":"Trouble-shoot synchronization errors","text":"<p>3 types of operations to keep the directories in sync: 1. Import 2. Synchronization 3. Export</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#errors-during-export-to-microsoft-entra-id","title":"Errors during export to Microsoft Entra ID","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#invalidsoftmatch","title":"InvalidSoftMatch","text":"<ul> <li> <p>When Microsoft Entra Connect (sync engine) instructs directory to add or update objects, Microsoft Entra ID matches the incoming object using the\u00a0sourceAnchor\u00a0attribute to the\u00a0immutableId\u00a0attribute of objects in Microsoft Entra ID. This match is called a\u00a0Hard Match.</p> </li> <li> <p>When Microsoft Entra ID\u00a0does not find\u00a0any object that matches the\u00a0immutableId\u00a0attribute with the\u00a0sourceAnchor\u00a0attribute of the incoming object, before provisioning a new object, it falls back to use the ProxyAddresses and UserPrincipalName attributes to find a match. This match is called a\u00a0Soft Match.</p> </li> <li> <p>The Soft Match is designed to match objects already present in Microsoft Entra ID with the new objects being added/updated during synchronization that represent the same entity (users, groups) on-premises.</p> </li> <li> <p>InvalidSoftMatch\u00a0error occurs when the hard match does not find any matching object\u00a0AND\u00a0soft match finds a matching object but that object has a different value of\u00a0immutableId\u00a0than the incoming object's\u00a0SourceAnchor, suggesting that the matching object was synchronized with another object from on premises Active Directory.</p> </li> <li> <p>In other words, in order for the soft match to work, the object to be soft-matched with should not have any value for the\u00a0immutableId. If any object with\u00a0immutableId\u00a0set with a value is failing the hard-match but satisfying the soft-match criteria, the operation would result in an InvalidSoftMatch synchronization error.</p> </li> <li> <p>Microsoft Entra directory schema does not allow two or more objects to have the same value of the following attributes. (This is not an exhaustive list.)</p> <ul> <li>ProxyAddresses</li> <li>UserPrincipalName</li> <li>onPremisesSecurityIdentifier</li> <li>ObjectId</li> </ul> </li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#example-scenarios-for-invalidsoftmatch","title":"Example scenarios for InvalidSoftMatch","text":"<ul> <li>Two or more objects with the same value for the ProxyAddresses attribute exist in on-premises Active Directory. Only one is getting provisioned in Microsoft Entra ID.</li> <li> <p>Two or more objects with the same value for the userPrincipalName attribute exist in on-premises Active Directory. Only one is getting provisioned in Microsoft Entra ID.</p> </li> <li> <p>An object was added in the on premises Active Directory with the same value of ProxyAddresses attribute as that of an existing object in Microsoft Entra directory. The object added on premises is not getting provisioned in Microsoft Entra directory.</p> </li> <li> <p>A synced account was moved from Forest A to Forest B. Microsoft Entra Connect (sync engine) was using ObjectGUID attribute to compute the SourceAnchor. After the forest move, the value of the SourceAnchor is different. The new object (from Forest B) is failing to sync with the existing object in Microsoft Entra ID.</p> </li> <li> <p>Microsoft Entra Connect was uninstalled and reinstalled. During the reinstallation, a different attribute was chosen as the SourceAnchor. All the objects that had previously synced stopped syncing with InvalidSoftMatch error.</p> </li> <li> <p>Microsoft Entra Connect was uninstalled and reinstalled. During the reinstallation, a different attribute was chosen as the SourceAnchor. All the objects that had previously synced stopped syncing with InvalidSoftMatch error.</p> </li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#how-to-fix-invalidsoftmatch-error","title":"How to fix InvalidSoftMatch error","text":"<p>The most common reason for the InvalidSoftMatch error is two objects with different SourceAnchor (immutableId) have the same value for the ProxyAddresses and/or UserPrincipalName attributes, which are used during the soft-match process on Microsoft Entra ID. In order to fix the Invalid Soft-Match:</p> <ol> <li>Identify the duplicated proxyAddresses, userPrincipalName, or other attribute value that's causing the error. Also identify which two (or more) objects are involved in the conflict. The report generated by\u00a0Microsoft Entra Connect Health for sync\u00a0can help you identify the two objects.</li> <li>Identify which object should continue to have the duplicated value and which object should not.</li> <li>Remove the duplicated value from the object that should NOT have that value. </li> <li>You should make the change in the directory where the object is sourced from. </li> <li>In some cases, you may need to delete one of the objects in conflict.</li> </ol>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#objecttypemismatch","title":"ObjectTypeMismatch","text":"<ul> <li>When Microsoft Entra ID attempts to soft match two objects, it is possible that two objects of different \"object type\" (such as User, Group, Contact etc.) have the same values for the attributes used to perform the soft-match. As duplication of these attributes is not permitted in Microsoft Entra, the operation can result in \"ObjectTypeMismatch\" synchronization error.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#example-scenarios-for-objecttypemismatch-error","title":"Example scenarios for ObjectTypeMismatch error","text":"<ul> <li>A mail enabled security group is created in Microsoft 365. Admin adds a new user or contact in on premises AD (that's not synchronized to Microsoft Entra ID yet) with the same value for the ProxyAddresses attribute as that of the Microsoft 365 group.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#how-to-fix-objecttypemismatch-error","title":"How to fix ObjectTypeMismatch error","text":"<p>The most common reason for the ObjectTypeMismatch error is two objects of different type (User, Group, Contact etc.) have the same value for the ProxyAddresses attribute. In order to fix the ObjectTypeMismatch:</p> <ol> <li>Identify the duplicated proxyAddresses (or other attribute) value that's causing the error. Also identify which two (or more) objects are involved in the conflict. The report generated by\u00a0Microsoft Entra Connect Health for sync\u00a0can help you identify the two objects.</li> <li>Identify which object should continue to have the duplicated value and which object should not.</li> <li>Remove the duplicated value from the object that should NOT have that value. You should make the change in the directory where the object is sourced from. In some cases, you may need to delete one of the objects in conflict.</li> </ol>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#attributevaluemustbeunique","title":"AttributeValueMustBeUnique","text":"<p>Microsoft Entra schema does not allow two or more objects to have the same value of the following attributes. That is each object in Microsoft Entra ID is forced to have a unique value of these attributes at a given instance.</p> <ul> <li>ProxyAddresses</li> <li>UserPrincipalName</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#example-scenario-of-attributevaluemustbeunique","title":"Example scenario of AttributeValueMustBeUnique","text":"<p>Duplicate value is assigned to an already synced object, which conflicts with another synced object.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#how-to-fix-attributevaluemustbeunique-error","title":"How to fix AttributeValueMustBeUnique error","text":"<p>The most common reason for the AttributeValueMustBeUnique error is two objects with different SourceAnchor (immutableId) have the same value for the ProxyAddresses and/or UserPrincipalName attributes. In order to fix AttributeValueMustBeUnique error:</p> <ol> <li>Identify the duplicated proxyAddresses, userPrincipalName or other attribute value that's causing the error. Also identify which two (or more) objects are involved in the conflict. The report generated by\u00a0Microsoft Entra Connect Health for sync\u00a0can help you identify the two objects.</li> <li>Identify which object should continue to have the duplicated value and which object should not.</li> <li>Remove the duplicated value from the object that should NOT have that value. You should make the change in the directory where the object is sourced from. In some cases, you may need to delete one of the objects in conflict.</li> </ol>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#identitydatavalidationfailed","title":"IdentityDataValidationFailed","text":"<p>Microsoft Entra ID enforces various restrictions on the data itself before allowing that data to be written into the directory. These restrictions are to ensure that end users get the best possible experiences while using the applications that depend on this data.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#example-scenarios-of-identitydatavalidationfailed","title":"Example scenarios of IdentityDataValidationFailed","text":"<p>The UserPrincipalName attribute value has invalid/unsupported characters. The UserPrincipalName attribute does not follow the required format.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#how-to-fix-identitydatavalidationfailed-error","title":"How to fix IdentityDataValidationFailed error","text":"<p>Ensure that the userPrincipalName attribute has supported characters and required format.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#federateddomainchangeerror","title":"FederatedDomainChangeError","text":"<p>This case results in a\u00a0\"FederatedDomainChangeError\"\u00a0sync error when the suffix of a user's UserPrincipalName is changed from one federated domain to another federated domain.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#example-scenarios-of-federateddomainchangeerror","title":"Example scenarios of FederatedDomainChangeError","text":"<p>For a synchronized user, the UserPrincipalName suffix was changed from one federated domain to another federated domain on premises. For example,\u00a0UserPrincipalName = bob@contoso.com\u00a0was changed to\u00a0UserPrincipalName = bob@fabrikam.com.</p> <ol> <li>Bob Smith, an account for Contoso.com, gets added as a new user in Active Directory with the UserPrincipalName bob@contoso.com</li> <li>Bob moves to a different division of Contoso.com called Fabrikam.com and their UserPrincipalName is changed to bob@fabrikam.com</li> <li>Both contoso.com and fabrikam.com domains are federated domains with Microsoft Entra ID.</li> <li>Bob's userPrincipalName does not get updated and results in a \"FederatedDomainChangeError\" sync error.</li> </ol>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#largeobject","title":"LargeObject","text":"<p>When an attribute exceeds the allowed size limit, length limit or count limit set by Microsoft Entra schema, the synchronization operation results in the\u00a0LargeObject\u00a0or\u00a0ExceededAllowedLength\u00a0sync error. Typically this error occurs for the following attributes - userCertificate - userSMIMECertificate - thumbnailPhoto - proxyAddresses</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#possible-scenarios","title":"Possible scenarios","text":"<ol> <li>Bob's userCertificate attribute is storing too many certificates assigned to Bob. These may include older, expired certificates. The hard limit is 15 certificates.</li> <li>Bob's userSMIMECertificate attribute is storing too many certificates assigned to Bob. These may include older, expired certificates. The hard limit is 15 certificates.</li> <li>Bob's thumbnailPhoto set in Active Directory is too large to be synced in Microsoft Entra ID.</li> <li>During automatic population of the ProxyAddresses attribute in Active Directory, an object has too many ProxyAddresses assigned.</li> </ol>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#how-to-fix-largeobject","title":"How to fix LargeObject","text":"<p>Ensure that the attribute causing the error is within the allowed limitation.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#admin-role-conflict","title":"Admin role conflict","text":"<p>An\u00a0Existing Admin Role Conflict\u00a0will occur on a user object during synchronization when that user object has: - administrative permissions and - the same UserPrincipalName as an existing Microsoft Entra object</p> <p>Microsoft Entra Connect is not allowed to soft-match a user object from on-premises AD with a user object in Microsoft Entra ID that has an administrative role assigned to it.</p>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/05%20Implement%20and%20manage%20federation/#how-to-fix-existing-admin-role-conflict","title":"How to fix Existing Admin Role Conflict","text":"<ol> <li>Remove the Microsoft Entra account (owner) from all admin roles.</li> <li>Hard Delete\u00a0the Quarantined object in the cloud.</li> <li>The next sync cycle will take care of soft-matching the on-premises user to the cloud account (since the cloud user is now no longer a global GA).</li> <li>Restore the role memberships for the owner.</li> </ol>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/06%20Implement%20Microsoft%20Entra%20Connect%20Health/","title":"06 Implement Microsoft Entra Connect Health","text":"<ul> <li>Microsoft Entra Connect Health provides monitoring of your on-premises identity infrastructure</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/06%20Implement%20Microsoft%20Entra%20Connect%20Health/#requirements","title":"Requirements","text":"<ul> <li>Microsoft Entra ID Premium is installed.</li> <li>You're a global administrator in Microsoft Entra ID.</li> <li>The Microsoft Entra Connect Health agent is installed on each targeted server.</li> <li>The Azure service endpoints have outbound connectivity.</li> <li>Outbound connectivity is based on IP addresses.</li> <li>TLS inspection for outbound traffic is filtered or disabled.</li> <li> <p>Firewall ports on the server are running the agent.</p> <ul> <li> <p>The agent requires the following firewall ports to be open so that it can communicate with the Microsoft Entra Connect Health service endpoints:</p> <ul> <li>TCP port 443</li> <li>TCP port 5671<ul> <li>The latest version of the agent doesn't require port 5671. Upgrade to the latest version so that only port 443 is required.</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>PowerShell version 4.0 or newer is installed.</p> </li> <li>FIPS (Federal Information Processing Standard) is disabled.</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/06%20Implement%20Microsoft%20Entra%20Connect%20Health/#install-the-agent","title":"Install the agent","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/06%20Implement%20Microsoft%20Entra%20Connect%20Health/#install-the-agent-for-active-directory-federation-service","title":"Install the agent for Active Directory Federation Service","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/06%20Implement%20Microsoft%20Entra%20Connect%20Health/#note-your-active-directory-federation-server-ad-fs-server-should-be-different-from-your-sync-server-dont-install-the-ad-fs-agent-on-your-sync-server","title":"Note: Your Active Directory Federation Server (AD FS) server should be different from your Sync server. Don't install the AD FS agent on your Sync server.","text":"<p>To verify that the agent was installed, look for the following services on the server. If you completed the configuration, they should already be running. Otherwise, they're stopped until the configuration is complete.</p> <ul> <li>Microsoft Entra Connect Health AD FS Diagnostics Service</li> <li>Microsoft Entra Connect Health AD FS Insights Service</li> <li>Microsoft Entra Connect Health AD FS Monitoring Service</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/06%20Implement%20Microsoft%20Entra%20Connect%20Health/#install-the-agent-for-sync","title":"Install the agent for Sync","text":"<p>The Microsoft Entra Connect Health agent for Sync is installed automatically in the latest version of Microsoft Entra Connect.</p> <p>To verify the agent has been installed, look for the following services on the server. If you completed the configuration, the services should already be running. Otherwise, the services are stopped until the configuration is complete.</p> <ul> <li>Microsoft Entra Connect Health Sync Insights Service</li> <li>Microsoft Entra Connect Health Sync Monitoring Service</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/","title":"07 Manage Microsoft Entra Health","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/#enable-email-notifications","title":"Enable email notifications","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/#to-enable-microsoft-entra-connect-health-email-notifications","title":"To enable Microsoft Entra Connect Health email notifications","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/#delete-a-server-or-service-instance","title":"Delete a server or service instance","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/#delete-a-server-from-the-microsoft-entra-connect-health-service","title":"Delete a server from the Microsoft Entra Connect Health service","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/#delete-a-service-instance-from-microsoft-entra-connect-health-service","title":"Delete a service instance from Microsoft Entra Connect Health service","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/#manage-access-with-azure-role-based-access-control","title":"Manage access with Azure Role Based Access Control","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/#access-scope","title":"Access scope","text":"<ul> <li>All service instances</li> <li>Service instance</li> </ul>"},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/#allow-users-or-groups-access-to-microsoft-entra-connect-health","title":"Allow users or groups access to Microsoft Entra Connect Health","text":""},{"location":"SC-300/01%20Implement%20an%20identity%20management%20solution/Implement%20initial%20configuration%20of%20Microsoft%20Entra%20ID/07%20Manage%20Microsoft%20Entra%20Health/#diagnose-and-remediate-duplicated-attribute-sync-errors","title":"Diagnose and remediate duplicated attribute sync errors","text":""},{"location":"SC-300/02%20Plan%20and%20implement%20identity%20governance%20strategy/01%20Plan%20and%20implement%20entitlement%20management/","title":"01 Plan and implement entitlement management","text":""},{"location":"SC-300/02%20Plan%20and%20implement%20identity%20governance%20strategy/01%20Plan%20and%20implement%20entitlement%20management/#define-access-packages","title":"Define access packages","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/01%20MFA/What%20is%20Microsoft%20Entra%20multifactor%20authentication/","title":"What is Microsoft Entra multifactor authentication","text":"<p>Microsoft Entra ID features to help mitigate risk of unauthorized access: - Password complexity rules - Password expiration rules - Self-service password reset (SSPR) - Microsoft Entra ID Protection - Microsoft Entra password protection - Microsoft Entra smart lockout - Microsoft Entra application proxy - Single sign-on (SSO) - Microsoft Entra Connect</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/01%20MFA/What%20is%20Microsoft%20Entra%20multifactor%20authentication/#microsoft-entra-multifactor-authentication","title":"Microsoft Entra multifactor authentication","text":"<p>Supplies added security for your identities by requiring two or more elements for full authentication.</p> <ol> <li>Something you know</li> <li>Something you have</li> <li>Something you are</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/01%20MFA/What%20is%20Microsoft%20Entra%20multifactor%20authentication/#supported-authentication-methods","title":"Supported authentication methods","text":"<ol> <li>Mobile App Verification code</li> <li>Mobile app notification</li> <li>Call to a phone</li> <li>FIDO2 security key</li> <li>Windows Hello for Business</li> <li>OATH tokens</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/01%20MFA/What%20is%20Microsoft%20Entra%20multifactor%20authentication/#configure-multifactor-authentication-options","title":"Configure multifactor authentication options","text":"<p>Entra admin -&gt; Identity -&gt; Protection -&gt; Multifactor authentication -&gt; Configure (Additional cloud-based multifactor authentication settings)</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/01%20MFA/What%20is%20Microsoft%20Entra%20multifactor%20authentication/#configure-multifactor-authentication-methods","title":"Configure multifactor authentication methods","text":"Authentication method Services Password Microsoft Entra multifactor authentication and SSPR Security questions SSPR Email address SSPR Windows Hello for Business Microsoft Entra multifactor authentication and SSPR FIDO2 Security Key Microsoft Entra multifactor authentication and SSPR Microsoft Authenticator app Microsoft Entra multifactor authentication and SSPR OATH hardware token Microsoft Entra multifactor authentication and SSPR OATH software token Microsoft Entra multifactor authentication and SSPR Text message Microsoft Entra multifactor authentication and SSPR Voice call Microsoft Entra multifactor authentication and SSPR App passwords Microsoft Entra multifactor authentication in certain cases ## Monitoring adoption <p>Entra admin -&gt; Identity -&gt; Protection -&gt; Authentication methods -&gt; Activity</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/","title":"Manage user authentication","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#how-each-authentication-method-works","title":"How each authentication method works","text":"Method Primary authentication Secondary authentication Windows Hello for Business Yes MFA Microsoft Authenticator app Yes (preview) MFA and SSPR FIDO2 security key Yes MFA OATH hardware tokens (preview) No MFA and SSPR OATH software tokens No MFA and SSPR SMS Yes (preview) MFA and SSPR Voice call No MFA and SSPR Password Yes"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#what-is-fido2-fast-identity-online","title":"What is FIDO2 (Fast IDentity Online)","text":"<ul> <li>FIDO \u00a0is an open specification for passwordless authentication</li> <li>FIDO2 is the latest specification that incorporates the web authentication (WebAuthn) specification</li> <li>FIDO2 security keys are an unphishable specification-based passwordless authentication method that can come in any form factor</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#enable-fido2-security-key-method","title":"Enable FIDO2 security key method","text":"<p>Entra admin -&gt; Identity -&gt; Protection -&gt; Authentication methods -&gt; Policy</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#manage-user-registration-and-fido2-security-keys","title":"Manage user registration and FIDO2 security keys","text":"<p>go to aka.ms/mfasetup</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#explore-authenticator-app-and-oath-tokens","title":"Explore Authenticator app and OATH tokens","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#open-authentication-oath-tokens","title":"Open Authentication (OATH) tokens","text":"<ul> <li>OATH TOTP (Time-based One Time Password) is an open standard that specifies how one-time password (OTP) codes are generated</li> <li>Microsoft Entra ID doesn't support OATH HOTP (Hash based), a different code generation standard</li> <li>OATH TOTP can be implemented using either software or hardware to generate the codes</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#implement-an-authentication-solution-based-on-windows-hello-for-business","title":"Implement an authentication solution based on Windows Hello for Business","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#how-windows-hello-for-business-works-key-points","title":"How Windows Hello for Business works: key points","text":"<ul> <li>Windows Hello credentials are based on certificate or asymmetrical key pair</li> <li>Windows Hello credentials can be bound to the device, and the token that is obtained using the credential is also bound to the device.</li> <li>Identity provider (such as Active Directory, Microsoft Entra ID, or a Microsoft account) validates user identity and maps the Windows Hello public key to a user account during the registration step.</li> <li>Keys can be generated in hardware (TPM (Trusted Platform Module) 1.2 or 2.0 for enterprises, and TPM 2.0 for consumers) or software, based on the policy.</li> <li>Two-factor authentication is the combination of a key or certificate tied to a device and something that the person knows (a PIN) or something that the person is (biometrics)</li> <li>The Windows Hello gesture doesn't roam between devices and isn't shared with the server. Biometrics templates are stored locally on a device. The PIN is never stored or shared.</li> <li>The private key never leaves a device when using TPM. The authenticating server has a public key that is mapped to the user account during the registration process.</li> <li>PIN entry and biometric gesture both trigger Windows 10 to use the private key to cryptographically sign data that is sent to the identity provider. The identity provider verifies the user's identity and authenticates the user.</li> <li>Personal (Microsoft account) and corporate (Active Directory or Microsoft Entra ID) accounts use a single container for keys. All keys are separated by identity providers' domains to help ensure user privacy.</li> <li>Certificate private keys can be protected by the Windows Hello container and the Windows Hello gesture.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#creating-security-groups","title":"Creating security groups","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#note-if-your-environment-has-one-or-more-windows-server-2016-domain-controllers-in-the-domain-to-which-you-are-deploying-windows-hello-for-business-then-skip-the-create-the-keycredentials-admins-security-group-domains-that-include-windows-server-2016-domain-controllers-use-the-keyadmins-group-which-is-created-during-the-installation-of-the-first-windows-server-2016-domain-controller","title":"Note If your environment has one or more Windows Server 2016 domain controllers in the domain to which you are deploying Windows Hello for Business, then skip the Create the KeyCredentials Admins Security Group. Domains that include Windows Server 2016 domain controllers use the KeyAdmins group, which is created during the installation of the first Windows Server 2016 domain controller.","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#create-the-keycredential-admins-security-group","title":"Create the KeyCredential Admins security group","text":"<p>Microsoft Entra Connect synchronizes the public key on the user object created during provisioning. You assign write and read permission to this group to the Active Directory attribute. This will ensure the Microsoft Entra Connect service can add and remove keys as part of its normal workflow.</p> <ol> <li>Sign in a domain controller or management workstation with\u00a0Domain Admin\u00a0equivalent credentials.</li> <li>Open\u00a0Active Directory Users and Computers.</li> <li>Select\u00a0View\u00a0and select\u00a0Advance Features.</li> <li>Expand the domain node from the navigation pane.</li> <li>Right-select the\u00a0Users\u00a0container. Select\u00a0New. Select\u00a0Group.</li> <li>Type\u00a0KeyCredential Admins\u00a0in the\u00a0Group Name\u00a0text box.</li> <li>Select\u00a0OK.</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#create-the-windows-hello-for-business-users-security-group","title":"Create the Windows Hello for Business Users security group","text":"<p>The Windows Hello for Business Users group is used to make it easy to deploy Windows Hello for Business in phases. You assign Group Policy and Certificate template permissions to this group to simplify the deployment by adding the users to the group. This provides users with the proper permissions to configure Windows Hello for Business and to enroll in the Windows Hello for Business authentication certificate.</p> <ol> <li>Sign in a domain controller or management workstation with\u00a0Domain Admin\u00a0equivalent credentials.</li> <li>Open\u00a0Active Directory Users and Computers.</li> <li>Select\u00a0View\u00a0and select\u00a0Advanced Features.</li> <li>Expand the domain node from the navigation pane.</li> <li>Right-select the\u00a0Users\u00a0container. Select\u00a0New. Select\u00a0Group.</li> <li>Type\u00a0Windows Hello for Business Users\u00a0in the\u00a0Group Name\u00a0text box.</li> <li>Select\u00a0OK.</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#sspr","title":"SSPR","text":"<p>License required: </p> <ul> <li>Cloud based accounts<ul> <li>Microsoft Entra ID Premium P1 or P2 license or</li> <li>Microsoft 365 Business Standard</li> </ul> </li> <li>On-premises accounts<ul> <li>Microsoft Entra ID Premium P1 or P2 license</li> <li>Microsoft 365 Business Premium</li> </ul> </li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#enable-self-service-password-reset","title":"Enable self-service password reset","text":"<p>Entra admin -&gt; Identity -&gt; Protection -&gt; Password reset -&gt; Manage -&gt; Properties</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#register-for-self-service-password-reset","title":"Register for self-service password reset","text":"<p>go to aka.ms/ssprsetup</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#test-self-service-password-reset","title":"Test self-service password reset","text":"<p>go to aka.ms/sspr</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#deploy-and-manage-password-protection","title":"Deploy and manage password protection","text":"<p>Microsoft Entra Password Protection provides a global and custom banned password list</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#how-microsoft-entra-password-protection-works","title":"How Microsoft Entra Password Protection works","text":"<p>The on-premises Microsoft Entra Password Protection components work as follows:</p> <ol> <li>Each Microsoft Entra Password Protection proxy-service-instance advertises itself to the DCs in the forest by creating a\u00a0serviceConnectionPoint\u00a0object in Active Directory.</li> <li>Each DC Agent service for Microsoft Entra Password Protection also creates a\u00a0serviceConnectionPoint\u00a0object in Active Directory. This object is used primarily for reporting and diagnostics.</li> <li>The DC Agent service is responsible for initiating the download of a new password policy from Microsoft Entra. The first step is to locate a Microsoft Entra Password Protection proxy-service by querying the forest for proxy\u00a0serviceConnectionPoint\u00a0objects.</li> <li>When an available proxy service is found, the DC Agent sends a password policy download request to the proxy service. The proxy service in turn sends the request to Microsoft Entra, and then returns the response to the DC Agent service.</li> <li>After the DC Agent service receives a new password policy from Microsoft Entra, the service stores the policy in a dedicated folder at the root of its domain\u00a0sysvol\u00a0folder share. The DC Agent service also monitors this folder in case newer policies replicate in from other DC Agent services in the domain.</li> <li>The DC Agent service always requests a new policy at service startup. After the DC Agent service is started, it checks the age of the current locally available policy hourly. If the policy is older than one hour, the DC Agent requests a new policy from Microsoft Entra via the proxy service, as described previously. If the current policy isn't older than one hour, the DC Agent continues to use that policy.</li> <li>When password change events are received by a DC, the cached policy is used to determine if the new password is accepted or rejected.</li> </ol> <p></p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#note-microsoft-entra-password-protection-can-only-validate-passwords-during-password-change-or-set-operations-passwords-that-were-accepted-and-stored-in-active-directory-prior-to-the-deployment-of-microsoft-entra-password-protection-will-never-be-validated-and-will-continue-working-as-is-over-time-all-users-and-accounts-will-eventually-start-using-microsoft-entra-password-protection-validated-passwords-as-their-existing-passwords-expire-accounts-configured-with-password-never-expires-are-exempt-from-this","title":"Note Microsoft Entra Password Protection can only validate passwords during password change or set operations. Passwords that were accepted and stored in Active Directory prior to the deployment of Microsoft Entra Password Protection will never be validated and will continue working as is. Over time, all users and accounts will eventually start using Microsoft Entra Password Protection-validated passwords as their existing passwords expire. Accounts configured with \"password never expires\" are exempt from this.","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#multiple-forest-considerations","title":"Multiple forest considerations","text":"<ul> <li>no additional requirements to deploy Microsoft Entra Password Protection across multiple forests</li> <li>Each forest is independently configured</li> <li>Each Microsoft Entra Password Protection proxy can only support domain controllers from the forest that it's joined to.</li> <li>The Microsoft Entra Password Protection software in any forest is unaware of password protection software that's deployed in other forests, regardless of Active Directory trust configurations.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#read-only-domain-controller-considerations","title":"Read-only domain controller considerations","text":"<ul> <li>Password change or set events aren't processed and persisted on read-only domain controllers (RODCs)</li> <li>Instead, they're forwarded to writable domain controllers.</li> <li>You don't have to install the Microsoft Entra Password Protection DC agent software on RODCs.</li> <li>It's not supported to run the Microsoft Entra Password Protection proxy-service on a read-only domain controller.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#high-availability-considerations","title":"High availability considerations","text":"<ul> <li>Each Microsoft Entra Password Protection DC agent uses a simple round-robin-style algorithm when deciding which proxy server to call. The agent skips proxy servers that aren't responding.</li> <li>For most fully connected Active Directory deployments that have healthy replication of both directory and sysvol folder state, two Microsoft Entra Password Protection proxy servers is enough to ensure availability</li> <li>The design of the Microsoft Entra Password Protection DC agent software mitigates the usual problems that are associated with high availability. The Microsoft Entra Password Protection DC agent maintains a local cache of the most recently downloaded password policy. Even if all registered proxy servers become unavailable, the Microsoft Entra Password Protection DC agents continue to enforce their cached password policy.</li> <li>A reasonable update frequency for password policies in a large deployment is usually days, not hours or less. So, brief outages of the proxy servers don't cause problems for Microsoft Entra Password Protection.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#deployment-requirements","title":"Deployment requirements","text":"Users Microsoft Entra Password Protection with global banned password list Microsoft Entra Password Protection with custom banned password list Cloud-only users Microsoft Entra Free Microsoft Entra Premium P1 or P2 Users synchronized from on-premises AD DS Microsoft Entra Premium P1 or P2 Microsoft Entra Premium P1 or P2 - You need an account that has Active Directory domain administrator privileges in the forest root domain to register the Windows Server Active Directory forest with Microsoft Entra. - The Key Distribution Service must be enabled on all domain controllers in the domain that run Windows Server 2012. By default, this service is enabled via manual trigger start. - Network connectivity must exist between at least one domain controller in each domain and at least one server that hosts the proxy service for Microsoft Entra Password Protection. This connectivity must allow the domain controller to access RPC endpoint mapper port 135 and the RPC server port on the proxy service. <pre><code>- By default, the RPC server port is a dynamic RPC port, but it can be configured to use a static port.\n</code></pre> <ul> <li>All machines where the Microsoft Entra Password Protection proxy-service will be installed must have network access to the following endpoints:</li> </ul> Endpoint Purpose <code>https://login.microsoftonline.com</code> Authentication requests <code>https://enterpriseregistration.windows.net</code> Microsoft Entra Password Protection functionality"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#microsoft-entra-password-protection-dc-agent-requirements","title":"Microsoft Entra Password Protection DC agent requirements","text":"<ul> <li>All machines where the Microsoft Entra Password Protection DC agent software will be installed must run Windows Server 2012 or later.</li> <li>All machines that run the Microsoft Entra Password Protection DC agent must have .NET 4.5 installed.</li> <li>Any Active Directory domain that runs the Microsoft Entra Password Protection DC agent service must use Distributed File System Replication (DFSR) for sysvol replication.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#microsoft-entra-password-protection-proxy-service-requirements","title":"Microsoft Entra Password Protection proxy service requirements","text":"<ul> <li>All machines where the Microsoft Entra Password Protection proxy-service will be installed must run Windows Server 2012 R2 or later.</li> <li>All machines where the Microsoft Entra Password Protection proxy-service will be installed must have .NET 4.7 installed.</li> <li>All machines that host the Microsoft Entra Password Protection proxy-service must be configured to grant domain controllers the ability to sign into the proxy service. This ability is controlled via the \"Access this computer from the network\" privilege assignment.</li> <li>All machines that host the Microsoft Entra Password Protection proxy-service must be configured to allow outbound TLS 1.2 HTTP traffic.</li> <li>A\u00a0Global Administrator\u00a0or\u00a0Security Administrator\u00a0account is required to register the Microsoft Entra Password Protection proxy-service and forest with Microsoft Entra.</li> <li>Network access must be enabled for the set of ports and URLs specified in the Application Proxy environment setup procedures.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#warning-you-should-never-install-microsoft-entra-password-protection-proxy-and-application-proxy-on-the-same-machine","title":"WARNING You should never install Microsoft Entra Password Protection Proxy and Application Proxy on the same machine","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#download-required-software","title":"Download required software","text":"<ul> <li>Microsoft Entra Password Protection DC agent (AzureADPasswordProtectionDCAgentSetup.msi)</li> <li>Microsoft Entra Password Protection proxy (AzureADPasswordProtectionProxySetup.exe)</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#install-and-configure-the-proxy-service","title":"Install and configure the proxy service","text":"<p>The Microsoft Entra Password Protection proxy-service is typically on a member server in your on-premises AD DS environment. Once installed, the Microsoft Entra Password Protection proxy-service communicates with Microsoft Entra to maintain a copy of the global and customer banned password lists for your Microsoft Entra tenant.</p> <p>The software installation, or uninstallation, requires a restart. This requirement is because password filter DLLs are only loaded or unloaded by a restart.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#configure-smart-lockout-thresholds","title":"Configure smart lockout thresholds","text":"<ul> <li>By default, smart lockout locks the account from sign-in attempts for one minute after 10 failed attempts.</li> <li>The account locks again after each subsequent failed sign-in attempt, for one minute at first and then longer in subsequent attempts</li> <li>Smart lockout tracks the last three bad-password hashes to avoid incrementing the lockout counter for the same password. If someone enters the same bad password multiple times, this behavior won't cause the account to lock out.</li> <li>Smart lockout is always on, for all Microsoft Entra ID customers</li> <li>Entra ID P1 or higher is required for customization</li> </ul> <p>The following considerations apply: * Each Microsoft Entra data center tracks lockouts independently * Smart lockout uses\u00a0familiar location\u00a0versus\u00a0unfamiliar location\u00a0to differentiate between a bad actor and the genuine user.  * Unfamiliar and familiar locations both have separate lockout counters.</p> <p>When the admin configures pass-through authentication, the following considerations apply:</p> <ul> <li>The Microsoft Entra lockout threshold is less than the AD DS account lockout threshold. Set the values so that the AD DS account lockout threshold is at least two or three times greater than the Microsoft Entra lockout threshold.</li> <li>The Microsoft Entra lockout duration must be set longer than the AD DS account lockout duration. The duration is set in seconds, while the AD duration is set in minutes.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#implement-kerberos-and-certificate-based-authentication-in-microsoft-entra-id","title":"Implement Kerberos and certificate-based authentication in Microsoft Entra ID","text":"<ul> <li>You can provide single sign-on for on-premises applications published through Application Proxy</li> <li>Application Proxy uses Kerberos Constrained Delegation (KCD) to support these applications.</li> <li>The apps are secured with integrated Windows authentication.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#kerberos-authentication-process-flow","title":"Kerberos authentication process flow","text":"<p> 1. The user enters the URL to access the on premises application through Application Proxy. 2. Application Proxy redirects the request to Microsoft Entra authentication services to preauthenticate. At this point, Microsoft Entra ID applies any applicable authentication and authorization policies, such as multifactor authentication. If the user is validated, Microsoft Entra ID creates a token and sends it to the user. 3. The user passes the token to Application Proxy. 4. Application Proxy validates the token and retrieves the User Principal Name (UPN) from it, and then the Connector pulls the UPN, and the Service Principal Name (SPN) through a dually authenticated secure channel. 5. The Connector performs Kerberos Constrained Delegation (KCD) negotiation with the on premises AD, impersonating the user to get a Kerberos token to the application. 6. Active Directory sends the Kerberos token for the application to the Connector. 7. The Connector sends the original request to the application server, using the Kerberos token it received from AD. 8. The application sends the response to the Connector, which is then returned to the Application Proxy service and finally to the user.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/02%20Manage%20user%20authentication/Manage%20user%20authentication/#configure-microsoft-entra-user-authentication-for-virtual-machines","title":"Configure Microsoft Entra user authentication for virtual machines","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/","title":"Conditional Access","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#access-token-issuance","title":"Access token issuance","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#note-if-no-assignment-is-required-and-no-ca-policy-is-in-effect-the-default-behavior-is-to-issue-an-access-token","title":"Note If no assignment is required, and no CA policy is in effect, the default behavior is to issue an access token.","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#license-requirements","title":"License requirements","text":"<ul> <li>Free Microsoft Entra ID - No Conditional Access</li> <li>Free Office 365 subscription - No Conditional Access</li> <li>Microsoft Entra ID Premium 1 (or Microsoft 365 E3 and up) - Conditional access work based on standard rules</li> <li>Microsoft Entra ID Premium 2 - Conditional Access, and you get the ability to use Risky sign-in, Risky Users, and risk-based sign-in options as well (from Identity Protection)</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#sign-in-risk-based-conditional-access","title":"Sign-in risk-based Conditional Access","text":"<ul> <li>A sign-in risk represents the probability that a given authentication request isn't authorized by the identity owner.</li> <li>assigned either through Conditional Access itself or through Microsoft Entra Identity Protection</li> <li>Requires Entra ID Premium P2 license</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#user-risk-based-conditional-access","title":"User risk-based Conditional Access","text":"<ul> <li>detects leaked username and password pairs</li> <li>assigned either through Conditional Access itself or through Microsoft Entra Identity Protection</li> <li>Requires Entra ID Premium P2 license</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#create-a-policy-to-require-registration-from-a-trusted-location","title":"Create a policy to require registration from a trusted location","text":"<ol> <li>Under\u00a0Cloud apps or actions, select\u00a0User actions, check\u00a0Register security information.</li> <li>Under\u00a0Conditions, select\u00a0Locations.<ol> <li>Configure\u00a0Yes.</li> <li>Include\u00a0Any location.</li> <li>Exclude\u00a0All trusted locations.</li> <li>Select\u00a0Done\u00a0on the\u00a0Locations\u00a0screen.</li> <li>Select\u00a0Done\u00a0on the\u00a0Conditions\u00a0screen.</li> </ol> </li> <li>Under\u00a0Conditions, in\u00a0Client apps (Preview), set\u00a0Configure\u00a0to\u00a0Yes, and select\u00a0Done.</li> <li> <p>Under\u00a0Access controls, select\u00a0Grant.</p> <ol> <li>Select\u00a0Block access.</li> <li>Then use the\u00a0Select\u00a0option.</li> </ol> </li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#block-access-by-location","title":"Block access by location","text":"<p>The location condition is commonly used to block access from countries/regions where your organization knows traffic should not come from.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#require-compliant-devices","title":"Require compliant devices","text":"<p>Organizations that have deployed Microsoft Intune can use the information returned from their devices to identify devices that meet compliance requirements, such as:</p> <ul> <li>Requiring a PIN to unlock.</li> <li>Requiring device encryption.</li> <li>Requiring a minimum or maximum operating system version.</li> <li>Requiring a device is not jailbroken or rooted.</li> </ul> <p>This policy compliance information is forwarded to Microsoft Entra ID where Conditional Access can make decisions to grant or block access to resources.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#note-you-can-enroll-your-new-devices-to-intune-even-if-you-select-require-device-to-be-marked-as-compliant-for-all-users-and-all-cloud-apps-using-the-steps-above-require-device-to-be-marked-as-compliant-control-does-not-block-intune-enrollment","title":"note You can enroll your new devices to Intune even if you select Require device to be marked as compliant for All users and All cloud apps using the steps above. Require device to be marked as compliant control does not block Intune enrollment.","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#conditional-access-app-control","title":"Conditional Access App Control","text":"<ul> <li>Conditional Access App Control enables user app access and sessions to be monitored and controlled in real time based on access and session policies.</li> <li>Access and session policies are used within the Microsoft Defender for Cloud Apps portal to further refine filters and set actions to be taken on a user.</li> <li>uses a reverse proxy architecture</li> <li>After you\u2019ve determined the conditions, you can route users to Microsoft Defender for Cloud Apps where you can protect data with Conditional Access App Control by applying access and session controls.</li> </ul> <p>Access and session policies: * Prevent data exfiltration * Protect on download * Prevent upload of unlabeled files * Monitor user sessions for compliance * Block access * Block custom activities</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#how-to-require-app-protection-policy-and-an-approved-client-app-for-cloud-app-access-with-conditional-access","title":"How to: Require app protection policy and an approved client app for cloud app access with Conditional Access","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#note-in-order-to-require-approved-client-apps-for-ios-and-android-devices-these-devices-must-first-register-in-microsoft-entra-id","title":"note In order to require approved client apps for iOS and Android devices, these devices must first register in Microsoft Entra ID.","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#scenario-1-microsoft-365-apps-require-an-approved-client-app","title":"Scenario 1: Microsoft 365 apps require an approved client app","text":"<p>Step 1: Policy for Android and iOS based modern authentication clients requiring the use of an approved client application when accessing Exchange Online.</p> <ul> <li> <p>Under\u00a0Conditions, select\u00a0Device platforms.</p> <ul> <li>Set\u00a0Configure\u00a0to\u00a0Yes.</li> <li>Include\u00a0Android\u00a0and\u00a0iOS.</li> </ul> </li> <li> <p>Under\u00a0Conditions, select\u00a0Client apps (preview).</p> <ul> <li>Set\u00a0Configure\u00a0to\u00a0Yes.</li> <li>Select\u00a0Mobile apps and desktop clients\u00a0and\u00a0Modern authentication clients \u00a0and\u00a0Exchange ActiveSync clients.</li> </ul> </li> <li> <p>Under\u00a0Access controls, then\u00a0Grant, select\u00a0Grant access,\u00a0Require approved client app, and select\u00a0Select</p> </li> </ul> <p>Step 2: Configure Intune app protection policy for iOS and Android client applications.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#scenario-2-exchange-online-and-sharepoint-online-require-an-approved-client-app","title":"Scenario 2: Exchange Online and SharePoint Online require an approved client app","text":"<p>Step 1: Policy for Android and iOS based modern authentication clients requiring the use of an approved client application when accessing Exchange Online and SharePoint Online.</p> <ol> <li> <p>Under\u00a0Cloud apps or actions, then\u00a0Include, select\u00a0Office 365 Exchange Online\u00a0and\u00a0Office 365 SharePoint Online.</p> </li> <li> <p>Under\u00a0Conditions, select\u00a0Device platforms.</p> <ol> <li>Set\u00a0Configure\u00a0to\u00a0Yes.</li> <li>Include\u00a0Android\u00a0and\u00a0iOS.</li> </ol> </li> <li> <p>Under\u00a0Conditions, select\u00a0Client apps (preview).</p> <ol> <li>Set\u00a0Configure\u00a0to\u00a0Yes.</li> <li>Select\u00a0Mobile apps and desktop clients\u00a0and\u00a0Modern authentication clients and Exchange ActiveSync clients.</li> </ol> </li> <li> <p>Under\u00a0Access controls, then\u00a0Grant, select\u00a0Grant access,\u00a0Require approved client app, and select\u00a0Select</p> </li> </ol> <p>Step 2: Configure Intune app protection policy for iOS and Android client applications.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#app-protection-policies-overview","title":"App protection policies overview","text":"<ul> <li>App protection policies (APP) are rules that ensure an organization's data remains safe or contained in a managed app.</li> <li> <p>A managed app has app protection policies applied to it, and it can be managed by Intune.</p> </li> <li> <p>Mobile Application Management (MAM) app protection policies allow you to manage and protect your organization's data within an application.</p> </li> <li> <p>You can use Intune app protection policies\u00a0independent of any mobile-device management (MDM) solution. This independence helps you protect your company's data with or without enrolling devices in a device management solution. By implementing\u00a0app-level policies, you can restrict access to company resources and keep data within the purview of your IT department.</p> </li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#mdm-vs-mam","title":"MDM vs. MAM","text":"<ul> <li> <p>MDM (Mobile Device Management):\u00a0Focuses on managing devices. It involves enrolling a device into a management solution, enabling IT admins to control the entire device, including enforcing policies like requiring device encryption, pushing device-wide updates, or remotely wiping data.</p> </li> <li> <p>MAM (Mobile Application Management):\u00a0Focuses on managing apps and the data within those apps, without requiring full control of the device. MAM applies policies to specific apps (e.g., preventing copy-paste or requiring a PIN to access a managed app), which is especially useful in BYOD (Bring Your Own Device) scenarios where users don\u2019t want their entire device controlled by IT.</p> </li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#app-on-devices","title":"APP on devices","text":"<p>APP can be configured for apps that run on devices that are:</p> <ul> <li>Enrolled in Microsoft Intune:</li> <li>Enrolled in a third-party MDM solution</li> <li>Not enrolled in any mobile device management solution</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#benefits-of-using-app","title":"Benefits of using APP","text":"<ul> <li>Protecting your company data at the app level</li> <li>End-user productivity isn't affected and policies don't apply when using the app in a personal context</li> <li>APP ensure that the app-layer protections are in place</li> <li>MDM, in addition to MAM, ensures that the device is protected</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#implement-session-management","title":"Implement session management","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#user-sign-in-frequency","title":"User sign-in frequency","text":"<ul> <li>default configuration for user sign-in frequency is a rolling window of 90 days.</li> <li>The sign-in frequency setting works with apps that have implemented OAUTH2 or OIDC protocols</li> <li>The sign-in frequency setting works with SAML applications as well, as long as they don't drop their own cookies and are redirected back to Microsoft Entra ID for authentication on a regular basis.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#user-sign-in-frequency-and-device-identities","title":"User sign-in frequency and device identities","text":"<ul> <li>If you have Microsoft Entra joined, hybrid Microsoft Entra joined, or Microsoft Entra registered devices, when a user unlocks their device or signs in interactively, this event will satisfy the sign-in frequency policy as well</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#implement-continuous-access-evaluation-cae","title":"Implement continuous access evaluation (CAE)","text":"<p>Continuous Access Evaluation (CAE) is a mechanism that enables real-time communication between a token issuer and a relying application to ensure timely enforcement of policy changes. It allows the application to detect changes in user properties, such as network location, and enables the token issuer to revoke or stop recognizing tokens due to security issues, account compromise, or other policy concerns.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/03%20Conditional%20Access/Conditional%20Access/#evaluation-and-revocation-process-flow","title":"Evaluation and revocation process flow","text":"<ol> <li>A continuous access evaluation (CAE)-capable client presents credentials or a refresh token to Microsoft Entra ID asking for an access token for some resource.</li> <li>An access token is returned along with other artifacts to the client.</li> <li>An Administrator explicitly revokes all refresh tokens for the user. A revocation event will be sent to the resource provider from Microsoft Entra ID.</li> <li>An access token is presented to the resource provider. The resource provider evaluates the validity of the token and checks whether there's any revocation event for the user. The resource provider uses this information to decide to grant access to the resource or not.</li> <li>In the case of the diagram, the resource provider denies access, and sends a 401+ claim challenge back to the client.</li> <li>The CAE-capable client understands the 401+ claim challenge. It bypasses the caches and goes back to step 1, sending its refresh token along with the claim challenge back to Microsoft Entra ID. Microsoft Entra ID will then reevaluate all the conditions and prompt the user to reauthenticate in this case.</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/","title":"Identity Protection","text":"<p>requires a Microsoft Entra ID Premium P2 license</p> Risk detection type Description Anonymous IP address Sign in from an anonymous IP address (for example: Tor browser, anonymizer VPNs). Atypical travel Sign in from an atypical location based on the user's recent sign ins. Malware-linked IP address Sign in from a malware-linked IP address. Unfamiliar sign in properties Sign in with properties we've not seen recently for the given user. Leaked credentials Indicates that the user's valid credentials have been leaked. Password spray Indicates that multiple usernames are being attacked using common passwords in a unified brute-force manner. Microsoft Entra threat intelligence Microsoft's internal and external threat intelligence sources have identified a known attack pattern. New country This detection is discovered by Microsoft Defender for Cloud Apps (MDCA). Activity from anonymous IP address This detection is discovered by MDCA. Suspicious inbox forwarding This detection is discovered by MDCA."},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#license-requirements","title":"License requirements","text":"Capability Details Microsoft Entra ID Free / Microsoft 365 Apps Microsoft Entra ID Premium P1 Microsoft Entra ID Premium P2 Risk policies User risk policy (via Identity Protection) No No Yes Risk policies Sign-in risk policy (via Identity Protection or Conditional Access) No No Yes Security reports Overview No No Yes Security reports Risky users Limited information. Only users with medium and high risk are shown. No details drawer or risk history. Limited information. Only users with medium and high risk are shown. No details drawer or risk history. Full access Security reports Risky sign ins Limited information. No risk detail or risk level is shown. Limited information. No risk detail or risk level is shown. Full access Security reports Risk detections No Limited information. No details drawer. Full access Notifications Users at risk detected alerts No No Yes Notifications Weekly digest No No Yes MFA registration policy No No Yes <p>There are two risk policies that can be enabled in the directory:</p> <ul> <li>Sign-in risk policy<ul> <li>remediation: Require MFA</li> </ul> </li> <li>User risk policy<ul> <li>remediation: Require password change</li> </ul> </li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#monitor-investigate-and-remediate-elevated-risky-users","title":"Monitor, investigate, and remediate elevated risky users","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#investigate-risk","title":"Investigate risk","text":"<p>report types of identity risk: - risky users - risky sign-ins  - risk detections - risky workload identities</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#remediate-risks","title":"Remediate risks","text":"<ul> <li>All active risk detections contribute to the calculation of a value called\u00a0user risk level.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#remediate-options","title":"Remediate options:","text":"<ul> <li>Self-remediation with risk policy</li> <li>Manual password reset</li> <li>Dismiss user risk</li> <li>Close individual risk detections manually</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#unblocking-users","title":"Unblocking users","text":"Unblocking based on user risk Unblocking based on sign-in risk Reset password Dismiss user risk Exclude the user from policy Exclude the user from policy Disable policy Disable policy Sign in from a familiar location or device ## Use the Microsoft Graph API <p>three APIs that expose information about risky users and sign-ins:</p> <ul> <li>riskDetection</li> <li>riskyUsers</li> <li>signIn</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#implement-security-for-workload-identities","title":"Implement security for workload identities","text":"<ul> <li>A workload identity is an identity that allows an application or service principal access to resources, sometimes in the context of a user ^66fe2a</li> </ul> <p>These workload identities differ from traditional user accounts as they:</p> <ul> <li>Can\u2019t perform multifactor authentication.</li> <li>Often have no formal lifecycle process.</li> <li>Need to store their credentials or secrets somewhere.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#requirements-to-use-workload-identity-protection","title":"Requirements to use workload identity protection","text":"<ul> <li>Microsoft Entra ID Premium P2 licensing</li> <li> <p>Logged in user must be assigned either:</p> <ul> <li>Global administrator</li> <li>Security administrator</li> <li>Security operator</li> <li>Security reader</li> </ul> </li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#what-types-of-risks-are-detected","title":"What types of risks are detected?","text":"<ul> <li>Microsoft Entra threat intelligence</li> <li>Suspicious Sign-ins</li> <li>Unusual addition of credentials to an OAuth app</li> <li>Admin confirmed account compromised</li> <li>Leaked Credentials (public preview)</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#explore-microsoft-defender-for-identity","title":"Explore Microsoft Defender for Identity","text":"<p>- uses your on-premises Active Directory signals to identify, detect, and investigate advanced threats, compromised identities, and malicious insider actions directed at your organization</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/04%20Identity%20Protection/Identity%20Protection/#process-flow-for-defender-for-identity","title":"Process flow for Defender for Identity","text":"<p>Components of MDI: - Defender for Identity portal - Defender for Identity sensor - Defender for Identity cloud service</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/","title":"Assign Azure roles","text":"<p>Azure role-based access control (Azure RBAC) is the authorization system you use to manage access to Azure resources.</p> <p>Primary steps to follow when assigning an Azure role:</p> <ul> <li>Who needs access?<ul> <li>user</li> <li>group</li> <li>service principal</li> <li>managed identity</li> </ul> </li> <li>Select the right role.     Built-in Azure roles:<ul> <li>Owner</li> <li>Contributor</li> <li>Reader</li> <li>User Access Administrator</li> <li>Other task specific roles, like Virtual Machine Contributor, can be assigned</li> </ul> </li> <li>Identify what level to assign the role (the Scope)<ul> <li>management group</li> <li>subscription</li> <li>resource group</li> <li>resources</li> </ul> </li> <li>Confirm the currently logged in user has the rights need to assign the Azure role.</li> <li>Assign the role</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#create-and-configure-managed-identities","title":"Create and configure managed identities","text":"<ul> <li>Managed identities provide an automatically managed identity in Microsoft Entra ID for applications to use when connecting to resources.</li> <li>Applications can use managed identities to obtain Microsoft Entra tokens without having to manage any credentials.</li> <li>Always remember that managed identities are assigned to an application. So, you need to configure and manage the identity within the services they're being used.</li> <li>You only assign the minimum privileges that the managed identity needs.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#benefits-of-using-managed-identities","title":"Benefits of using managed identities","text":"<ul> <li>You don't need to manage credentials. Credentials aren\u2019t even accessible to you.</li> <li>You can use managed identities to authenticate to any resource that supports Microsoft Entra authentication, including your own applications. </li> <li>Managed identities can be used without any extra cost.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#types-of-managed-identity","title":"Types of managed identity","text":"<ul> <li>System-assigned<ul> <li>an identity is created in Microsoft Entra ID</li> <li>The identity is tied to the lifecycle of that service instance</li> </ul> </li> <li>User-assigned<ul> <li>the identity is managed separately from the resources that use it.</li> </ul> </li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#managed-identity-in-azure-portal-for-an-app-service","title":"Managed identity in Azure portal for an App Service","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#-","title":"---","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#access-azure-resources-with-managed-identities","title":"Access Azure resources with managed identities","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#add-access-to-other-resources","title":"Add access to other resources","text":"<p>After you've enabled managed identity on an Azure resource, you might need to grant access to more resource.</p> <ul> <li>Navigate to the desired resource on which you want to modify access control.</li> <li>Select Access control (IAM).</li> <li>Select Add &gt; Add role assignment to open the Add role assignment page.</li> <li>Pick the Owner, Contributor, or Reader based on the least privilege rules for your applications needs.</li> <li>Select the managed identity you want assigned.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#analyze-azure-role-permissions","title":"Analyze Azure role permissions","text":"<p>There are two primary places where permission can be assigned: - at a user or - group level. </p> <p>However, they all pass down to the user at the final point.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#configure-azure-key-vault-rbac-policies","title":"Configure Azure Key Vault RBAC policies","text":"<p>You can grant access to Azure Key Vault using either: - role-based access control (RBAC) - Key Vault access policies</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#assign-a-key-vault-access-policy","title":"Assign a Key Vault access policy","text":"<ul> <li>A Key Vault access policy determines whether a user, application, or group, can perform operations on Key Vault secrets, keys, and certificates.</li> <li> <p>max of \u00a01024 access policy entries</p> </li> <li> <p>Open\u00a0Key Vault\u00a0in the Azure portal.</p> </li> <li>Select your key vault or create a new one.</li> <li>From the menu select\u00a0Access policies, then select\u00a0+ Add Access Policy.</li> <li>Use the dialog to assign the specific permission you want service principal to have.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#assign-a-key-vault-access-using-role-based-access-control-rbac","title":"Assign a Key Vault access using Role-based access control (RBAC)","text":"<ol> <li> <p>Enable role-based access control in your key vault. </p> </li> <li> <p>Open key vault\u00a0Identity and Access (IAM)\u00a0from the menu </p> </li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#retrieve-objects-from-azure-key-vault","title":"Retrieve objects from Azure Key Vault","text":"<p>Open your key vault, then open the secret you created. Select the\u00a0Show secret value\u00a0button. </p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#explore-microsoft-entra-permissions-management","title":"Explore Microsoft Entra Permissions Management","text":"<ul> <li>Microsoft Entra Permissions Management is a cloud infrastructure entitlement management (CIEM) solution</li> <li>The software detects, automatically right-sizes, and continuously monitors unused and excessive permissions.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/05%20Access%20Management%20for%20Azure%20Resources/Access%20Management%20for%20Azure%20Resources/#key-use-cases-for-microsoft-entra-permissions-management","title":"Key use cases for Microsoft Entra Permissions Management","text":"<p>Discover  Remediate Monitor</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/","title":"Global Secure Access","text":"<p>Security Service Edge (SSE) - identity-aware perimeter</p> <p>The Microsoft SSE solution includes (Global Secure Access): - Microsoft Entra Internet Access - Microsoft Entra Private Access</p> <p>Licensing:</p> <ul> <li>Microsoft Entra P1 or P2 license.</li> <li>Microsoft Entra Internet Access license and / or </li> <li>Microsoft Entra Private Access license.</li> </ul> <p>Roles:</p> <ul> <li>Global Secure Access Administrator role assigned to at least one administrator.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#explore-global-secure-access","title":"Explore Global Secure Access","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#microsoft-entra-internet-access","title":"Microsoft Entra Internet Access","text":"<ul> <li>secures access to Microsoft services, SaaS, and public internet apps through Secure Web Gateway (SWG)</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#key-features","title":"Key features","text":"<ul> <li>Prevent stolen tokens replays with the compliant network check-in Conditional Access.</li> <li>Apply universal tenant restrictions to prevent data exfiltration.</li> <li>Enriched logs with network and device signals.</li> <li>Improve the precision of risk assessments on users, locations, and devices.</li> <li>Acquire network traffic from the desktop client or from a remote network.</li> <li>Dedicated public internet traffic forwarding profile.</li> <li>Protect user access to the public internet while using Microsoft secure web gateway.</li> <li>Regulate access to websites based on their content categories and domain names.</li> <li>Apply universal Conditional Access policies for all internet destinations.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#microsoft-entra-private-access","title":"Microsoft Entra Private Access","text":"<ul> <li>secure access to your private, corporate resources</li> <li>builds on the capabilities of Microsoft Entra application proxy and extends access to any private resource, port, and protocol.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#key-features_1","title":"Key features","text":"<ul> <li>Zero Trust based access to a range of IP addresses and/or Fully Qualified Domain Names (FQDNs) without requiring a legacy VPN.</li> <li>Modernize legacy app authentication with Conditional Access.</li> <li>Provide a seamless end-user experience by deploying side-by-side with your existing non-Microsoft SSE solutions.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#-","title":"----","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#deploy-and-configure-microsoft-entra-internet-access","title":"Deploy and configure Microsoft Entra Internet Access","text":"Steps Description 1. Enable the Microsoft traffic forwarding profile. With the Microsoft profile enabled, Microsoft Entra Internet Access acquires the traffic going to Microsoft services, like Exchange Online and SharePoint Online. 2. Install the Global Secure Access Client on end-user devices. Download and install the client app to capture and control access from the client. 3. Enable tenant restrictions. Configure which tenants / organizations are allowed to blocked 4. Enable enhanced Global Secure Access signaling and Conditional Access. Use Conditional Access and Global Secure Access to prevent attacks."},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#step-1","title":"Step 1:","text":"<p>Enable the Microsoft traffic forwarding profile.</p> <ol> <li>Sign in to the Microsoft Entra admin center as a Global Secure Access Administrator.</li> <li>Browse to Global Secure Access &gt; Connect &gt; Traffic forwarding.</li> <li>Enable the Microsoft traffic profile.</li> </ol> <p>Turns on Microsoft traffic forwarding and create the following configurations in Microsoft Entra:</p> Configuration Setup Description Policies (network routing) 1.\u00a0Exchange Online, 2.\u00a0SharePoint Online and OneDrive for Business, and 3.\u00a0Entra ID and MSGraph\u00a0- These use fully qualified domain names or IP subnets to manage network traffic. Conditional Access Policy Linked Conditional Access policies\u00a0- Captures all traffic to Microsoft Services, routes to the network policies defined earlier if conditions are met. User and Group Specify specific users or groups that this traffic forward applies to. ### Step 2: Download the client 1. Sign in to the Microsoft Entra admin center as a Global Secure Access Administrator. 2. Browse to Global Secure Access &gt; Connect &gt; Client download. 3. Select Download Client."},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#step-3","title":"Step 3:","text":"<p>Configure the Tenant Restrictions: - Tenant restrictions move policy management from network proxies to a cloud-based portal - Allow internal identities, such as employees, to access specific external tenants on your managed network.  - Block access to nonallowed tenants for internal identities. - Block external identities, such as contractors and vendors, from accessing all external tenants.</p> <p>Set up Tenant Restrictions</p> <ul> <li>Browse to Identity &gt; External Identities &gt; Cross-tenant access settings, then select Organizational settings.</li> <li>Select\u00a0Add organization.</li> <li>On the\u00a0Add organization\u00a0pane, type the full domain name (or tenant ID) for the organization.</li> <li>Select the organization in the search results, and then select Add.</li> <li>Modify the organization's settings.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#enable-global-secure-access","title":"Enable Global Secure Access","text":"<ol> <li>Sign in to the Microsoft Entra admin center as a Global Secure Access Administrator.</li> <li>Browse to Global Secure Access &gt; Global Settings &gt; Session Management &gt; Tenant Restrictions.</li> <li>Select the toggle to Enable tagging to enforce tenant restrictions on your network.</li> <li>Select Save.</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#how-it-works","title":"How it works","text":"Steps Description 1. Contoso configures a **tenant restrictions v2 ** policy in their cross-tenant access settings to block all external accounts and external apps. Contoso enforces the policy using Global Secure Access universal tenant restrictions. 2. A user with a Contoso-managed device tries to access a Microsoft Entra integrated app with an unsanctioned external identity. 3. Authentication plane protection: Microsoft Entra ID, with Contoso's policy, blocks unsanctioned external accounts from accessing external tenants. 4. Data plane protection: If the user again tries to access an external unsanctioned application by copying an authentication response token they obtained outside of Contoso's network and pasting it into the device, are blocked. The token mismatch triggers reauthentication and blocks access. For SharePoint Online, any attempt at anonymously accessing resources is blocked."},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#step-4","title":"Step 4:","text":"<p>Enable enhanced Global Secure Access signaling and Conditional Access</p> <ul> <li>Global Secure Access introduces the concept of a compliant network within Conditional Access</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#enable-global-secure-access-signaling","title":"Enable Global Secure Access signaling","text":"<ol> <li>Sign into the Microsoft Entra admin center as a Global Secure Access Administrator.</li> <li>Browse to Global Secure Access &gt; Global settings &gt; Session management Adaptive access.</li> <li>Select the toggle to Enable Global Secure Access signaling in Conditional Access.</li> <li> <p>Browse to Protection &gt; Conditional Access &gt; Named locations.</p> <p>Confirm you have a location called All Compliant Network locations with location type Network Access. Organizations can optionally mark this location as trusted.</p> </li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#build-your-conditional-access-policy-for-networks","title":"Build your Conditional Access policy for networks","text":"<ol> <li>Sign into the Microsoft Entra admin center as at least a Conditional Access Administrator.</li> <li>Browse to Protection &gt; Conditional Access.</li> <li>Select Create new policy.</li> <li>Give your policy a name. We recommend that organizations create a meaningful standard for the names of their policies.</li> <li>Look at Assignments, then select Users or workload identities.<ul> <li>Under Include, select All users.</li> <li>Under Exclude, select Users and groups and choose your organization's emergency access or break-glass accounts.</li> </ul> </li> <li>Review Target resources &gt; Include, and select Select apps.<ul> <li>Choose Office 365 Exchange Online, and/or Office 365 SharePoint Online, and/or any of your SaaS apps.</li> <li>The specific Office 365 cloud app in the app picker is currently NOT supported, so don't select this cloud app.</li> </ul> </li> <li>Review the Conditions &gt; Location.<ul> <li>Set Configure to Yes.</li> <li>Under Include, select Any location.</li> <li>Under Exclude, select Selected locations.<ul> <li>Select the All Compliant Network locations.</li> </ul> </li> <li>Choose Select.</li> </ul> </li> <li>Explore Access controls:<ul> <li>Grant, select Block Access, and select Select.</li> </ul> </li> <li>Confirm your settings and set Enable policy to On.</li> <li>Select the Create button to create to enable your policy.</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#-_1","title":"----","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#deploy-and-configure-microsoft-entra-private-access","title":"Deploy and configure Microsoft Entra Private Access","text":"Steps Description 1. Configure a Microsoft Entra private network connector and connector group. Create connection between an on-premises server and Global Secure Access. 2. Configure Quick Access to your private resources. Define specific fully qualified domain names (FQDNs) or IP addresses of private resources to include in Microsoft Entra Private Access. 3. Enable the Private Access traffic forwarding profile. Turn on Private Access and link from on-premises router to remote networks. 4. Install and configure the Global Secure Access Client on end-user devices. Deploy the client software onto devices, so they can access the traffic flow. ## Step 1: <p>Configure a Microsoft Entra private network connector and connect groups</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#connectors","title":"Connectors","text":"<ul> <li>lightweight agents that sit on a server in a private network</li> <li>must be installed on a Windows Server that has access to the backend resources and applications</li> <li>can be organized into connector groups, with each group handling traffic to specific applications.</li> <li>facilitate the outbound connection to the Global Secure Access service.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#configuring-the-windows-server-for-connectors","title":"Configuring the Windows Server for connectors","text":"<ul> <li>The Microsoft Entra private network connector requires a server running Windows Server 2012 R2 or later</li> <li> <p>This connector server needs to connect to the following:</p> <ul> <li>Microsoft Entra Private Access service or application proxy service</li> <li>the private resources or applications that you plan to publish.</li> </ul> </li> <li> <p>The minimum .NET version required for the connector is v4.7.1+.</p> </li> <li>Requires Transport Layer Security (TLS) 1.2 be enabled on Windows Server.</li> </ul> <p>Open ports for\u00a0outbound</p> Port number What the port is used for 80 Downloading certificate revocation lists (CRLs) while validating the TLS/SSL certificate 443 All outbound communication with the Application Proxy service <p>Allow access to some URLs</p> URL Port What the port is used for <code>site</code>.msappproxy.net, and\u00a0<code>site</code>.servicebus.windows.net 443/HTTPS Communication between the connector and the Application Proxy cloud service crl3.digicert.com, crl4.digicert.com, ocsp.digicert.com, crl.microsoft.com, oneocsp.microsoft.com, and ocsp.msocsp.com 80/HTTP The connector uses these URLs to verify certificates. login.windows.net, secure.aadcdn.microsoftonline-p.com,\u00a0<code>site</code>.microsoftonline.com,\u00a0<code>site</code>.microsoftonline-p.com,\u00a0<code>site</code>.msauth.net,\u00a0<code>site</code>.msauthimages.net,\u00a0<code>site</code>.msecnd.net,\u00a0<code>site</code>.msftauth.net,\u00a0<code>site</code>.msftauthimages.net,\u00a0<code>site</code>.phonefactor.net, enterpriseregistration.windows.net, management.azure.com, policykeyservice.dc.ad.msft.net, ctldl.windowsupdate.com, and\u00a0www.microsoft.com/pkiops 443/HTTPS The connector uses these URLs during the registration process. ctldl.windowsupdate.com, and\u00a0www.microsoft.com/pkiops 80/HTTP The connector uses these URLs during the registration process."},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#install-the-connector-using-microsoft-entra","title":"Install the connector using Microsoft Entra","text":"<ol> <li>Sign into the Microsoft Entra admin center as a Global Administrator of the directory that uses Application Proxy.</li> <li>Select your username in the upper-right corner. Verify sign-in to a directory that uses Application Proxy. If you need to change directories, select Switch directory and choose a directory that uses Application Proxy.</li> <li>Browse to Global Secure Access &gt; Connect &gt; Connectors.</li> <li>Select Download connector service.</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#verify-the-connector-installed","title":"Verify the connector installed","text":"<p>On Windows Server: 1. Select the Windows key and enter services.msc to open the Windows Services Manager. 2. Check to see if the status for the following services Running.     - Microsoft Entra private network connector enables connectivity.     - Microsoft Entra private network connector Updater is an automated update service.     - The updater checks for new versions of the connector and updates the connector as needed. 3. If the status for the services isn't Running, right-click to select each service and choose Start.</p> <p>In Microsoft Entra: 1. Sign in to the Microsoft Entra admin center as a Global Administrator of the directory that uses Application Proxy. 2. Browse to Global Secure Access &gt; Connect &gt; Connectors.     - All of your connectors and connector groups appear on this page. 3. Verify the details by viewing the connector.     - Expand the connector to view the details.     - An active green label indicates that your connector can connect to the service. However, even though the label is green, a network issue could still block the connector from receiving messages.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#create-groups-of-connectors","title":"Create groups of connectors","text":"<ol> <li>For quicker assignments, you can group different connectors together.</li> <li>Browse to Global Secure Access &gt; Connect &gt; Connectors.</li> <li>Select New connector group.</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#step-2","title":"Step 2:","text":"<p>Configure Quick Access for Global Secure Access</p> <ul> <li>With Global Secure Access, you can define specific fully qualified domain names (FQDNs) or IP addresses of private resources to include in the traffic for Microsoft Entra Private Access.</li> <li>Your organization's employees can then access the apps and sites that you specify.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#set-up-quick-access-name-and-connector-group","title":"Set up Quick Access name and connector group","text":"<ol> <li>Sign in to the Microsoft Entra admin center with the appropriate roles.</li> <li>Browse to Global Secure Access &gt; Applications &gt; Quick access.</li> <li>Enter a name. We recommend using the name Quick Access.</li> <li>Select a Connector group from the dropdown menu. Existing connector groups appear in the dropdown menu.<ul> <li>Created in the previous step.</li> </ul> </li> <li>Select the Save button at the bottom of the page to create your \"Quick Access\" app without FQDNs and IP addresses.</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#add-an-application-segment","title":"Add an application segment","text":"<ul> <li> <p>is where you define the FQDNs and IP addresses that you want to include in the traffic for Microsoft Entra Private Access</p> </li> <li> <p>Sign in to the Microsoft Entra admin center.</p> </li> <li>Browse to Global Secure Access &gt; Applications &gt; Quick Access.</li> <li>Select\u00a0Add Quick Access\u00a0application segment.</li> <li>In the\u00a0Create application segment\u00a0panel, select a Destination type.</li> <li>Enter the appropriate details for the selected destination type. Depending on what you select, the subsequent fields change accordingly.</li> <li> <p>Enter the appropriate details for the selected destination type. Depending on what you select, the subsequent fields change accordingly.</p> </li> <li> <p>IP address:</p> <ul> <li>Internet Protocol version 4 (IPv4) address, such as 192.0.2.1, that identifies a device on the network.</li> <li>Provide the ports that you want to include.</li> <li> <p>Fully qualified domain name (including wildcard FQDNs):</p> </li> <li> <p>Domain name that specifies the exact location of a computer or a host in the Domain Name System (DNS).</p> </li> <li>Provide the ports to include.</li> <li>NetBIOS isn't supported. For example, use contoso.local/app1 instead of contoso/app1.</li> <li> <p>IP address range (CIDR):</p> </li> <li> <p>Classless Inter-Domain Routing (CIDR) represents a range of IP addresses. An IP address is followed by a suffix indicating the number of network bits in the subnet mask.</p> </li> <li>For example, 192.0.2.0/24 indicates that the first 24 bits of the IP address represent the network address, while the remaining 8 bits represents the host address.</li> <li>Provide the starting address, network mask, and ports.</li> <li> <p>IP address range (IP to IP):</p> </li> <li> <p>Range of IP addresses from start IP (such as 192.0.2.1) to end IP (such as 192.0.2.10).</p> </li> <li>Provide the IP address start, end, and ports.</li> <li> <p>Enter the ports and select the Apply button.</p> </li> <li> <p>Separate multiple ports with a comma.</p> </li> <li>Specify port ranges with a hyphen.</li> <li>Spaces between values are removed when you apply the changes.</li> <li>For example, 400-500, 80, 443.</li> </ul> </li> </ul> <p>The following table provides the most commonly used ports and their associated networking protocols:</p> Port Protocol 22 Secure Shell (SSH) 80 Hypertext Transfer Protocol (HTTP) 443 Hypertext Transfer Protocol Secure (HTTPS) 445 Server Message Block (SMB) file sharing 3389 Remote Desktop Protocol (RDP) #### Assign users and groups for Quick Access <ol> <li>Sign in to the Microsoft Entra admin center.</li> <li>Browse to Global Secure Access &gt; Applications &gt; Quick Access.</li> <li>Select the Edit application settings button from Quick Access.</li> <li>Select Users and groups from the side menu.</li> <li>Add users and groups as needed.</li> </ol> <p>You can enable specific Conditional Access policies as needed.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#step-3_1","title":"Step 3","text":"<p>Enable Traffic forwarding - Microsoft Entra Private Access</p> <ul> <li>The Private Access traffic forwarding profile routes traffic to your private network through the Global Secure Access Client.</li> <li>Enabling this traffic forwarding profile allows remote workers to connect to internal resources without a VPN.</li> <li> <p>With the features of Microsoft Entra Private Access, you can control which private resources to tunnel through the service and apply Conditional Access policies to secure access to those services.</p> </li> <li> <p>Sign in to the Microsoft Entra admin center.</p> </li> <li>Browse to Global Secure Access &gt; Connect &gt; Traffic forwarding.</li> <li>Select the checkbox for Private access profile.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#step-4_1","title":"Step 4","text":"<p>Deploy Global Secure Access client for Windows (or Android)</p> <ol> <li>Sign in to the Microsoft Entra admin center as a Global Secure Access Administrator.</li> <li>Browse to Global Secure Access &gt; Connect &gt; Client download.</li> <li>Select Download Client.</li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#explore-how-to-use-the-dashboard-to-drive-global-secure-access","title":"Explore how to use the Dashboard to drive Global Secure Access","text":"<ul> <li>provides you with visualizations of the network traffic acquired by the Microsoft Entra Private and Microsoft Entra Internet Access services.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#global-secure-access-snapshot","title":"Global Secure Access snapshot","text":"<ul> <li>This widget provides a summary of how many users and devices are using the service and how many applications were secured through the service</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#alerts-and-notifications-preview","title":"Alerts and notifications (preview)","text":"<ul> <li>This widget shows what is happening in the network and helps identify suspicious activities or trends identified by the network data</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#usage-profiling-preview","title":"Usage profiling (preview)","text":"<ul> <li>displays usage patterns over a selected period of time.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#top-used-destinations","title":"Top used destinations","text":"<ul> <li>shows all types of traffic and sorts by the number of transactions.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#cross-tenant-access","title":"Cross-tenant access","text":"<ul> <li>Global Secure Access provides visibility into the number of users and devices that are accessing other tenants.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#web-category-filtering","title":"Web category filtering","text":"<ul> <li>displays the top categories of web content that are blocked or allowed</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#device-status","title":"Device status","text":"<ul> <li>display the active and inactive devices that you deployed</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#-_2","title":"----","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#create-remote-networks-for-use-with-global-secure-access","title":"Create remote networks for use with Global Secure Access","text":"<ul> <li>Remote networks are remote locations, such as a branch office, or networks that require internet connectivity</li> <li>Setting up remote networks connects your users in remote locations to Global Secure Access.</li> <li> <p>Once a remote network is configured, you can assign a traffic forwarding profile to manage your corporate network traffic.</p> </li> <li> <p>There are multiple ways to connect remote networks to Global Secure Access. </p> </li> <li>In a nutshell, you're creating an Internet Protocol Security (IPSec) tunnel between:<ul> <li>a core router at your remote network and </li> <li>the nearest Global Secure Access endpoint.</li> </ul> </li> <li>All internet-bound traffic is routed through the core router of the remote network for security policy evaluation in the cloud</li> <li>Installation of a client isn't required on individual devices</li> </ul> Steps Description 1. Basics Define the name of your remote network and the region where you want to connect. 2. Connectivity Enter the data about your on-premises router, where the signal comes from. 3. Traffic Forwarding Add a traffic forwarding profile to define the type traffic network traffic to allow through. 4. Review Configuration In the step your confirm the setup of the remote network and gather settings you need to configure in the on-premises router. 5 etup on-premises router Use the management console of your on-premises router to enter the Microsoft connectivity setting from previous step."},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#-_3","title":"---","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#use-conditional-access-with-global-secure-access","title":"Use Conditional Access with Global Secure Access","text":"<p>new types of checks introduced into Conditional Access with Global Secure Access:</p> <ul> <li>Compliant network check</li> <li>Private Access apps</li> <li>Source IP restoration</li> </ul> <p>To use the\u00a0Compliant network check\u00a0and the\u00a0Source IP restoration\u00a0capabilities, you need to have\u00a0Global Secure Access signaling for Conditional Access\u00a0enabled.</p>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#enable-global-secure-access-signaling-for-conditional-access","title":"Enable Global Secure Access signaling for Conditional Access","text":"<p>To enable the required setting to allow the compliant network check, an administrator must take the following steps.</p> <ol> <li>Sign in to the Microsoft Entra admin center as a Global Secure Access Administrator.</li> <li>Browse to Global Secure Access &gt; Global settings &gt; Session management Adaptive access.</li> <li>Select the toggle to Enable CA Signaling for Microsoft Entra ID (covering all cloud apps). Continuous Access Evaluation (CAE) signaling is automatically enabled for Office 365 (preview).</li> <li>Browse to Protection &gt; Conditional Access &gt; Named locations.<ul> <li>Confirm you have a location called All Compliant Network locations with location type Network Access. Organizations can optionally mark this location as trusted.</li> </ul> </li> </ol>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#compliant-network-check","title":"Compliant Network Check","text":"<ul> <li>Compliant network enforcement occurs at both the authentication and data planes. Microsoft Entra ID handles enforcement during user authentication, while data plane enforcement works with services supporting Continuous Access Evaluation (CAE), currently limited to Exchange Online and SharePoint Online. CAE provides defense-in-depth with token theft replay protection.</li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#protect-your-resources-behind-the-compliant-network","title":"Protect your resources behind the compliant network","text":"<ul> <li> <p>The compliant network Conditional Access policy can be used to protect your Microsoft and other applications. A typical policy will 'Block' access for all network locations except Compliant Network.</p> </li> <li> <p>Look in Target resources &gt; Include, and choose Select apps.</p> <ul> <li>Choose Office 365 Exchange Online, and/or Office 365 SharePoint Online, and/or any of your SaaS apps.</li> <li>The specific Office 365 cloud app in the app picker is currently NOT supported, so don't select this cloud app.</li> </ul> </li> <li>Explore Conditions &gt; Location.<ul> <li>Set Configure to Yes.</li> <li>Under Include, select Any location.</li> <li>Under Exclude, choose Selected locations.<ul> <li>Select the All Compliant Network locations.</li> </ul> </li> <li>Choose Select.</li> </ul> </li> <li>Under Access controls:<ul> <li>Grant, select Block Access, and choose Select.</li> </ul> </li> </ul>"},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#conditional-access-for-private-access-apps","title":"Conditional Access for Private Access apps","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#enriched-office-365-logs-preview","title":"Enriched Office 365 logs (preview)","text":""},{"location":"SC-300/03%20Implement%20an%20Authentication%20and%20Access%20Management%20solution/06%20Global%20Secure%20Access/Global%20Secure%20Access/#enable-the-log-enrichment","title":"Enable the log enrichment","text":"<p>To enable the Enriched Microsoft 365 logs:</p> <ol> <li>Sign in to the Microsoft Entra admin center as a Global Administrator.</li> <li>Browse to Global Secure Access &gt; Global settings &gt; Logging.</li> <li>Select the type of Microsoft 365 logs you want to enable.</li> <li>Select Save.</li> </ol>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/01%20Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/","title":"Discover apps by using Microsoft Defender for Cloud Apps and Active Directory Federation Services app report","text":"<p>CASB - \u00a0Cloud Access Security Broker - An on-premises or cloud-based security policy enforcement point, placed between cloud service consumers and cloud service providers to combine and interject enterprise security policies as the cloud-based resources are accessed.</p> <p>MDCA - Microsoft Defender for Cloud Apps - The Microsoft implementation of a CASB service to protect data, services, and applications with enterprise policies.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/01%20Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#microsoft-defender-for-cloud-apps","title":"Microsoft Defender for Cloud Apps","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/01%20Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#cloud-discovery","title":"Cloud Discovery","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/01%20Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#active-directory-federation-services","title":"Active Directory Federation Services","text":"<p>To increase application security, your goal is to have a single set of access controls and policies across your on-premises and cloud environments.</p> <p></p> <ul> <li>The AD FS application activity report in the Azure portal enables you to quickly identify which applications you can migrate to Microsoft Entra ID.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/01%20Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#types-of-apps-to-migrate","title":"Types of apps to migrate","text":"<ol> <li>SaaS applications, which are procured by the organization.</li> <li>Line-of-business applications, which are developed by the organization and not meant to be used by other companies.</li> </ol>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/01%20Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#discover-ad-fs-applications-that-can-be-migrated","title":"Discover AD FS applications that can be migrated","text":"<p> Migration status: - Ready to migrate - Needs review - Additional steps required</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/01%20Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#configure-connectors-to-apps","title":"Configure connectors to apps","text":"<ul> <li>App connectors use the APIs of app providers to enable greater visibility and control by MDCA</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/01%20Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#multi-instance-support","title":"Multi-instance support","text":"<ul> <li>applies only to API connected apps, not to Cloud Discovered apps or Proxy connected apps.</li> <li>For example, if you've more than one instance of Salesforce (one for sales, one for marketing) you can connect both to Defender for Cloud Apps.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/01%20Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Plan%20and%20design%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#assign-application-owners","title":"Assign application owners","text":"<ul> <li>when a user creates a new application registration, they're automatically added as the first owner</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/","title":"Implement token customizations","text":"<ul> <li>.In Microsoft Entra ID, a policy object represents a set of rules that are enforced on individual applications or on all applications in an organization</li> <li>Each policy type has a unique structure, with a set of properties that are applied to objects to which they're assigned</li> <li>You can designate a policy as the default policy for your organization.</li> <li>The policy is applied to any application in the organization, as long as it isn't overridden by a policy with a higher priority.</li> <li>You also can assign a policy to specific applications. </li> <li>The order of priority varies by policy type.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#configure-authentication-session-management-with-conditional-access","title":"Configure authentication session management with Conditional Access","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#customize-tokens-for-microsoft-entra-id","title":"Customize Tokens for Microsoft Entra ID","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#token-lifetime-definitions","title":"Token lifetime definitions","text":"<p>Lifetime length (days) - After time period elapses, the user is forced to reauthenticate Access and ID token lifetime - The lifetime of the OAuth 2.0 bearer token and ID token Refresh token sliding windows lifetime - The refresh token sliding window type Refresh token lifetime (days) - The maximum time period before which a refresh token can be used to acquire a new access token</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#configure-optional-claims-as-part-of-your-token","title":"Configure \"optional claims\" as part of your token","text":"<p>Optional claims in Microsoft Entra ID applications allow application developers to specify which claims they want included in the tokens sent to their application. </p> <p>They can be used to: - select additional claims - modify the behavior of certain claims returned by the Microsoft identity platform - dd custom access claims</p> <p>While optional claims are supported in both v1.0 and v2.0 format tokens, they are particularly valuable when transitioning from v1.0 to v2.0, as the latter aims for smaller token sizes for optimal client performance.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#implement-and-configure-consent-settings","title":"Implement and configure consent settings","text":"<p>You can integrate your applications with the Microsoft identity platform to allow users to sign in with their work or school account and access the organization's data to deliver rich data-driven experiences.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#user-consent-settings","title":"User consent settings","text":"<ul> <li>Disable user consent</li> <li>Users can consent to apps from\u00a0verified publisher or your organization, but only for permissions you choose</li> <li>Users can consent to all apps</li> <li>Custom app consent policy - \u00a0create custom app consent policies</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#risk-based-step-up-consent","title":"Risk-based step-up consent","text":"<ul> <li>helps reduce user exposure to malicious apps that make illicit consent requests</li> <li>If Microsoft detects a risky end-user consent request, the request will require a step-up to admin consent instead</li> <li>This capability is enabled by default, but it will only result in a behavior change when end-user consent is enabled.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#integrate-on-premises-apps-with-microsoft-entra-application-proxy","title":"Integrate on-premises apps with Microsoft Entra application proxy","text":"<p>Application Proxy - enables users to access on-premises web applications from a remote client. - \u00a0includes both the Application Proxy service that runs in the cloud, and the Application Proxy connector that runs on an on-premises server - Application proxy service and application proxy connector work together to securely pass the user sign-on token from Microsoft Entra ID to the web application. - is recommended for giving remote users access to internal resources. - replaces the need for a virtual private network (VPN) or reverse proxy - is not intended for internal users on the corporate network.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#how-application-proxy-works","title":"How Application Proxy works","text":"<ol> <li>After the user has accessed the application through an endpoint, the user is directed to the Microsoft Entra sign-in page.</li> <li>After a successful sign-in, Microsoft Entra ID sends a token to the user's client device.</li> <li>The client sends the token to the Application Proxy service, which retrieves the user principal name (UPN) and security principal name (SPN) from the token. Application Proxy then sends the request to the Application Proxy connector.</li> <li>If you have configured single sign-on, the connector performs any additional authentication required on behalf of the user.</li> <li>The connector sends the request to the on-premises application.</li> <li>The response is sent through the connector and Application Proxy service to the user.</li> </ol>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#integrate-custom-saas-apps-for-single-sign-on","title":"Integrate custom SaaS apps for single sign-on","text":"<p> - You can use Microsoft Entra ID as your identity system for just about any app. Many apps are already pre-configured and can be set up with minimal effort. These pre-configured apps are published in the Microsoft Entra ID App Gallery. - You can manually configure most apps for single-sign-on if they aren't already in the gallery.  - Microsoft Entra ID provides several SSO options.      - SAML-based SSO     - OIDC-based SSO</p> <p>Comparison of the various protocols used by Microsoft identity platform:</p> <p>OAuth vs. OpenID Connect - OAuth is used for authorization - OpenID Connect (OIDC) is used for authentication.</p> <p>OAuth vs. SAML - OAuth is used for authorization - Security Assertion Markup Language (SAML) is used for authentication.</p> <p>OpenID Connect vs. SAML - Both OpenID Connect and SAML are used to authenticate a user and are used to enable single-sign-on. - SAML authentication is commonly used with identity providers such as ADFS federated to Microsoft Entra ID and is therefore frequently used in enterprise applications. - OpenID Connect is commonly used for apps that are purely in the cloud, such as mobile apps, web sites, and web APIs.</p> <p>If you have an application that you want to integrate with Microsoft Entra ID to provide the single-sign-on experience for your users, please see the article ClaimsXRay in Microsoft Entra ID with Directory Extension, linked below:</p> <p>ClaimsXRay in Microsoft Entra ID with Directory Extension</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#implement-application-based-user-provisioning","title":"Implement application-based user provisioning","text":"<ul> <li>In Microsoft Entra ID, the term app provisioning refers to automatically creating user identities and roles in the cloud</li> <li>automatic provisioning includes the maintenance and removal of user identities as status or roles change</li> <li>A common scenario is provisioning a Microsoft Entra user into applications like\u00a0Dropbox,\u00a0Salesforce,\u00a0ServiceNow, and more.</li> </ul> Features Actions Automate provisioning Automatically create new accounts in the right systems for new people when they join a team or organization. Automate deprovisioning Automatically deactivate accounts in the right systems when people leave a team or organization. Synchronize data between systems Ensure that the identities in the apps and systems are kept up to date based on changes in the directory or the human resources system Provision groups: Provisioning a group to the applications that supports them. Govern access Monitor and audit who has been provisioned into the applications Seamlessly deploy in brown field scenarios Match existing identities between systems and allow for easy integration, even when users already exist in the target system. Use rich customization Take advantage of customizable attribute mappings that define what user data should flow from the source system to the target system Get alerts for critical events The provisioning service provides alerts for critical events and allows for Log Analytics integration where you can define custom alerts to suit your business needs. ## Manual vs. automatic provisioning <p>Manual provisioning - means there's no automatic Microsoft Entra provisioning connector for the app yet - \u00a0User accounts must be created manually - Examples of this include adding users directly into the administrative portal of the app or uploading a spreadsheet with user account details</p> <p>Automatic provisioning  - means that a Microsoft Entra provisioning connector has been developed for this application</p> <p>In the Microsoft Entra ID gallery, applications that support automatic provisioning are designated by a\u00a0Provisioning\u00a0icon.</p> <p></p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#system-for-cross-domain-identity-management","title":"System for Cross-domain Identity Management","text":"<ul> <li>provides a common user schema to help users move into, out of, and around apps</li> <li>is becoming the standard for provisioning and, when used in conjunction with federation standards like SAML or OpenID Connect, provides administrators an end-to-end, standards-based solution for access management.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#build-a-system-for-cross-domain-identity-management-endpoint-and-configure-user-provisioning-with-microsoft-entra-id","title":"Build a System for Cross-domain Identity Management endpoint and configure user provisioning with Microsoft Entra ID","text":"<ul> <li>an application developer can use SCIM user management API to enable automatic provisioning of users and groups between their application and Microsoft Entra ID</li> <li>The SCIM specification provides a common user schema for provisioning.</li> <li>SCIM is a standardized definition of two endpoints:<ul> <li>Users endpoint</li> <li>Groups endpoint</li> </ul> </li> <li>uses common Representational state transfer (REST) verbs to:<ul> <li>create</li> <li>update, and </li> <li>delete objects</li> </ul> </li> <li>and a pre-defined schema for common attributes like:<ul> <li>group name</li> <li>username</li> <li>first name</li> <li>last name</li> <li>email</li> </ul> </li> </ul> <p> Application developers that build a SCIM endpoint can integrate with any SCIM-compliant client without having to do custom work, rather than starting from scratch and building the implementation completely on your own, you can rely on a number of open source SCIM libraries published by the SCIM community.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#monitor-and-audit-access-to-microsoft-entra-integrated-enterprise-applications","title":"Monitor and audit access to Microsoft Entra integrated enterprise applications","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#create-and-manage-application-collections","title":"Create and manage application collections","text":"<ul> <li>Your users can use the My Apps portal to view and start the cloud-based applications they have access to.</li> <li> <p>By default, all the applications a user can access are listed together on a single page.</p> </li> <li> <p>Open the Microsoft Entra admin center and sign in as an admin.</p> </li> <li> <p>Go to\u00a0Identity, next open the\u00a0Applications\u00a0menu, then select\u00a0Enterprise Applications.</p> </li> <li> <p>Under\u00a0Manage, select\u00a0App Launchers.</p> </li> <li> <p>Select\u00a0New collection.</p> </li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/02%20Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/Implement%20and%20monitor%20the%20integration%20of%20enterprise%20apps%20for%20SSO/#my-apps-portal","title":"My apps portal","text":"<p>My Apps is separate from the Azure portal and doesn't require users to have an Azure subscription or Microsoft 365 subscription.</p> <p>Follow these steps to create a collection.</p> <ol> <li>Open the\u00a0My Apps\u00a0portal.</li> <li>Select the ellipsis (...) on the apps screen.</li> <li>Choose\u00a0Manage collections.</li> <li>Select\u00a0Create collection.</li> <li>Select the\u00a0+ Add apps\u00a0option to add all the apps you want in the collection.</li> <li>After picking your apps, select the\u00a0Add selected apps\u00a0button.</li> <li>Give the collection a name and choose\u00a0Create collection.</li> </ol>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/","title":"Plan your line of business application registration strategy","text":"<p>Application registration in Microsoft Entra ID is the process of ensuring that the identity system is aware of what applications are used.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#plan-for-app-registration","title":"Plan for app registration","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#benefits-of-registering-an-app","title":"Benefits of registering an app","text":"<ul> <li>Customize the branding of your application in the sign-in dialog</li> <li>Decide if you want to allow users to sign in only if they belong to your organization.</li> <li>Request scope permissions.</li> <li>Define a scope that defines access to your web API.</li> <li>Share a secret with the Microsoft identity platform that proves the app's identity.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#single-tenant-versus-multitenant-apps","title":"Single tenant versus multitenant apps","text":"<ul> <li>Single-tenant apps are only available in the tenant they were registered in, also known as their home tenant.</li> <li>multitenant apps are available to users in both their home tenant and other tenants.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#what-happens-when-an-app-is-registered","title":"What happens when an app is registered","text":"<ul> <li>After the app is registered, it's given a unique identifier that it shares with the Microsoft identity platform when it requests tokens</li> <li>If the app is a confidential client application, it will also share the secret or the public key depending on whether certificates or secrets were used.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#functions-of-microsoft-entra-id-app-representation","title":"Functions of Microsoft Entra ID app representation","text":"<ul> <li>app is identified by the authentication protocols it supports</li> <li>provides all the identifiers, URLs, secrets, and related information that are needed to authenticate.</li> </ul> <p>The Microsoft identity platform:</p> <ul> <li>Holds all the data required to support authentication at runtime.</li> <li>Holds all the data for deciding what resources an app might need to access, and under what circumstances a given request should be fulfilled.</li> <li>Provides infrastructure for implementing app provisioning within the app developer's tenant, and to any other Microsoft Entra tenant.</li> <li>Handles user consent during token request time and facilitates the dynamic provisioning of apps across tenants.</li> </ul> <p>Consent is the process of a resource owner granting authorization for a client application to access protected resources, under specific permissions, on behalf of the resource owner.</p> <p>2 representations of applications in Microsoft Entra ID: - application objects - and service principals</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#what-are-application-objects","title":"What are application objects?","text":"<ul> <li>Managed in Entra ID portal under App registrations</li> <li>Application objects define and describe the application to Microsoft Entra ID, enabling your identity provider to know how to issue tokens to the application based on its settings.</li> <li>The application object will only exist in its home directory, even if it's a multitenant application supporting service principals in other directories.</li> <li>Any given application can have at most one application object (which is registered in a \"home\" directory)</li> </ul> <p>The application object includes any of the following among others: - Name, logo, and publisher - Redirect URIs - Secrets (symmetric and/or asymmetric keys used to authenticate the application) - API dependencies (OAuth) - Published APIs/resources/scopes (OAuth) - App roles (RBAC) - SSO metadata and configuration - User provisioning metadata and configuration - Proxy metadata and configuration</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#how-application-objects-are-created","title":"How application objects are created?","text":"<ul> <li>Application registrations in the Azure portal.</li> <li>Creating a new application using Visual Studio and configuring it to use Microsoft Entra authentication.</li> <li>When an admin adds an application from the app gallery (which will also create a service principal).</li> <li>Using the Microsoft Graph API or PowerShell to create a new application.</li> <li>Many other pathways, including various developer experiences in Azure and in API explorer experiences across developer centers.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#what-are-service-principals","title":"What are service principals?","text":"<ul> <li>Managed in Entra ID portal under Enterprise applications</li> <li>Service principals govern an application connecting to Microsoft Entra ID</li> <li>can be considered the instance of the application in your directory</li> <li>any given application can have one or more service principal objects representing instances of the application in every directory in which it acts.</li> </ul> <p>The service principal can include: - A reference back to an application object through the application ID property. - Records of local user and group application-role assignments. - Records of local user and admin permissions granted to the application.     - For example: permission for the application to access a particular user's email. - Records of local policies including Conditional Access policy. - Records of alternate local settings for an application.     - Claims transformation rules.     - Attribute mappings (User provisioning).     - Directory-specific app roles (if the application supports custom roles).     - Directory-specific name or logo.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#how-are-service-principals-created","title":"How are service principals created?","text":"<ul> <li>When users sign in to a third-party application integrated with Microsoft Entra ID.</li> <li>When users sign in to Microsoft online services like Microsoft 365.</li> <li>When an admin adds an application from the app gallery (this will also create an underlying app object).</li> <li>Add an application to use the Microsoft Entra Application Proxy.</li> <li>Connect an application for SSO using SAML or password SSO.</li> <li>Programmatically via the Microsoft Graph API or PowerShell.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#how-are-application-objects-and-service-principals-related-to-each-other","title":"How are application objects and service principals related to each other?","text":"<p>An application has one application object in its home directory that's referenced by one or more service principals in each of the directories where it operates (including the application's home directory).</p> <p></p> <ol> <li>Microsoft maintains two directories internally (shown on the left) that it uses to publish applications:<ul> <li>One for Microsoft Apps (Microsoft services directory).</li> <li>One for preintegrated third-party applications (App gallery directory).</li> </ul> </li> </ol> <p>Application publishers/vendors who integrate with Microsoft Entra ID are required to have a publishing directory (shown on the right as \"Some SaaS directory\").</p> <p>Applications that you add (represented as \"App (yours)\" in the diagram) include:</p> <ul> <li>Apps you developed (integrated with Microsoft Entra ID).</li> <li>Apps you connected for SSO.</li> <li>Apps you published using the Microsoft Entra Application Proxy.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#notes-and-exceptions-to-service-principals","title":"Notes and exceptions to service principals","text":"<ul> <li>Not all service principals point back to an application object</li> <li>it's still possible to create service principals through different pathways, such as using PowerShell, without first creating an application object.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#adding-a-new-app-registration","title":"Adding a new app registration","text":"<p>Process flow of the diagram</p> <ol> <li>User requests to register an application \u2013 a request token is issued.</li> <li>Authorization endpoint sends back an Authentication.</li> <li>User consents to have the application registration.</li> <li>Service is created from the application</li> <li>Token returned to the user.</li> </ol>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#implement-application-registration","title":"Implement application registration","text":"<ul> <li>Each application you want the Microsoft identity platform to perform identity and access management (IAM) for must be registered.</li> <li>registering it establishes a trust relationship between your application and the identity provider, the Microsoft identity platform</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#register-an-application","title":"Register an application","text":"<p>Registering your application establishes a trust relationship between your app and the Microsoft identity platform.</p> <p>The trust is unidirectional: Your app trusts the Microsoft identity platform\u2014not the other way around.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#add-a-redirect-uri","title":"Add a redirect URI","text":"<p>A redirect URI is the location where the Microsoft identity platform redirects a user's client and sends security tokens after authentication</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#configure-platform-settings","title":"Configure platform settings","text":"<p>To configure application settings based on the platform or device you're targeting:</p> <ol> <li>Select your application in\u00a0App registrations\u00a0in the Azure portal.</li> <li>Under\u00a0Manage, select\u00a0Authentication.</li> <li>Under\u00a0Platform configurations, select\u00a0Add a platform.</li> <li>In\u00a0Configure platforms, select the tile for your application type (platform) to configure its settings.</li> </ol>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#add-credentials","title":"Add credentials","text":"<ul> <li>Credentials are used by confidential client applications that access a web API.</li> <li>Examples of confidential clients:<ul> <li>web apps</li> <li>other web APIs</li> <li>service-type applications</li> <li>daemon-type applications</li> </ul> </li> <li> <p>Credentials allow your application to authenticate as itself, requiring no interaction from a user at runtime.</p> </li> <li> <p>You can add both certificates and client secrets (a string) as credentials to your confidential client app registration.</p> </li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#add-a-certificate","title":"Add a certificate","text":"<ul> <li>certificates are the recommended credential type</li> <li>Your certificate must be one of the following file types:\u00a0<code>.cer</code>,\u00a0<code>.pem</code>,\u00a0<code>.crt</code>.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#add-a-client-secret","title":"Add a client secret","text":"<ul> <li>also known as an\u00a0application password, is a string value your app can use in place of a certificate to identity itself</li> <li>It's often used during development, but is considered less secure than a certificate.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#add-a-scope","title":"Add a scope","text":"<p>The code in a client application requests permission to perform operations defined by your web API by passing an access token along with its requests to the protected resource (the web API).</p> <p>First, follow these steps to create an example scope named Employees.Read.All:</p> <ul> <li>Select\u00a0Microsoft Entra ID, then\u00a0App registrations, and then select your API's app registration.</li> <li>Select\u00a0Expose an API, then\u00a0Add a scope.</li> <li>You're prompted to set an\u00a0Application ID URI\u00a0if you haven't yet configured one. The App ID URI acts as the prefix for the scopes you'll reference in your API's code, and it must be globally unique. You can use the default value provided, which is in the form\u00a0<code>api://</code>\u00a0, or specify a more readable URI like\u00a0<code>https://contoso.com/api</code>.</li> <li>Next, specify the scope's attributes in the\u00a0Add a scope pane.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#configure-permission-for-an-application","title":"Configure permission for an application","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#scopes-and-permissions","title":"Scopes and permissions","text":"<p>OAuth 2.0 is a method through which a third-party app can access web-hosted resources on behalf of a user.</p> <p>Any web-hosted resource (both Microsoft and 3rd party resources) that integrates with the Microsoft identity platform has a resource identifier, or\u00a0Application ID URI</p> <p>In OAuth 2.0, permissions are also called scopes - represented in the Microsoft identity platform as a string value - examples;     - Read a user's calendar by using Calendars.Read     - Write to a user's calendar by using Calendars.ReadWrite     - Send mail as a user using by Mail.Send</p> <p>certain high-privilege permissions can only be granted through administrator consent and requested/granted using the administrator consent endpoint.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#permission-types","title":"Permission types","text":"Permission type Effective permission Description delegated permissions - the least privileged intersection of the delegated permissions the app has been granted (via consent) and the privileges of the currently signed-in user- the app can never have more privileges than the signed-in user - used by apps that have a signed-in user present- the app is delegated permission to act as the signed-in user when making calls to the target resource application permissions - the full level of privileges implied by the permission- For example, an app that has the\u00a0User.ReadWrite.All\u00a0application permission can update the profile of every user in the organization. - used by apps that run without a signed-in user present- for example, apps that run as background services or daemons- only an administrator can consent to application permissions"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#openid-connect-scopes","title":"OpenID Connect Scopes","text":"Scope Description Openid - used by apps who performs sign-in by using OpenID Connect- an app can receive a unique identifier for the user in the form of the sub claim- also gives the app access to the UserInfo endpoint email - can be used with the openid scope and any others- gives the app access to the user's primary email address in the form of the email claim- email claim is included in a token only if an email address is associated with the user account, which isn't always the case profile - can be used with the openid scope and any others- gives the app access to user information such as user's given name, surname, preferred username, and object ID offline_access - gives your app access to resources on behalf of the user for an extended time- your app can receive refresh tokens from the Microsoft identity platform token endpoint- Refresh tokens are long-lived- Your app can get new access tokens as older ones expire ## Requesting individual user consent - In an OpenID Connect or OAuth 2.0 authorization request, an app can request the permissions it needs by using the scope query parameter"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#requesting-consent-for-an-entire-tenant","title":"Requesting consent for an entire tenant","text":"<ul> <li>applications must use the admin consent endpoint to request application permissions.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#grant-tenant-wide-admin-consent-to-applications","title":"Grant tenant-wide admin consent to applications","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#grant-admin-consent-in-app-registrations","title":"Grant admin consent in app registrations","text":"<ul> <li>In Microsoft Azure, browse to\u00a0Microsoft Entra ID\u00a0then\u00a0App registrations\u00a0then Demo app.**</li> <li>On the\u00a0Demo app\u00a0screen, locate and copy and save each\u00a0Application (client) ID\u00a0and\u00a0Directory (tenant) ID\u00a0values so that you can use them later.</li> <li>In the left navigation, under\u00a0Manage, select\u00a0API permissions.</li> <li>Under\u00a0Configured permissions, select\u00a0Grant admin consent.</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#note-granting-tenant-wide-admin-consent-through-app-registrations-will-revoke-any-permissions-that-had-previously-been-granted-tenant-wide-permissions-previously-granted-by-users-on-their-own-behalf-will-not-be-affected","title":"note Granting tenant-wide admin consent through App registrations will revoke any permissions that had previously been granted tenant-wide. Permissions previously granted by users on their own behalf will not be affected.","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#grant-admin-consent-in-enterprise-apps","title":"Grant admin consent in Enterprise apps","text":"<p>You can grant tenant-wide admin consent through Enterprise applications if the application has already been provisioned in your tenant.</p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#construct-the-url-for-granting-tenant-wide-admin-consent","title":"Construct the URL for granting tenant-wide admin consent","text":"<p>If you know the client ID of the application (also known as the application ID), you can build the same URL to grant tenant-wide admin consent.</p> <ol> <li> <p>The tenant-wide admin consent URL follows the following format:\u00a0<code>https://login.microsoftonline.com/{tenant-id}/adminconsent?client_id={client-id}</code>\u00a0where:</p> <ul> <li><code>{client-id}</code>\u00a0is the application's client ID (also known as app ID).</li> <li><code>{tenant-id}</code>\u00a0is your organization's tenant ID or any verified domain name.</li> <li>As always, carefully review the permissions an application requests before granting consent.</li> </ul> </li> </ol>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#admin-restricted-permissions","title":"Admin-restricted permissions","text":"<p>Examples of these kinds of permissions include:</p> <ul> <li>Read all user's full profiles by using User.Read.All</li> <li>Write data to an organization's directory by using Directory.ReadWrite.All</li> <li>Read all groups in an organization's directory by using Groups.Read.All</li> </ul> <p>If your app requires access to admin-restricted scopes for organizations, you should request them directly from a company administrator, also by using the admin consent endpoint. </p>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#using-the-admin-consent-endpoint","title":"Using the admin consent endpoint","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#request-the-permissions-in-the-app-registration-portal","title":"Request the permissions in the app registration portal","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#to-configure-the-list-of-statically-requested-permissions-for-an-application","title":"To configure the list of statically requested permissions for an application","text":"<ol> <li>Go to your application in the Azure portal \u2013 App registrations experience, or create an app if you haven't already.</li> <li>Locate the\u00a0API Permissions\u00a0section, then select\u00a0Add a permission.</li> <li>Select\u00a0Microsoft Graph\u00a0from the list of available APIs and then add the permissions that your app requires.</li> <li>Save\u00a0the app registration.</li> </ol>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#recommended-sign-the-user-into-your-app","title":"Recommended: Sign the user into your app","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#using-permissions","title":"Using permissions","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#implement-application-authorization","title":"Implement application authorization","text":""},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#application-roles","title":"Application roles","text":"<ul> <li>Application roles are used to assign permissions to users</li> <li>You define app roles by using the Azure portal.</li> <li>app role is a tag or claim that can be applied to a user, group, or application that will appear with the token generated when a user authenticates for an app</li> <li>app role data in the token can then be used in the application for authorization purposes.</li> <li>When a user signs into the application, Microsoft Entra ID emits a roles claim for each role that the user has been granted individually and from their group membership.</li> </ul> <p>two ways to declare app roles by using the Azure portal:</p> <ul> <li>App roles UI, then Preview</li> <li>App manifest editor</li> </ul>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#declare-app-roles-using-the-app-roles-ui","title":"Declare app roles using the app roles UI","text":"<ol> <li> <p>Sign in to the\u00a0Microsoft Entra admin center\u00a0using a Global Administrator account.</p> </li> <li> <p>Open the portal menu and then select\u00a0Identity.</p> </li> <li> <p>On the\u00a0Identity\u00a0menu, under\u00a0Applications,\u00a0select\u00a0App registrations.</p> </li> <li> <p>Select\u00a0App roles, and then select\u00a0Create app role.</p> <p></p> </li> <li> <p>In the\u00a0Create app role\u00a0pane, in the\u00a0Display name\u00a0box, enter\u00a0Survey Writer.</p> </li> <li> <p>Under\u00a0Allow member types, select\u00a0User/Groups.</p> </li> <li> <p>In the\u00a0Value\u00a0box, enter\u00a0Survey.Create.</p> </li> <li> <p>In the\u00a0Description\u00a0box, enter\u00a0Writers can create surveys.</p> </li> <li> <p>Notice that the description is a mandatory field.</p> </li> <li> <p>Verify the\u00a0Do you want to enable this app role\u00a0is selected and then select\u00a0Apply.</p> </li> </ol>"},{"location":"SC-300/04%20Access%20Management%20for%20Apps/03%20Implement%20app%20registration/Implement%20app%20registration/#assign-users-and-groups-to-roles","title":"Assign users and groups to roles","text":"<p>To assign users and groups to roles by using the Azure portal:</p> <ol> <li>Sign in to the\u00a0Microsoft Entra admin center.</li> <li>In the Identity navigation menu on the left, open\u00a0Applications\u00a0select\u00a0Enterprise applications.</li> <li>In the\u00a0All applications\u00a0list, select\u00a0Demo app.</li> <li>This app was created in an earlier exercise.</li> <li>Under\u00a0Manage, select\u00a0Users and groups.</li> <li>On the menu, select\u00a0+ Add user/group.</li> <li>On the\u00a0Add Assignment\u00a0dialog, select\u00a0Users and groups.</li> <li>A list of users and security groups is displayed. You can search for a certain user or group, as well as select multiple users and groups that appear in the list.</li> <li>After you have selected users and groups, select\u00a0Select.</li> <li>When using the\u00a0Select a role\u00a0assignment, all the roles that you've defined for the application are displayed.</li> <li>Choose a role and then select\u00a0Select.</li> <li>Select\u00a0Assign\u00a0to finish the assignment of users and groups to the app.</li> <li>Confirm that the users and groups you added appear in the\u00a0Users and groups\u00a0list.</li> </ol>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/","title":"Microsoft Defender for Cloud Apps","text":"<ul> <li>Discover and control the use of Shadow IT</li> <li>Protect your sensitive information anywhere in the cloud</li> <li>Protect against cyberthreats and anomalies</li> <li>Assess the compliance of your cloud apps</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#defender-for-cloud-apps-architecture","title":"Defender for Cloud Apps architecture","text":""},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#cloud-discovery","title":"Cloud Discovery","text":"<ul> <li>uses an organization's traffic logs to dynamically discover and analyze the cloud apps that it's using</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#sanctioning-and-unsanctioning-an-app","title":"Sanctioning and unsanctioning an app","text":"<ul> <li>Microsoft ranked and scored the apps based on industry standards</li> <li>Microsoft Defender for Cloud Apps lets an organization know how risky an app is</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#app-connectors","title":"App connectors","text":"<ul> <li>facilitate the integration between the Cloud App Security service and cloud applications</li> <li>the app administrator authorizes Microsoft Defender for Cloud Apps to access the app</li> <li>Then, Microsoft Defender for Cloud Apps queries the app for activity logs, and it scans data, accounts, and cloud content</li> <li>Microsoft Defender for Cloud Apps can enforce policies, detects threats, and provides governance actions for resolving issues.</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#conditional-access-app-control-protection","title":"Conditional Access App Control protection","text":"<ul> <li>uses reverse proxy architecture</li> <li>Organizations typically deploy the reverse proxy server in the same network segment as the application server. <ul> <li>The proxy server routes incoming traffic to the appropriate backend server based on the requested URL. </li> <li>For Microsoft Defender for Cloud Apps, organizations configure the reverse proxy server to redirect traffic to the Microsoft Defender proxy server for inspection and policy enforcement before forwarding it to the application server.</li> </ul> </li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#policy-control","title":"Policy control","text":"<ul> <li>detect and remediate</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#deploy-microsoft-defender-for-cloud-apps","title":"Deploy Microsoft Defender for Cloud Apps","text":""},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#pre-requisites","title":"Pre-requisites","text":"<ul> <li>must obtain a license for every user protected</li> <li>you'll receive an email with activation information and a link to the MDCA portal</li> <li>must be a Global admin or Security admin </li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#deployment-steps","title":"Deployment steps","text":""},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#step-1-set-instant-visibility-protection-and-governance-actions-for-your-apps-required","title":"Step 1. Set instant visibility, protection, and governance actions for your apps (REQUIRED)","text":"<ul> <li>System -&gt; Settings -&gt; Cloud apps -&gt; Connected Apps -&gt; App Connectors -&gt; Connect an app </li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#step-2-protect-sensitive-information-with-dlp-policies-recommended","title":"Step 2.  Protect sensitive information with DLP policies (Recommended)","text":"<ul> <li>System -&gt; Settings -&gt; Cloud apps -&gt; Information Protection  </li> <li>Files -&gt; Enable File monitoring</li> <li>Microsoft Information Protection</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#step-3-control-cloud-apps-with-policies-required","title":"Step 3. Control cloud apps with policies (REQUIRED)","text":"<ul> <li>Cloud apps -&gt; Policies -&gt; Policy management</li> <li>use policies to help monitor trends, see security threats, and generate customized reports and alerts</li> <li>create governance actions, and set data loss prevention and file-sharing controls</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#step-4-set-up-cloud-discovery-required","title":"Step 4. Set up Cloud Discovery (REQUIRED)","text":"<ul> <li>Integrate with Microsoft Defender for Endpoint or Zscaler</li> <li>System -&gt; Settings -&gt; Cloud apps  -&gt; Cloud Discovery -&gt; Automatic log upload -&gt; Add data source</li> <li>Snapshot reports</li> <li>Continuous reports</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#step-5-deploy-conditional-access-app-control-for-catalog-apps-recommended","title":"Step 5. Deploy Conditional Access App Control for catalog apps (RECOMMENDED)","text":"<ul> <li>If you have Microsoft Entra ID, you can use inline controls such as Monitor only and Block downloads.</li> <li>System -&gt; Settings -&gt; Cloud apps -&gt; Connected Apps -&gt; Conditional Access App Control apps </li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#step-6-personalize-your-experience-recommended","title":"Step 6. Personalize your experience (RECOMMENDED)","text":"<ul> <li>System -&gt; Settings -&gt; Cloud apps -&gt; System -&gt; Mail settings</li> <li>System -&gt; Settings -&gt; Cloud apps -&gt; My account -&gt; My email notifications</li> <li>System -&gt; Settings -&gt; Cloud apps  -&gt; Cloud Discovery -&gt;Score metrics</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#step-7-organize-the-data-according-to-your-needs-recommended","title":"Step 7. Organize the data according to your needs (RECOMMENDED)","text":"<p>To create IP address tags *  it's easier to create policies that fit an organization's needs, accurately filter data, and create continuous reports. * System -&gt; Settings -&gt; System -&gt; IP address ranges</p> <p>To add domains * System -&gt; Settings -&gt; System -&gt; Organization details</p>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#file-policies-in-cloud-apps","title":"File policies in Cloud Apps","text":"<ul> <li>can monitor any file type based on more than 20 metadata filters (for example, access level, file type, and so on)</li> </ul> <p>The Microsoft Defender for Cloud Apps engine combines the following three aspects under each policy: 1. Content scan based on preset templates or custom expressions. 2. Context filters     * User roles     * File metadata     * Sharing level     * Organizational group integration     * Collaboration context     * Other customizable attributes 3. Automated actions for governance and remediation.</p> <p>Note</p> <p>The first triggered policy guarantees the only governance action the system applies. For example, if a file policy has already applied a sensitivity label to a file, a second file policy can't apply another sensitivity label to it.</p>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#policy-types","title":"Policy types","text":"<ol> <li> <p>Activity</p> <ul> <li>uses app APIs to monitor specific activities by users or follow unexpectedly high rates of a certain type of activity </li> </ul> </li> <li> <p>File</p> <ul> <li>scan cloud apps for:<ul> <li>specified file types - shared, shared with external domains</li> <li>data - proprietary info, personal data, credit card info, other types of data</li> </ul> </li> </ul> </li> <li> <p>Malware detection</p> <ul> <li>identify malicious files in the cloud storage</li> <li>automatically approve or revoke it</li> </ul> </li> <li> <p>Anomaly detection</p> <ul> <li>look for unusual activities on the organization's cloud</li> <li>detection is based on risk factors you set</li> <li>risk factors alerts you when something happens that's outside the org's baseline or from user's activity</li> </ul> </li> <li> <p>App discovery</p> <ul> <li>set alerts to notify when new app is detected</li> </ul> </li> <li> <p>Access</p> <ul> <li>real time monitoring and control over user logins to its cloud apps</li> </ul> </li> <li> <p>Session</p> <ul> <li>real time monitoring and control oevr users activity in its cloud apps</li> </ul> </li> <li> <p>OAuth app</p> <ul> <li>enable orgs to investiagte which permissions each OAuth app requested, and then automatically approve or revoke them</li> </ul> </li> <li> <p>OAuth app anomaly detection</p> </li> </ol>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#identifying-risk","title":"Identifying Risk","text":"<ul> <li> <p>you can configure any policy and alert to be associated with one of the risks below</p> </li> <li> <p>Threat detection</p> <ul> <li>Are there suspicious activities threatening your cloud environment?   </li> <li>detect behavior that could indicate that a user is misusing data</li> </ul> </li> <li>Privileged accounts<ul> <li>Do you need to monitor admin accounts?    </li> </ul> </li> <li>Compliance<ul> <li>Are your compliance requirements breached?    </li> <li>Catalog and identify sensitive or regulated data stored in file-sync services, such as sharing permissions for each file.</li> </ul> </li> <li>DLP<ul> <li>Are proprietary files shared publicly?</li> <li>Do you need to quarantine files?</li> </ul> </li> <li>Cloud discovery<ul> <li>Are new apps used in your organization?   </li> </ul> </li> <li>Sharing control<ul> <li>How is data shared in your cloud environment? </li> </ul> </li> <li>Access control<ul> <li>Who accesses what from where? </li> <li>Continuously monitor behavior and detect anomalous activities, including high-risk insider and external attacks</li> <li>Detect suspicious sign-in events, including multifactor authentication failures, disabled account sign-in failures, and impersonation events.</li> <li>apply a policy to alert, block, or require identity verification for any app or specific action within an app.</li> <li>Enables on-premises and mobile access control policies based on user, device, and geography with coarse blocking and granular view, edit, and block.</li> </ul> </li> <li>Configuration control<ul> <li>Are unauthorized changes made to your configuration?  </li> </ul> </li> </ul> <p>When you create a new policy, the system automatically enables it.</p>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#manage-and-respond-to-alerts-in-microsoft-defender-for-cloud-apps","title":"Manage and respond to alerts in Microsoft Defender for Cloud Apps","text":"<p>Alerts -&gt;  Add filter -&gt; Status, Service/detection sources -&gt; Microsoft Defender for Cloud Apps</p> <p>There are three types of violations you must deal with when investigating alerts: 1. Serious violations. Require immediate response.  2. Questionable violations. Require further investigation.  3. Authorized violations or anomalous behavior. Can result from legitimate use.</p>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#alert-types","title":"Alert types","text":"<ol> <li>Activity policy violation</li> <li>File policy violation    </li> <li>Compromised account</li> <li>Inactive account </li> <li>New admin user   </li> <li>New admin location   </li> <li>New location </li> <li>New discovered service   </li> <li>Suspicious activity  </li> <li>Use of personal account </li> </ol>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#configure-cloud-discovery","title":"Configure Cloud Discovery","text":""},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#cloud-discovery-reports","title":"Cloud Discovery reports","text":"<ol> <li>Snapshot reports</li> <li>Continuous reports<ul> <li>Microsoft Defender for Endpoint integration</li> <li>Log collector</li> <li>Secure Web Gateway (SWG).</li> </ul> </li> <li>Reports created using the Cloud Discovery API</li> </ol>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#log-process-flow-from-raw-data-to-risk-assessment","title":"Log process flow: From raw data to risk assessment","text":"<ol> <li>Upload</li> <li>Parse</li> <li>Analyze</li> <li> <p>Generate report</p> </li> <li> <p>Cloud Discovery analyzes and updates the extracted log file data four times a day.</p> </li> <li>The process takes between a few minutes to several hours depending on the amount of data processed.</li> </ol>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#using-traffic-logs-for-cloud-discovery","title":"Using traffic logs for Cloud Discovery","text":"<p>Cloud Discovery requires web-traffic data with the following attributes:</p> <ul> <li>Date of the transaction</li> <li>Source IP</li> <li>Destination IP address</li> <li>Source user - highly recommended</li> <li>Destination URL recommended (URLs provide higher accuracy for cloud app detection than IP addresses)</li> <li>Total amount of data (data information is highly valuable)</li> <li>Amount of uploaded or downloaded data (provides insights about the usage patterns of the cloud apps)</li> <li>Action taken (allowed/blocked)</li> </ul> <p>Traffic logs pre-requisites * Cloud Discovery supports the data source of your traffic logs else, define a custom parser * Log format matches the expected standard format (format checked upon upload by the Log tool). * Events aren't more than 90 days old. * The log file is valid and includes outbound traffic information.</p>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#create-snapshot-cloud-discovery-reports","title":"Create snapshot Cloud Discovery reports","text":""},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#configure-automatic-log-upload-for-continuous-reports","title":"Configure automatic log upload for continuous reports","text":"<ul> <li>log collector automate log upload from your network</li> <li>log collector runs on your network and receives logs over Syslog or FTP</li> <li>then automatically processes, compresses, and transmits each log to the portal</li> <li>log collector uploads FTP logs to Microsoft Defender for Cloud Apps after the file finished the FTP transfer to the log collector.</li> <li> <p>For Syslog, the log collector writes the received logs to the disk. Then the collector uploads the file to Microsoft Defender for Cloud Apps when the file size is larger than 40 KB</p> </li> <li> <p>The log collector compresses data before uploading it.</p> </li> <li>The outbound traffic on the log collector is 10% of the size of the traffic logs it receives.</li> <li>Once the upload process completes, Microsoft Defender for Cloud Apps moves the log to a backup directory.</li> <li>The backup directory stores the last 20 logs and old logs are deleted if new one arrives. </li> <li>Whenever the log collector disk space is full, the log collector drops new logs until it has more free disk space. </li> <li>You should receive a warning on the Log collectors tab of the Upload logs automatically settings when this scenario occurs.</li> </ul>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#troubleshoot-cloud-discovery-in-microsoft-defender-for-cloud-apps","title":"Troubleshoot Cloud Discovery in Microsoft Defender for Cloud Apps","text":"<p>https://learn.microsoft.com/en-us/training/modules/implement-app-protection-use-microsoft-defender-cloud-apps/7-troubleshoot-cloud-discovery</p>"},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#microsoft-defender-for-endpoint-integration","title":"Microsoft Defender for Endpoint integration","text":""},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#log-parsing-errors","title":"Log parsing errors","text":""},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#log-collector-errors","title":"Log collector errors","text":""},{"location":"SC-400/Microsoft%20Defender%20for%20Cloud%20Apps/#discovery-dashboard-errors","title":"Discovery dashboard errors","text":""},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/","title":"DLP Overview","text":"<p>I PASSED!!!</p>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#elements-of-dlp","title":"Elements of DLP","text":"<ul> <li>Where to protect the content</li> <li>When and how to protect the content<ul> <li>Conditions</li> <li>Actions</li> </ul> </li> </ul>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#identify-content-to-protect","title":"Identify content to protect","text":"<ul> <li>use the Data Classification solution to find what sensitive information will need to be protected</li> <li>use Content explorer and Activity explorer</li> </ul> <p>Content explorer</p> <p></p> <p>Activity explorer</p> <p></p>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#identify-sensitive-data-with-optical-character-recognition-preview","title":"Identify sensitive data with optical character recognition (preview)","text":"<ul> <li>enables Microsoft Purview to scan content in images for sensitive information</li> <li>supports more than 150 languages</li> <li>optional feature that is first turned on at the tenant level</li> <li>after it's enabled, you choose the locations where you want to scan images<ul> <li>Exchange -for outgoing emails only</li> <li>SharePoint</li> <li>OneDrive</li> <li>Teams</li> <li>Windows devices</li> </ul> </li> <li>Once set up, the following policies will be applied:<ul> <li>data loss prevention (DLP)</li> <li>records management</li> <li>insider risk management (IRM)</li> </ul> </li> </ul>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#workflow-at-a-glance","title":"Workflow at a glance","text":"<p>Phase 1: Create Azure subscription if needed Phase 2: Set up pay-as-you-go billing to enable OCR.  Phase 3: Configure OCR scanning settings    </p>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#configure-your-ocr-settings","title":"Configure your OCR settings","text":"<ol> <li>In the Microsoft Purview compliance portal, go to Settings.</li> <li>Select Optical character recognition (OCR) (preview) to enter your OCR configuration settings.</li> <li>Select the locations you want to scan images. Then, for each location and solution, define the scope (users/groups/sites) for the OCR. </li> </ol> <p>OCR settings generally take effect about an hour after being turned on.</p>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#supported-file-types","title":"Supported file types","text":"<ul> <li>JPEG, JPG, PNG, BMP, TIFF, and PDF (image only)</li> <li>File size &lt; 20 MB (Exchange and Teams)</li> <li>File size &lt; 50 MB (SharePoint, OneDrive, Windows Endpoints)</li> <li>Resolution - min: 50x50, max: 16000 x 16000</li> </ul>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#limitations","title":"Limitations","text":"<ul> <li>Only images with machine-typed text are supported.</li> <li>Only images uploaded after OCR has been enabled are scanned.</li> <li>Only stand-alone images are scanned.</li> <li>SharePoint and OneDrive support only the following file types: JPEG, JPG, PNG, and BMP.</li> <li>Data loss prevention policy tips aren't supported for images in Exchange.</li> <li>Scanning images in compressed/archive files isn't supported.</li> <li>If you exclude a path in the endpoint data loss prevention settings, OCR doesn't scan images in those folders.</li> <li>When OCR is turned on for Windows devices, the devices start sending messages to the cloud for scanning. The default bandwidth limit is 1024 MB of data per device per day. OCR stops scanning images once this daily limit is reached. If you want to continue scanning images, you can increase the bandwidth limit.</li> </ul>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#help-protect-sensitive-images-with-microsoft-purview-interactive-guide","title":"Help protect sensitive images with Microsoft Purview interactive guide","text":"<p>Interactive guide</p>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#define-policy-settings-for-your-dlp-policy","title":"Define policy settings for your DLP policy","text":"<p>https://learn.microsoft.com/en-us/training/modules/m365-compliance-information-prevent-data-loss/define-policy-settings</p> <p>Interactive guide</p> <p>2 types of workflows when defining a DLP pollicy:</p> <ol> <li>Simple workflow</li> <li>Advanced workflow</li> </ol>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#customize-advanced-dlp-rules","title":"Customize advanced DLP rules","text":"<ul> <li>Two rules are defined by default when you use a policy template<ul> <li>Low volume</li> <li>High volume</li> </ul> </li> <li>If you choose the Custom option, you must define your own rules</li> </ul>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#rules-includes-the-following","title":"Rules includes the following:","text":"<ul> <li>Conditions <ul> <li>Content contains</li> <li>Content is shared from Microsoft 365 </li> </ul> </li> <li>Exceptions </li> <li>Actions <ul> <li>Restrict access or encrypt the content in Microsoft 365 locations</li> <li>Audit or restrict activities on Windows devices</li> </ul> </li> <li>User notifications</li> <li>User overrides </li> <li>Incident reports</li> <li>Additional options</li> </ul>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#prepare-endpoint-dlp","title":"Prepare Endpoint DLP","text":"<p>https://learn.microsoft.com/en-us/training/modules/m365-compliance-information-prevent-data-loss/prepare-endpoint-dlp</p>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#license-required","title":"License required:","text":"<ul> <li>Microsoft 365 E5</li> <li>Microsoft 365 A5 (EDU)</li> <li>Microsoft 365 E5 compliance</li> <li>Microsoft 365 A5 compliance</li> <li>Microsoft 365 E5 information protection and governance</li> <li>Microsoft 365 A5 information protection and governance</li> </ul>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#onboard-devices","title":"Onboard devices","text":"<p>Purview -&gt; Settings -&gt; Device Onboarding</p> <p>Roles required for onborder: - Global admin - Security admin - Compliance admin</p>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#onboarding-options-for-windows-1011","title":"Onboarding options for Windows 10/11","text":"<ul> <li>Local script</li> <li>Group policy</li> <li>Microsoft Endpoint Configuration Manager</li> <li>Mobile Device Management/Microsoft Intune</li> <li>VDI onboarding scripts for non-persistent machines</li> </ul>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#onboarding-options-for-mac","title":"Onboarding options for Mac","text":"<ul> <li>Microsoft Intune</li> <li>Intune for Microsoft Defender for Endpoint customers</li> <li>JAMF Pro</li> <li>JAMF Pro for Microsoft Defender for Endpoint customers</li> </ul>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#onboarding-using-local-script","title":"Onboarding using local script","text":"<ul> <li>up to 10 machines only</li> <li>local script is meant for testing purposes</li> </ul> <p>Steps:</p> <ol> <li>Get the configuration package .zip file (DeviceComplianceOnboardingPackage.zip) package from Microsoft Purview compliance portal</li> <li>In the navigation pane, select\u00a0Settings &gt; Device\u00a0onboarding.</li> <li>In the\u00a0Deployment method\u00a0field, select\u00a0Local Script.</li> <li>Select\u00a0Download package\u00a0and save the .zip file.</li> <li>Extract the contents of the configuration package to a location on the device you want to onboard (for example, the Desktop). You should have a file named\u00a0DeviceOnboardingScript.cmd.</li> <li>Open an elevated command-line prompt on the device and run the script:</li> <li>Go to\u00a0Start\u00a0and type\u00a0cmd.</li> <li>Right-click\u00a0Command prompt\u00a0and select\u00a0Run as administrator.</li> <li>Type the location of the script file. If you copied the file to the desktop, type:\u00a0%userprofile%\\Desktop\\WindowsDefenderATPOnboardingScript.cmd</li> <li>Press the\u00a0Enter\u00a0key or select\u00a0OK.</li> </ol>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#configure-global-endpoint-dlp-settings","title":"Configure global Endpoint DLP settings","text":"<p>Data loss prevention -&gt; Data loss prevention settings -&gt; Endpoint settings - apply to all existing and new DLP policies that protect content on Windows devices. - only apply to content impacted by DLP policies</p>"},{"location":"SC-400/Data%20Loss%20Prevention/DLP%20Overview/#settings","title":"Settings:","text":"<ul> <li>Restricted app groups</li> <li>Unallowed Bluetooth apps</li> <li>Browser and domain restrictions to sensitive items</li> <li>Additional settings for Endpoint DLP</li> <li>Always audit file activity for devices</li> <li>Auto-quarantine file from unallowed apps</li> <li>Advanced classification</li> <li>Business justification in policy tips</li> </ul>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/","title":"01. Intro to ISC","text":""},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#know-your-data","title":"Know your data","text":"<ol> <li>Describe the categories of sensitive information you want to protect</li> <li>Discover and classify sensitive data</li> <li>View and manage your sensitive items</li> </ol>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#data-classification-concepts","title":"Data classification concepts","text":"<ol> <li>Sensitive information types</li> <li>Trainable classifiers</li> <li>Exact data match (EDM)</li> </ol>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#data-exploration-and-monitoring-tools","title":"Data exploration and monitoring tools","text":"<ol> <li>Data and content explorer - where sensitive data is stored in your organization</li> <li>Activity explorer - how sensitive data is being accessed and used</li> </ol>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#protect-your-data","title":"Protect your data","text":""},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#framework-for-protecting-sensitive-data-effectively","title":"Framework for protecting sensitive data effectively:","text":"<ol> <li>Define your sensitivity labels</li> <li>Apply labels using Microsoft 365 apps and services</li> <li>Use Microsoft Defender for Cloud Apps to apply labels in the cloud</li> <li>Use the scanner to apply labels on-premises</li> <li>Use Microsoft Purview Data Map to apply labels to schematized data assets in Azure</li> </ol>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#how-sensitivity-labels-protect-your-data","title":"How sensitivity labels protect your data","text":"<ol> <li>Encryption</li> <li>Access control</li> <li>Visual markings</li> </ol>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#securing-emails-with-microsoft-purview-message-encryption","title":"Securing emails with Microsoft Purview Message Encryption","text":"<ol> <li>Automatic encryption</li> <li>External access</li> </ol>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#protecting-data-beyond-microsoft-365","title":"Protecting data beyond Microsoft 365","text":"<ol> <li>Microsoft Defender for Cloud Apps</li> <li>Microsoft Purview Information Protection Scanner</li> </ol>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#prevent-data-loss","title":"Prevent data loss","text":""},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#framework-for-effectively-preventing-data-loss","title":"Framework for effectively preventing data loss","text":"<ol> <li>Learn about DLP</li> <li>Plan your DLP implementation</li> <li>Design and create a DLP policy</li> <li>Tune your DLP policies</li> </ol>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#endpoint-dlp","title":"Endpoint DLP","text":"<ul> <li>Monitor and block risky actions, such as copying sensitive data to external USB drives or printing confidential files.</li> <li>Prevent unauthorized apps or processes from accessing, modifying, or sharing sensitive information on endpoints.</li> <li>Maintain consistent protection across all scenarios, whether data is at rest, in use, or being transferred between devices.</li> </ul>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#govern-your-data","title":"Govern your data","text":""},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#microsoft-purview-data-lifecycle-management","title":"Microsoft Purview Data Lifecycle Management","text":"<ul> <li> <p>helps manage the lifecycle of content by applying retention and deletion policies to ensure compliance</p> </li> <li> <p>Understand how retention and deletion work for Microsoft 365 services</p> </li> <li>Create retention policies and, if needed, retention labels for exceptions</li> <li>Manage mailboxes</li> <li>Import PST files to online mailboxes</li> </ul>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#microsoft-purview-records-management","title":"Microsoft Purview Records Management","text":"<ul> <li> <p>records are immutable, meaning they can't be altered once classified as records, ensuring legal and regulatory compliance</p> </li> <li> <p>Understand the records management solution</p> </li> <li>Use a file plan to manage your retention schedules</li> <li>Apply your retention labels</li> <li>Manage the permanent deletion of data</li> </ul>"},{"location":"SC-400/Information%20Protection/01.%20Intro%20to%20ISC/#retention-labels-and-policies","title":"Retention labels and policies","text":"<ol> <li>Retention labels - apply to specific items</li> <li>Retention label policies</li> <li>Retention policies - apply to entire workload</li> </ol>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/","title":"02. Classify Data for protection and Governance","text":""},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#data-classification-solution","title":"Data classification solution","text":"<ol> <li>Overview</li> <li>Content explorer</li> <li>Activity explorer</li> <li>Sensitive info types</li> <li>Trainable classifiers</li> </ol>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#classify-data-using-sensitive-information-types","title":"Classify data using sensitive information types","text":"<p>Interactive guide</p> <p>3 ways of identifying items: 1. Manually by users 2. Automated pattern recognition, like sensitive information types 3. Machine learning</p>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#sensitive-information-types-are-used-in","title":"Sensitive information types are used in","text":"<ol> <li>Data Loss Prevention policies</li> <li>Sensitivity labels</li> <li>Retention labels</li> <li>Insider risk management</li> <li>Communication compliance</li> <li>Autolabeling policies</li> <li>Microsoft Priva</li> </ol>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#categories-of-sensitive-information-types","title":"Categories of sensitive information types","text":"<ol> <li>Built-in sensitive information types</li> <li>Named entity sensitive information types</li> <li>Custom sensitive information types</li> <li>Exact data match sensitive information types</li> </ol>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#fundamental-parts-of-a-sensitive-information-type","title":"Fundamental parts of a sensitive information type","text":"<ol> <li>Name</li> <li>Description</li> <li>Pattern<ol> <li>Primary element</li> <li>Supporting element</li> <li>Confidence Level</li> <li>Proximity </li> </ol> </li> </ol>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#creating-custom-sensitive-information-types","title":"Creating custom sensitive information types","text":"<ol> <li>Use the UI </li> <li>Use EDM</li> <li>Use PowerShell</li> </ol>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#provide-matchnot-a-match-accuracy-feedback-in-sensitive-info-types","title":"Provide match/not a match accuracy feedback in sensitive info types","text":""},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#classify-data-using-trainable-classifiers","title":"Classify data using trainable classifiers","text":"<p>Interactive guide</p>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#types-of-classifiers","title":"Types of classifiers","text":"<ul> <li>Pre-Trained Classifiers</li> <li>Custom Trainable Classifiers</li> </ul>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#custom-trainable-classifiers","title":"Custom trainable classifiers","text":"<p>setup process: 1. Seed 2. Test 3. Publish</p>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#one-time-setup","title":"One-time setup","text":"<ul> <li>A one-time scan must be completed before creating any custom trainable classifiers. This scan is needed so Microsoft 365 can learn more about the content in your organization. This process takes 7 to 14 days. </li> </ul>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#seed","title":"Seed","text":""},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#step-1-prepare-sample-data","title":"Step 1: Prepare sample data:","text":"<ul> <li>consist of known positive samples</li> <li>store the sample in SPO</li> <li>at least 50, max 500 samples</li> </ul>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#step-2-create-trainable-classifier","title":"Step 2: Create trainable classifier","text":"<ul> <li>it takes up to 24 hours to build the prediction model</li> <li>In progress classifier processes the seed data</li> <li>Need test items - classifier is finished processing the seed data</li> </ul>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#test","title":"Test","text":""},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#step-1-prepare-test-data","title":"Step 1: Prepare test data","text":"<ul> <li>create a new SPO folder for the test content and wait for the folder to be indexed</li> <li>mix of strong positives, strong negatives, and less obvious examples</li> <li>at least 200 items, max 10,000</li> <li>must be different from the initial seed data</li> <li>manually review the results</li> </ul>"},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#step-2-test-predictive-model","title":"Step 2: Test predictive model","text":""},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#step-3-evaluate-predictions","title":"Step 3: Evaluate predictions","text":""},{"location":"SC-400/Information%20Protection/02.%20Classify%20Data%20for%20protection%20and%20Governance/#monitor-the-use-of-sensitive-information-interactive-guide","title":"Monitor the use of sensitive information interactive guide","text":"<p>Interactive guide</p> <ul> <li>Content explorer</li> <li>Activity explorer</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/","title":"03. Create and manage sensitive information types","text":""},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#why-are-sensitive-information-types-important","title":"Why are sensitive information types important?","text":"<ol> <li>Automate data discovery</li> <li>Prevent data loss</li> <li>Ensure compliance</li> <li>Minimize risk</li> </ol>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#built-in-sensitive-information-types","title":"Built-in sensitive information types","text":"<ul> <li>preconfigured to detect common sensitive data for general compliance and data loss prevention (DLP) needs</li> <li>used with standard types of SITs</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#advantages-of-built-in-sits","title":"Advantages of built-in SITs","text":"<ol> <li>Quick deployment</li> <li>Managed by Microsoft</li> <li>Broad coverage</li> </ol>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#custom-sensitive-information-types","title":"Custom sensitive information types","text":"<ul> <li>define specific patterns and rules for identifying SITs unique to the org</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#features-of-custom-sits","title":"Features of custom SITs","text":"<ol> <li>Exact data match (EDM)</li> <li>Document fingerprinting</li> <li>Keyword dictionaries</li> </ol>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#create-and-manage-custom-sensitive-information-types","title":"Create and manage custom sensitive information types","text":"<p>https://learn.microsoft.com/en-us/training/modules/create-manage-sensitive-information-types/3-create-manage-custom</p>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#before-you-begin","title":"Before you begin","text":"<ol> <li>Regular expressions</li> <li>Proximity <ul> <li>defines how close the primary pattern (like an ID number) must be to supporting keywords (like \"employee\" or \"ID badge\")</li> </ul> </li> <li>Keyword lists<ul> <li>predefined terms commonly found near sensitive data.</li> </ul> </li> <li>Keyword dictionaries<ul> <li>a more extensive collection of terms for complex or industry-specific detection needs</li> </ul> </li> <li>SIT functions<ul> <li>help validate sensitive information through extra checks</li> </ul> </li> <li>Confidence levels<ul> <li>let you control how much supporting evidence is required to classify data as sensitive</li> </ul> </li> <li>SIT limits</li> </ol>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#fundamental-parts-of-a-sensitive-information-type","title":"Fundamental parts of a sensitive information type","text":""},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#create-and-manage-exact-data-match-sensitive-info-types","title":"Create and manage exact data match sensitive info types","text":"<p>https://learn.microsoft.com/en-us/training/modules/create-manage-sensitive-information-types/4-describe-custom-with-exact-data-match?tabs=classic</p> <ul> <li>EDM-based classification enables you to create custom sensitive types that match exact values from a database</li> <li>can hold up to 100 million rows of data</li> <li>can be refreshed daily to reflect changes</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#whats-different-in-an-edm-sit","title":"What's different in an EDM SIT","text":"<ul> <li>it matches exact data values instead of relying only on patterns or keywords</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#schema","title":"Schema","text":"<ul> <li>an XML file that serves as the blueprint for your EDM SIT</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#sensitive-information-source-table","title":"Sensitive information source table","text":"<ul> <li>the actual dataset used for matching</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#rule-package","title":"Rule package","text":"<p>rule package in an EDM SIT defines: 1. Matches      - specify the primary element used for exact lookups, such as a regular expression or a function. 2. Classification      - determines the type of sensitive information being searched for 3. Supporting elements 4. Confidence levels 5. Proximity  6. Supporting elements</p>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#primary-and-secondary-support-elements","title":"Primary and secondary support elements","text":"<ul> <li>primary element - key data point you're looking to protect</li> <li>secondary supporting element</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#implement-document-fingerprinting","title":"Implement document fingerprinting","text":"<p>https://learn.microsoft.com/en-us/training/modules/create-manage-sensitive-information-types/5-implement-document-fingerprint</p> <ul> <li>converts common forms, such as a standard contract or patent application, into a unique sensitive information type (SIT)</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#features-of-document-fingerprinting","title":"Features of document fingerprinting","text":"<ol> <li>Works across multiple platforms <ul> <li>can be applied to Exchange, SharePoint, OneDrive, Teams, and devices</li> </ul> </li> <li>Supports multiple matching types<ul> <li>partial and exact matching</li> </ul> </li> <li>Multilingual detection</li> <li>Improved accuracy</li> </ol>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#how-document-fingerprinting-works","title":"How document fingerprinting works","text":"<ul> <li>identifying the unique word patterns within a document</li> <li>DLP analyzes this pattern and generates a fingerprint in the form of a small Unicode XML file containing a hash value</li> <li>This fingerprint becomes a SIT that can be associated with your DLP policies to ==detect outbound ==documents that match the original form</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#supported-file-types","title":"Supported file types","text":"<ul> <li>supports most file types allowed in mail flow rules</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#limitations-of-document-fingerprinting","title":"Limitations of document fingerprinting","text":"<p>doesn't detect sensitive information in: 1. Password protected files 2. Image only files 3. Files missing text from the original form 4. Files larger than 4 MB</p>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#matching-options-in-document-fingerprinting","title":"Matching options in document fingerprinting","text":"<ol> <li>Partial matching<ul> <li>Low confidence</li> <li>Medium confidence</li> <li>High confidence</li> </ul> </li> <li>Exact matching</li> </ol> <p>To use document fingerprinting with devices, Advanced classification scanning and protection must be turned on.</p>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#named-entities","title":"Named entities","text":"<ul> <li>use to detect person names, physical addresses, and medical terms and conditions</li> <li>complex dictionary and pattern-based classifiers</li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#2-types-of-named-entities","title":"2 types of named entities:","text":"<ul> <li>Unbundled<ul> <li>have a narrower focus, such as a single region, or a single class of terms</li> </ul> </li> <li>Bundled<ul> <li>detect all possible matches in a class, such as All physical addresses</li> <li>To use bundled SITs, you must activate Advanced classification scanning and protection for the relevant data loss prevention settings before they're discoverable.</li> </ul> </li> </ul>"},{"location":"SC-400/Information%20Protection/03.%20Create%20and%20manage%20sensitive%20information%20types/#create-keyword-dictionary","title":"Create keyword dictionary","text":"<p>https://learn.microsoft.com/en-us/training/modules/create-manage-sensitive-information-types/6-create-keyword-dictionary</p> <ul> <li>files that contain lists of sensitive terms, phrases, or keywords used to detect and flag information that requires protection</li> </ul>"},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/","title":"04. Microsoft 365 Encryption","text":""},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/#bitlocker-volume-level-encryption","title":"BitLocker volume level encryption","text":"<p>BitLocker keys management categories: 1. BitLocker-managed keys 2. BitLocker recovery keys</p>"},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/#service-level-encryption","title":"Service level encryption","text":"<ul> <li>root keys are used to protect key hierarchies used by service encryption regardles sof the key management option</li> <li>Service encryption includes regular key rotation to maintain key security. </li> <li>Key rotation occurs through automated service code on internally defined schedules based on key type</li> <li>Customers who use Customer Key are responsible for rotating their root Customer Keys</li> </ul>"},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/#exchange-online","title":"Exchange Online","text":"<ul> <li>uses BitLocker to encrypt all mailbox data at the mailbox level</li> </ul>"},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/#sharepoint-online","title":"SharePoint Online","text":"<ul> <li>unique per-file keys that are always exclusive to a single tenant</li> <li>During upload, each file (including each updated file) is split into chunks and are individually encrypted with their own unique AES 256-bit key.</li> <li>The chunks are then stored as blobs in Azure Storage, randomly distributed between different blob containers</li> <li>The chunks, keys, and the map used to reconstruct the files upon download are all stored in separate locations</li> <li>Azure storage has no access to the encrypted data.</li> </ul>"},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/#2-options-for-service-level-encryption-key-management","title":"2 options for service level encryption key management:","text":"<ol> <li>Microsoft Managed Keys </li> <li>Customer Key</li> </ol>"},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/#service-encryption-in-microsoft-purview","title":"Service encryption in Microsoft Purview","text":""},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/#customer-key-management-using-customer-key","title":"Customer key management using Customer Key","text":""},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/#availability-key","title":"Availability key","text":"<ul> <li>provide recovery capability from the unanticipated loss of customer-managed root keys</li> <li>is a root key provisioned and protected by Microsoft, which is functionally equivalent to the root keys supplied by the customer using the Customer Key feature</li> <li>is automatically generated and provisioned when customers create a data encryption policy</li> <li>By design, no one at Microsoft has access to the availability key: it's only accessible by Microsoft 365 service code.</li> <li>customers can't directly access the availability key</li> <li>Microsoft provides customers with sole authority over the disablement or destruction of the availability key</li> <li>Should the customer decide to exit the service, the availability key is purged as part of the data purge process.</li> </ul>"},{"location":"SC-400/Information%20Protection/04.%20Microsoft%20365%20Encryption/#how-data-is-encrypted-in-transit","title":"How data is encrypted in-transit","text":"<ul> <li>Inter-datacenter communications between Microsoft servers - use TLS or IPsec</li> <li>Customer-facing servers - TLS</li> <li>Microsoft owns and manages its own certificate authority to manage the certificates used for TLS encryption alongside third-party solutions.</li> </ul>"},{"location":"SC-400/Information%20Protection/05.%20Deploy%20Microsoft%20Purview%20Message%20Encryption/","title":"05. Deploy Microsoft Purview Message Encryption","text":"<ul> <li>applied to encrypted emails by using Exchange mail flow rules</li> </ul>"},{"location":"SC-400/Information%20Protection/05.%20Deploy%20Microsoft%20Purview%20Message%20Encryption/#verify-information-rights-management-functionality","title":"Verify information rights management functionality","text":"<p><code>Get-IRMConfiguration | fl AzureRMSLicensingEnabled</code></p> <p><code>Set-IRMConfiguration -AzureRMSLicensingEnabled:$True</code></p> <p><code>Test-IRMConfiguration -Sender admin@contoso.com -Recipient admin@contoso.com</code></p>"},{"location":"SC-400/Information%20Protection/05.%20Deploy%20Microsoft%20Purview%20Message%20Encryption/#implement-custom-office-message-encryption-settings","title":"Implement custom Office Message Encryption settings","text":"<ul> <li>OME is managed via configuration objects, or more precisely templates, which can be assigned and referenced</li> <li>\"OME Configuration\" - default template</li> <li>basic Microsoft Purview Message Encryption allows only a single template</li> </ul>"},{"location":"SC-400/Information%20Protection/05.%20Deploy%20Microsoft%20Purview%20Message%20Encryption/#ome-branding-templates","title":"OME branding templates","text":"<p>https://learn.microsoft.com/en-us/microsoft-365/compliance/add-your-organization-brand-to-encrypted-messages</p> <p></p>"},{"location":"SC-400/Information%20Protection/05.%20Deploy%20Microsoft%20Purview%20Message%20Encryption/#implement-microsoft-purview-advanced-message-encryption","title":"Implement Microsoft Purview Advanced Message Encryption","text":"<ul> <li>allows you to use multiple templates for email messages </li> <li>configure an expiration time for protected messages sent externally</li> <li>allow emails to be revoked</li> </ul> <p>New-OMEConfiguration Remove-OMEConfiguration </p>"},{"location":"SC-400/Information%20Protection/05.%20Deploy%20Microsoft%20Purview%20Message%20Encryption/#expiration-date-for-email-encrypted","title":"Expiration date for email encrypted","text":"<ul> <li>you can only use expiration rules if you use custom branding</li> <li>You can only set expiration dates for emails to external recipients</li> </ul> <p><code>New-OMEConfiguration -Identity \"Expire in seven days\" -ExternalMailExpiryInDays 7</code></p>"},{"location":"SC-400/Information%20Protection/05.%20Deploy%20Microsoft%20Purview%20Message%20Encryption/#use-microsoft-purview-message-encryption-templates-in-mail-flow-rules","title":"Use Microsoft Purview Message Encryption templates in mail flow rules","text":""},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/","title":"06. Sensitivity labels","text":""},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#sensitivity-label-uses","title":"Sensitivity label uses","text":"<ul> <li>Encryption and content markings</li> <li>Cross-platform content protection</li> <li>Non-Microsoft app protection</li> <li>Container protection</li> <li>Meeting and chat Security</li> <li>Data intelligence</li> <li>Non-Microsoft app extension</li> <li>Container protection</li> <li>Meeting and chat Security</li> <li>Data intelligence</li> <li>Non-Microsoft app extension</li> <li>Visual marking</li> <li>Microsoft Copilot integration</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#application-of-sensitivity-labels","title":"Application of sensitivity labels","text":"<ul> <li>users must sign in with their Microsoft 365 work or school account</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#what-sensitivity-labels-can-do","title":"What sensitivity labels can do","text":"<ul> <li>Encryption and content marking</li> <li>Container protection</li> <li>Auto-labeling</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#elements-of-sensitivity-labels","title":"Elements of sensitivity labels","text":"<ul> <li>Label scopes </li> <li>Label priority</li> <li>Sublabels</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#editing-or-deleting-a-sensitivity-label","title":"Editing or deleting a sensitivity label","text":"<ul> <li>DELETE<ul> <li>content that was previously labeled retains its label but might not enforce the intended protections</li> <li>its protection settings no longer apply to new content</li> </ul> </li> <li>EDIT <ul> <li>the version of the label that was applied to content is what's enforced on that content.</li> </ul> </li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#what-label-policies-can-do","title":"What label policies can do","text":"<ul> <li>Publish to users and groups<ul> <li>assigned to specific users or groups unlike retention lables that's assigned to locations like Exchange mailboxes</li> </ul> </li> <li>Default label for content</li> <li>Require justification for label changes</li> <li>Mandatory labeling for certain content</li> <li>Help links for users</li> <li>Policy priority (order matters)</li> <li>Policy application time<ul> <li>might take up to 24 hours</li> </ul> </li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#sensitivity-labels-and-microsoft-copilot-for-microsoft-365","title":"Sensitivity labels and Microsoft Copilot for Microsoft 365","text":"<ul> <li>Copilot prioritizes the most restrictive labels</li> <li>When labels include encryption, Copilot checks user permissions before allowing access to the data.</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#sensitivity-label-workflow","title":"Sensitivity label workflow","text":""},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#prerequisites","title":"Prerequisites","text":"<p>License: - Microsoft 365 E5/A5/G5/E3/A3/G3/F1/F3/Business Premium/OneDrive for Business (Plan 2) - Enterprise Mobility + Security E3/E5 - Office 365 E5/A5/E3/A3 - AIP Plan 1 - AIP Plan 2</p> <p>[!note] Microsoft 365 Apps require user-based subscription licensing for the users to use sensitivity labels within the Office clients. Device-based licensing isn't supported.</p>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#create-labels-and-label-policies-interactive-guide","title":"Create labels and label policies interactive guide","text":"<p>Interactive guide</p>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#encryption-with-sensitivity-labels","title":"Encryption with sensitivity labels","text":"<ul> <li>Sensitivity labels rely on the Azure Rights Management service (Azure RMS) from Azure Information Protection to encrypt documents, emails, and meeting invites. </li> <li>Sensitivity labels also encrypt audio and video streams in Teams meetings, using a different encryption method than Azure RMS. This type is specially designed for the unique needs of Teams meetings.</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#prerequisites_1","title":"Prerequisites","text":"<ul> <li>Azure Information Protection is activated.</li> <li>Your network, including firewalls, is configured properly.</li> <li>Microsoft Entra settings support encrypted content access.</li> <li>Exchange is set up for Azure Information Protection</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#configuring-a-label-for-encryption","title":"Configuring a label for encryption","text":"<ol> <li> <p>Start by creating or editing a sensitivity label. Make sure to select Items as the scope for the label: </p> </li> <li> <p>On the Choose protection settings for labeled items page, select Apply or remove encryption. </p> </li> </ol> <p></p> <ol> <li>On the Encryption page, select one of these options:<ol> <li>Remove encryption if the file or email is encrypted</li> <li>Configure encryption settings<ul> <li>Turns on encryption and makes the encryption settings visible.</li> </ul> </li> </ol> </li> </ol> <p></p>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#configure-encryption-settings","title":"Configure encryption settings","text":"<ol> <li>Assign permissions now<ol> <li>Allow access to labeled content to expire</li> <li>Allow offline access</li> </ol> </li> <li>Let users assign permissions </li> </ol> <p>You can grant permissions to specific people so that only they can interact with the labeled content. To do this:</p> <ol> <li>Add users or groups who need access to the labeled content.</li> <li>Choose their permission levels, from viewing only to full editing rights.</li> </ol> <p></p>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#updating-encryption-settings-on-labels","title":"Updating encryption settings on labels","text":""},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#changes-to-assign-permissions-now","title":"Changes to Assign permissions now","text":"<ul> <li>directly affect how newly labeled or relabeled content is encrypted</li> <li>Existing content's encryption updates upon user reauthentication</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#switching-a-labels-configuration","title":"Switching a label's configuration","text":"<ul> <li>like from Do Not Forward to Encrypt-Only<ul> <li>applies only to content labeled after the change</li> </ul> </li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#client-side-vs-service-side-labeling","title":"Client-side vs. service-side labeling","text":"<p>Client-side labeling - enables users in Office apps to interactively apply or reject recommended labels Service-side labeling -  automatically applies labels to content</p> <p>Interactive guide</p>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#configure-client-side-auto-labeling-for-office-apps","title":"Configure client-side auto-labeling for Office apps","text":"<ul> <li>Make sure your Office apps meet the version requirements for automatic labeling.</li> <li>When you set up auto-labeling, select Items as the scope of your label</li> <li> <p>As you move through the configuration, you see the Auto-labeling for files and emails page</p> </li> <li> <p>can configure sensitive information types and trainable classifiers for auto-labeling to automatically apply labels to content </p> </li> <li>When using exact data match (EDM), include at least one non-EDM sensitive information type to ensure auto-labeling remains enabled.</li> </ul> <p></p> <ul> <li>When this sensitivity label is automatically applied, the user sees a notification in their Office app.</li> <li>can also configure sensitivity labels for Office apps to suggest users to apply sensitivity label</li> </ul> <p></p>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#configure-service-side-auto-labeling-for-sharepoint-onedrive-and-exchange","title":"Configure service-side auto-labeling for SharePoint, OneDrive, and Exchange","text":""},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#prerequisites-for-service-side-auto-labeling","title":"Prerequisites for service-side auto-labeling","text":"<ol> <li>Auditing for Microsoft 365 must be enabled.</li> <li>Roles groups:<ul> <li>Data Classification Content Viewer</li> <li>Content Explorer Content Viewer</li> <li>Information Protection</li> <li>nformation Protection Investigators</li> </ul> </li> <li>To auto-label files in SharePoint and OneDrive:<ul> <li>Sensitivity labels must be enabled for files</li> <li>Files shouldn't be open or checked out during the auto-labeling process</li> <li>SITs must be set up before the policy creation and consider testing with new documents</li> </ul> </li> <li>Label configuration:<ul> <li>Labels used in auto-labeling can include visual markings</li> <li>note that these markings don't apply to documents automatically.</li> </ul> </li> </ol>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#understand-simulation-mode","title":"Understand simulation mode","text":"<ul> <li>simulation mode is required before labels can apply automatically</li> <li>up to 1,000,000 files </li> <li>if greater than 1M, modify the policy and simulate again</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#creating-an-auto-labeling-policy","title":"Creating an auto-labeling policy","text":"<ol> <li>Solutions &gt; Information protection &gt; Auto-labeling.</li> <li>Create auto-labeling policy</li> <li>On the Choose info you want this label applied to page, select a template or or select Custom policy </li> <li>Name your policy</li> <li>In the Set up common or advanced rules page, define labeling rules using conditions </li> <li>Define new rules using conditions and exceptions. Confirm all rules are active.</li> <li>on the Choose a label to auto-apply, select a sensitivity label to auto-apply </li> <li>For Exchange policies, configure optional settings on the Additional settings for email page</li> <li>On the Decide on policy testing page, select Run policy in simulation mode</li> </ol>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#the-data-classification-overview-dashboard","title":"The data classification overview dashboard","text":"<p>Interactive guide</p> <ul> <li>centralized summary of how your organization classifies its data</li> <li>displays key metrics on the application of sensitivity and retention labels</li> <li>identifies top SIT across your data</li> <li>summarizes user activities on sensitive content</li> <li>offers insights into the distribution and management of classified data across Microsoft 365 services</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#top-sensitivity-labels-applied-to-content","title":"Top sensitivity labels applied to content","text":"<p>Sensitivity labels do two things when you apply them: 1. Embeds a tag 2. Activates protective measures</p>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#the-data-classification-content-explorer","title":"The data classification content explorer","text":"<ul> <li>provide detailed view of items tagged with sensitivity labels</li> <li>can see which labels are applied most frequently</li> <li>assess the distribution of labeled content across various locations</li> <li>directly access individual items to review their labeling and content</li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#the-data-classification-activity-explorer","title":"The data classification activity explorer","text":"<ul> <li>show labeled content and its location</li> <li>track actions on labeled content</li> <li>reports on up to 30 days worth of data</li> <li>gathers information from the unified audit logs</li> <li>can also be found under DLP </li> </ul>"},{"location":"SC-400/Information%20Protection/06.%20Sensitivity%20labels/#activity-types-examples","title":"Activity types examples:","text":"<ul> <li>Label applied</li> <li>Label changed (upgraded, downgraded, or removed)</li> <li>Auto-labeling simulation</li> <li>File read</li> </ul>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/","title":"07. Apply sensitivity labels for data protection","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#enable-sensitivity-labels-for-containers-and-synchronize-labels","title":"Enable sensitivity labels for containers and synchronize labels","text":"<ol> <li>Enable labels: <ul> <li>Follow the Microsoft Entra documentation to enable sensitivity labels for Microsoft 365 Groups.</li> </ul> </li> <li>Synchronize labels<ul> <li>In SCC PS, run the <code>Execute-AzureAdLabelSync</code> to sync labels with Microsoft Entra ID.</li> </ul> </li> </ol>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#sensitivity-label-support-and-file-compatibility-in-office-apps","title":"Sensitivity label support and file compatibility in Office apps","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#compatibility-across-document-formats","title":"Compatibility across document formats","text":"<ol> <li> <p>Open XML formats:</p> <ul> <li>docx, .xlsx, .pptx</li> </ul> </li> <li> <p>Legacy and non-standard formats:</p> <ul> <li>No Persistent Labeling in Binary Formats</li> <li>Limited Encryption and Protection</li> <li>Content Markings (Headers, Footers, Watermarks</li> <li>Limited Content Scanning and Auto-Labeling</li> <li>No Unified Label Viewer Experience</li> <li>Performance Issues</li> <li>No Support for Co-authoring</li> </ul> </li> <li> <p>PDF support</p> <ul> <li>PDF attachments in Outlook don't inherit label-based encryption.</li> <li>The potential bypass of labels when printing to PDF</li> <li>Administrators can manage the application of sensitivity labels to PDFs through Group Policy </li> </ul> </li> </ol>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#manage-sensitivity-labels-for-encryption-and-collaboration-in-office-apps","title":"Manage sensitivity labels for encryption and collaboration in Office apps","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#office-apps-are-moving-from-irm-to-sensitivity-labels-for-encryption","title":"Office apps are moving from IRM to sensitivity labels for encryption","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#documents-automatically-inherit-encryption-from-associated-emails-or-previous-irm-policies","title":"Documents automatically inherit encryption from associated emails or previous IRM policies","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#collaborating-with-sensitivity-labels-across-organizations","title":"Collaborating with sensitivity labels across organizations","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#document-sharing-and-metadata","title":"Document sharing and metadata","text":"<p>Sensitivity labels attach metadata to documents and emails that includes: - organization's tenant information - unique label identifier (GUID)</p>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#cross-organizational-sharing-considerations","title":"Cross-organizational sharing considerations","text":"<ul> <li>some email clients except Outlook may not retain label metadata</li> <li>label-based encryption secures the content regardless of metadata visibility.</li> </ul>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#extended-access-controls","title":"Extended access controls","text":"<ul> <li>External users with Microsoft Entra ID or through guest accounts can also access documents shared outside your organization.</li> <li>enabled by additional configurations for cross-tenant access and conditional access settings.</li> </ul>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#auditing-labeling-activities","title":"Auditing labeling activities","text":"<p>Sensitivity label activities</p> <ul> <li>auditing information is visually represented in the content explorer and activity explorer in the data classification dashboard</li> </ul>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#apply-sensitivity-labels-with-copilot-for-microsoft-365-for-secure-collaboration","title":"Apply sensitivity labels with Copilot for Microsoft 365 for secure collaboration","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#copilots-role-with-sensitivity-labels","title":"Copilot's role with sensitivity labels","text":"<ul> <li>Recognize and use sensitivity labels during user interactions, ensuring labeled data remains secure and compliant.</li> <li>Respect the encryption specified by sensitivity labels, checking user permissions before accessing labeled data.</li> <li>Apply appropriate labels to content generated by Copilot, based on the data source and user preferences.</li> </ul>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#use-sensitivity-labels-with-copilot-for-microsoft-365","title":"Use sensitivity labels with Copilot for Microsoft 365","text":"<ol> <li>Automated label inheritance</li> <li> <p>automatically adopts the sensitivity labels of the source files it uses, ensuring consistent data security in new documents</p> </li> <li> <p>Data security</p> </li> <li> <p>adheres to the protection settings of sensitivity labels, maintaining data security even when using AI features</p> </li> <li> <p>Compliance</p> </li> </ol>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#limitations-and-considerations","title":"Limitations and considerations","text":"<ol> <li>Label inheritance and overrides</li> <li>Double Key Encryption (DKE)<ul> <li>Copilot can't access or use data protected by DKE, which is reserved for highly sensitive data requiring stringent protection.</li> </ul> </li> <li>Context recognition<ul> <li>Copilot doesn't recognize sensitivity labels in certain contexts, such as Teams meetings and chats</li> </ul> </li> <li>App-specific exceptions<ul> <li>Copilot can't generate content from encrypted files in apps like PPT and Word</li> </ul> </li> </ol>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#protect-meetings-with-sensitivity-labels","title":"Protect meetings with sensitivity labels","text":"<ul> <li>Sensitivity labels help encrypt meeting invites and enforce strict access controls.</li> </ul>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#settings-sensitivity-labels-can-adjust","title":"Settings sensitivity labels can adjust","text":"<ul> <li>Who can bypass the lobby</li> <li>Who can present</li> <li>Who can record</li> <li>Encryption for meeting video and audio</li> <li>Option to automatically record</li> <li>Video watermark for screen sharing and camera streams</li> <li>Chat content copying restrictions</li> </ul> <p>The sensitivity label doesn't extend to related meeting items, such as recordings, transcripts, whiteboard, and tasks.</p> <p>Sensitivity labels can be applied to meeting invites in Outlook and Teams.</p> <p>Sample Teams meeting with sensitivity label: </p> <p>Use sensitivity labels to protect calendar items, Teams meetings, and chat</p>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#when-does-a-label-policy-for-calendar-items-take-effect","title":"When does a label policy for calendar items take effect:","text":"<ul> <li>new and updated calendar events in Outlook and new events in Teams</li> <li>Existing unlabeled meetings in Teams aren't automatically relabeled</li> <li>Policies can also require users to label their meetings and events.</li> </ul>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#configure-and-apply-a-label-for-channel-meetings","title":"Configure and apply a label for channel meetings","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#help-protect-calender-events-meetings-and-chats-with-microsoft-purview-information","title":"Help protect calender events, meetings, and chats with Microsoft Purview Information","text":"<p>Interactive guide</p>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#apply-sensitivity-labels-to-groups-in-outlook-on-the-web","title":"Apply sensitivity labels to groups in Outlook on the web","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#apply-sensitivity-labels-to-sharepoint-sites","title":"Apply sensitivity labels to SharePoint sites","text":"<p>Existing sites: </p> <p>Site creation:</p> <p></p>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#apply-sensitivity-labels-to-sharepoint-document-libraries","title":"Apply sensitivity labels to SharePoint document libraries","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#apply-sensitivity-labels-to-teams-from-the-admin-center","title":"Apply sensitivity labels to Teams from the admin center","text":""},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#apply-sensitivity-labels-to-new-teams-channels-from-the-desktop-or-web-client","title":"Apply sensitivity labels to new Teams channels from the desktop or web client","text":"<p>If sensitivity labels are created with a Group &amp; site setting and the user has a Microsoft Entra ID P1 license, then it's possible to control the creation of Microsoft Teams with sensitivity labeling.</p> <p></p> <p></p>"},{"location":"SC-400/Information%20Protection/07.%20Apply%20sensitivity%20labels%20for%20data%20protection/#apply-sensitivity-labels-to-microsoft-365-groups","title":"Apply sensitivity labels to Microsoft 365 groups","text":"<p>https://learn.microsoft.com/en-us/entra/identity/users/groups-assign-sensitivity-labels?tabs=microsoft</p>"},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/","title":"Misc. Sensitivity label","text":""},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/#legacy-and-non-standard-formats","title":"Legacy and non-standard formats:","text":"<p>When applying Microsoft Purview Sensitivity Labels to older binary file formats (<code>.doc</code>, <code>.xls</code>, <code>.ppt</code>), there are specific limitations compared to modern Office formats (<code>.docx</code>, <code>.xlsx</code>, <code>.pptx</code>). Here are the exact limitations:</p>"},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/#1-no-persistent-labeling-in-binary-formats","title":"1. No Persistent Labeling in Binary Formats","text":"<ul> <li>In older binary formats (<code>.doc</code>, <code>.xls</code>, <code>.ppt</code>), the sensitivity label is not embedded directly into the file as metadata. This means:<ul> <li>The label is not persistent if the file is moved or copied.</li> <li>If a labeled binary file is saved in one of the modern formats, the label needs to be applied again.</li> </ul> </li> </ul>"},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/#2-limited-encryption-and-protection","title":"2. Limited Encryption and Protection","text":"<ul> <li>The full encryption and protection features of sensitivity labels are not available for binary formats. This includes:<ul> <li>Automatic encryption and access controls (e.g., setting permissions based on the label) may not be applied as effectively.</li> <li>Some advanced rights management options, like expiration settings, are not supported in binary formats.</li> </ul> </li> </ul>"},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/#3-content-markings-headers-footers-watermarks","title":"3. Content Markings (Headers, Footers, Watermarks)","text":"<ul> <li>The application of content markings like headers, footers, and watermarks is either limited or not supported in the older binary formats.</li> <li>Modern formats allow for better handling of visual markings (e.g., \"Confidential\" in the header), but these may not appear correctly in older file types.</li> </ul>"},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/#4-limited-content-scanning-and-auto-labeling","title":"4. Limited Content Scanning and Auto-Labeling","text":"<ul> <li>Auto-labeling based on content scanning (where labels are applied automatically based on keywords or patterns) is not supported for binary formats.</li> <li>These features rely on the ability to inspect the document's structure, which is much more efficient in modern XML-based formats.</li> </ul>"},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/#5-no-unified-label-viewer-experience","title":"5. No Unified Label Viewer Experience","text":"<ul> <li>Users opening older binary files may not see the same user interface experience for sensitivity labels in their Office applications as they would with modern formats. This might include:<ul> <li>Lack of visual indicators (like labels or banners) within the document.</li> <li>Less integration with modern compliance reporting tools.</li> </ul> </li> </ul>"},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/#6-performance-issues","title":"6. Performance Issues","text":"<ul> <li>Applying sensitivity labels or enforcing compliance policies may be slower or less reliable with older binary formats compared to modern file types.</li> </ul>"},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/#7-no-support-for-co-authoring","title":"7. No Support for Co-authoring","text":"<ul> <li>Co-authoring (multiple people editing a document simultaneously) is only supported in modern Office file formats. Older binary formats do not support this feature, which also affects the ability to maintain sensitivity labels during collaboration.</li> </ul>"},{"location":"SC-400/Information%20Protection/Misc.%20Sensitivity%20label/#recommendation","title":"Recommendation:","text":"<p>While Microsoft Purview Sensitivity Labels can be applied to legacy binary formats, the experience and security features are significantly reduced. To fully leverage all capabilities of Microsoft Purview (e.g., persistent labeling, full encryption, auto-classification, co-authoring), it's recommended to convert binary formats to the modern equivalents (<code>.docx</code>, <code>.xlsx</code>, <code>.pptx</code>).</p>"},{"location":"SharePoint%20%26%20OneDrive/B2B%20Collaboration/","title":"B2B Collaboration","text":"<p>Overview - External ID in workforce tenants - Microsoft Entra External ID | Microsoft Learn</p> <p>Guest users sign in to your apps and services with their own work, school, or social identities.</p>"},{"location":"SharePoint%20%26%20OneDrive/B2B%20Collaboration/#manage-b2b-collaboration-with-other-organizations","title":"Manage B2B collaboration with other organizations","text":""},{"location":"SharePoint%20%26%20OneDrive/B2B%20Collaboration/#cross-tenant-access-settings","title":"Cross-tenant access settings","text":"<ul> <li>control whether users can authenticate with external Microsoft Entra tenants</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/B2B%20Collaboration/#external-collaboration-settings","title":"External collaboration settings","text":"<ul> <li>control which users in your organization are allowed to send B2B collaboration invitations to guests from any organization</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/B2B%20Collaboration/#sharepoint-and-onedrive-integration-with-microsoft-entra-b2b","title":"SharePoint and OneDrive integration with Microsoft Entra B2B","text":"<p>Microsoft Entra B2B integration for SharePoint &amp; OneDrive - SharePoint in Microsoft 365 | Microsoft Learn</p> <p>Enabling this integration doesn't change your sharing settings. For example, if you have site collections where external sharing is turned off, it remains off.</p> <p>when someone outside your organization clicks on a link that was created before Microsoft Entra B2B integration was enabled, SharePoint automatically creates a B2B guest account.</p> <p>SharePoint and OneDrive integration with the Microsoft Entra B2B one-time passcode feature is enabled by default for new tenants.</p> <p>Advantages of Microsoft Entra B2B include: * Guest accounts are created for each people outside your organization that are invited and are subject to Microsoft Entra ID access policies * </p>"},{"location":"SharePoint%20%26%20OneDrive/OneDrive/","title":"OneDrive","text":""},{"location":"SharePoint%20%26%20OneDrive/OneDrive/#find-a-list-of-all-odb-sites-in-the-tenant","title":"Find a list of all ODB sites in the tenant:","text":"<p><code>Get-SPOSite -IncludePersonalSite $True -Limit All -Filter \"Url -like '-</code> <code>my.sharepoint.com/personal/'\" | Select-Object Owner, Url | Sort-Object Owner</code></p>"},{"location":"SharePoint%20%26%20OneDrive/OneDrive/#find-a-list-of-m365-group-or-team-url","title":"Find a list of M365 group or team URL","text":"<p>`Get-UnifiedGroup -Identity MyGroup | Select-Object SharePointSiteURL</p>"},{"location":"SharePoint%20%26%20OneDrive/SPO%20FAQ/","title":"SPO FAQ","text":""},{"location":"SharePoint%20%26%20OneDrive/SPO%20FAQ/#how-to-add-everyone-to-a-site","title":"How to add everyone to a site?","text":"<p>Add the Everyone except external users group</p>"},{"location":"SharePoint%20%26%20OneDrive/SPO%20FAQ/#what-is-the-difference-between-direct-access-and-share-link","title":"What is the difference between direct access and share link?","text":"<p>direct access is used to grant custom permission if a user is already a member of the site, whereas the share link if the user is not already a member of the site</p>"},{"location":"SharePoint%20%26%20OneDrive/SPO%20FAQ/#how-to-prevent-site-members-from-editing-the-site-pages","title":"How to prevent site members from editing the Site Pages?","text":"<p>option 1: for specific page</p> <ol> <li>gear icon -&gt; site contents, select site pages</li> <li>right click on the page, manage access</li> <li>change the members group permission to Edit</li> </ol> <p>option 2: all pages </p> <ol> <li>gear icon -&gt; site contents -&gt; site pages</li> <li>gear icon -&gt; library settings -&gt; more library settings</li> <li>permissions for this document library -&gt; stop inheriting permissions</li> <li>select the group/member -&gt; edit user permissions</li> </ol>"},{"location":"SharePoint%20%26%20OneDrive/SPO%20FAQ/#how-to-check-permissions-for-a-sharepoint-file-or-folder-via-the-check-permissions-feature","title":"How to check permissions for a SharePoint file or folder via the check permissions feature?","text":"<ol> <li>select a file or folder -&gt; manage access -&gt; advanced settings</li> <li>check permissions</li> </ol>"},{"location":"SharePoint%20%26%20OneDrive/SPO%20FAQ/#how-to-create-a-custom-permission-level-in-sharepoint-online","title":"How to create a custom permission level in SharePoint online","text":"<p>2 steps:</p> <ol> <li>build a custom permission level</li> <li>alter site security</li> </ol>"},{"location":"SharePoint%20%26%20OneDrive/SPO%20FAQ/#create-the-custom-permission","title":"create the custom permission","text":"<ol> <li>gear icon -&gt; site permissions -&gt; advanced permission settings</li> <li>click permission levels (display OOB permission levels)</li> <li>copy an existing permission level (select a permission level) -&gt; scroll down, click Copy permission level</li> <li>provide a name, update the permissions, then create</li> <li>select a group, then click a custom permission</li> </ol> <p>Not group connected site (edit permission button not greyed out)</p> <p>Group connected site (edit permission greyed out)</p> <ol> <li>change the member permission to view only</li> <li>in the advanced permissions, click Grant permissions button</li> </ol> <p>Note: highest level permission Wins!</p>"},{"location":"SharePoint%20%26%20OneDrive/SPO%20FAQ/#how-to-set-unique-security-on-a-document-library-in-sharepoint","title":"how to set unique security on a document library in SharePoint","text":"<ol> <li>navigate to the desired document library</li> <li>settings -&gt; library settings -&gt; permissions for this document -&gt; stop inheriting permissions</li> <li>remove or grant permission</li> </ol>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/","title":"SharePoint","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#basic-sharepoint-online-concepts","title":"Basic SharePoint Online Concepts","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#sites","title":"Sites","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#hub-sites","title":"Hub Sites","text":"<ul> <li>integrate multiple Communication and Team sites</li> <li>a tenant is currently limited to 2,000</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#tenant-home-site","title":"Tenant Home Site","text":"<ul> <li>a particular kind of Communication site</li> <li>there is a limitation of having a single Home site per SharePoint tenant</li> <li>You can designate a Communication site as the Home site for the tenant</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#modern-information-architectures-for-sharepoint-online","title":"Modern Information Architectures for SharePoint Online","text":"<ul> <li>based on single-site collections that can be associated with a Hub site</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#sharepoint-search","title":"SharePoint Search","text":"<ul> <li>uses Microsoft Search Service to create content indexes</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#pages","title":"Pages","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#apps","title":"Apps","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#metadata","title":"Metadata","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#file-versioning","title":"File Versioning","text":"<ul> <li>SharePoint Online and OneDrive for Business can restore document libraries to a point in time within the past 30 days</li> <li>SharePoint Online supports the concept of major and minor versions while OneDrive for Business only supports major versions.</li> <li>a new version might be generated every ten minutes or so, depending on the volume and type of edits in a document</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#autosave","title":"AutoSave","text":"<ul> <li>Co-authoring is possible without AutoSave, but users must manually refresh their copies of documents to see changes</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#sharepoint-online-quotas-and-limits","title":"SharePoint Online Quotas and Limits","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#managing-sharepoint-online","title":"Managing SharePoint Online","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#settings-and-permissions-for-group-enabled-sites","title":"Settings and Permissions for Group-enabled Sites","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#managing-content-services","title":"Managing Content Services","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#sharing","title":"Sharing","text":"<ul> <li>SharePoint Online uses Azure AD B2B Collaboration to control sharing<ul> <li>when someone creates a sharing link, SharePoint uses Azure AD Invitation Manager to create a guest account in the tenant</li> <li>sharing link contains an invitation for that person</li> </ul> </li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#site-people-view","title":"Site People View","text":"<p>The SharePoint browser interface keeps track of external people with whom users share resources. Sometimes, errors creep into the list of external people, such as when people enter incorrect email addresses into sharing links. </p> <p>To remove these errors and prevent them from showing up as suggested users in sharing dialogs, a site administrator can access the list by adding <code>/_layouts/people.aspx?MembershipGroupId=0</code> to the site URL. </p>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#sharepoint-and-onedrive-integration-with-microsoft-entra-b2b","title":"SharePoint and OneDrive integration with Microsoft Entra B2B","text":"<ul> <li>provides authentication and management of guests</li> <li>Authentication happens via one-time passcode</li> <li> <p>Enabling this integration doesn't change your sharing settings. For example, if you have site collections where external sharing is turned off, it remains off.</p> </li> <li> <p>Once the integration is enabled you and your users don't have to reshare or do any manual migration for guests previously shared with.</p> </li> <li> <p>Instead, when someone outside your organization clicks on a link that was created before Microsoft Entra B2B integration was enabled, SharePoint automatically creates a B2B guest account</p> </li> <li> <p>SharePoint and OneDrive integration with the Microsoft Entra B2B one-time passcode feature is enabled by default for new tenants.</p> </li> <li> <p>When the integration is enabled, people outside the organization will be invited via the Azure B2B platform when sharing from SharePoint</p> </li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#sharing-controls","title":"Sharing Controls","text":""},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#4-types-of-sharing-links","title":"4 types of sharing links","text":"<ol> <li>Anyone</li> <li>New and existing guests</li> <li>Existing guests</li> <li>Only people in your organization</li> </ol>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#expiring-access-policy","title":"Expiring Access Policy","text":"<ul> <li>this setting applies only to sharing links, direct permission changes, and SharePoint group membership</li> <li>does not apply to guest access to SharePoint Online sites granted through the membership of Microsoft 365 Groups</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#sharing-with-microsoft-365-groups-or-teams","title":"Sharing with Microsoft 365 Groups or Teams","text":"<ul> <li>Every group has a SharePoint site with a document library</li> <li>The tenant sharing setting prevails over the setting for a site. </li> <li>If you want to use a setting like ExternalUserAndGuestSharing for the site belonging to a group, you must first make sure that the organization allows anonymous sharing.</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#check-the-sharing-capability-for-a-group","title":"Check the sharing capability for a group","text":"<p><code>[PS] C:\\&gt;$sGroupName=\u201dOffice365forITPros\u201d</code>Get-SPOSite -Identity (Get-UnifiedGroup -Identity $sGroupName).SharePointSiteUrl | Select SharingCapability</p>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#display-guests-in-people-picker-off-by-default","title":"Display guests in people picker (off by default)","text":"<p>`[PS] C:&gt; Set-SPOTenant -ShowPeoplePickerSuggestionsForGuestUsers $True</p>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#find-group-enabled-sites","title":"Find group enabled sites","text":"<p>`Get-SPOSite -Template \"GROUP#0\" -IncludePersonalSite:$False</p>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#tracking-shared-files-bcc","title":"Tracking Shared Files - BCC","text":"<p>`[PS] C:&gt; Set-SPOTenant \u2013BccExternalSharingInvitations $True \u2013BccExternalSharingInvitationsList administrator@Office365ITPros.com</p> <ul> <li>this will send an email each time a user shares a file stored in a SharePoint Online or OneDrive for Business document library with an external person</li> </ul>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#retrieve-all-sites-belonging-to-private-and-shared-channel","title":"Retrieve all sites belonging to private and shared channel","text":"<p><code>[array]$Sites = Get-SPOSite -Limit All | Where-Object {$_.Template -eq \"TeamChannel#0\" -or $_.Template -eq \"TeamChannel#1\"}</code></p> <p><code>ForEach ($Site in $Sites) {</code> <code>$SPOSite = Get-SPOSite -Identity $Site.url -Detailed</code> <code>$Group = Get-UnifiedGroup -Identity $SPOSite.RelatedGroupID.Guid</code> <code>Write-Host \"Team\" $Group.DisplayName \"owns channel site\" $Site.URL }</code></p>"},{"location":"SharePoint%20%26%20OneDrive/SharePoint/#return-all-sites-belonging-to-private-and-shared-channels","title":"Return all sites belonging to private and shared channels","text":"<p>[array]$Sites = Get-SPOSite -Template \"TeamChannel#1\"</p> <p>#retrieve the team name ForEach ($Site in $Sites) { $SPOSite = Get-SPOSite -Identity $Site.url -Detailed $Group = Get-UnifiedGroup -Identity $SPOSite.RelatedGroupID.Guid Write-Host \"Team\" $Group.DisplayName \"owns channel site\" $Site.URL }</p>"},{"location":"Teams/Teams%20phone/Resource%20accounts/","title":"auto attendants","text":"<ul> <li> <p>allow you to set up menu options to route calls based on caller input. Menu options for an Auto attendant--such as \"For Sales, press 1--For Services press 2\"</p> </li> <li> <p>direct a caller to:</p> <ul> <li>specific people within your organization</li> <li>Call queues</li> <li>external numbers</li> <li>other Auto attendants</li> <li>voicemail</li> </ul> </li> <li> <p>call routing options can be specified for:</p> <ul> <li>business hours</li> <li>off hours</li> <li>holidays</li> </ul> </li> <li> <p>each Auto attendant has a specific language and time zone.</p> </li> <li>you can create as many different Auto attendants as you need to accommodate your callers with different languages</li> </ul> <p>Operator * can be configured for each AA * designed to allow callers to talk to a specific person in your organization who can help them.</p> <p>Dial scope * specify who is available for the directory search by choosing groups of users to include or exclude</p>"},{"location":"Teams/Teams%20phone/Resource%20accounts/#call-queue","title":"call queue","text":"<ul> <li> <p>waiting areas for callers; analogous to a waiting room in a physical building</p> </li> <li> <p>calls can be routed to:</p> <ul> <li>specific people</li> <li>voicemail</li> <li>other Call queues</li> <li>Auto attendants</li> </ul> </li> <li> <p>also have language settings and just like AA, can create multiple CQs</p> </li> <li> <p>Internal callers</p> <ul> <li>can reach CQ by calling the RA assigned to the CQ</li> </ul> </li> <li> <p>External callers</p> <ul> <li>can reach CQ by dialing the phone number assigned to the RA</li> <li>via web if click-to-call is configured</li> </ul> </li> <li> <p>When agents receive a call, they will see the RA name. </p> </li> </ul>"},{"location":"Teams/Teams%20phone/Resource%20accounts/#prerequisitesplan-for-teams-auto-attendants-and-call-queues-microsoft-teams-microsoft-learn","title":"[prerequisites](Plan for Teams Auto attendants and Call queues - Microsoft Teams | Microsoft Learn","text":"<ol> <li>RA for each AA and CQ<ul> <li>several RA can be assigned to AA &amp; CQ</li> </ul> </li> <li>a free MS Teams phone resource account license for each RA</li> <li>external phone calls:<ul> <li>phone number (toll or toll-free)</li> </ul> </li> <li>agents receiving calls from CQ must be Enterprise Voice enabled</li> <li>if agents are using MS Teams app for CQ calls, they need to be in TeamsOnly mode</li> <li> <p>if AA or CQ is transferring calls to an external number:</p> <ul> <li>one of the following:<ul> <li>a calling plan license and a phone number assigned</li> <li>an online voice routing policy (for Direct routing)</li> </ul> </li> <li>license the RA on the first AA receiving the call when that AA transfer to other AA or CQ that transfer calls externally</li> <li>license the RA of the AA or CQ performing the external transfer</li> </ul> </li> <li> <p>if RA is used for calling line ID, one of the following must be assigned:</p> <ul> <li>a calling plan and a phone number assigned</li> <li>an online voice routing policy (for Direct routing)</li> </ul> </li> </ol>"},{"location":"Teams/Teams%20phone/Resource%20accounts/#how-agents-are-added-to-cqs","title":"How agents are added to CQs?","text":"<ul> <li>Individual users</li> <li>Distribution lists</li> <li>Security groups, including mail-enabled security groups</li> <li>Microsoft 365 Groups or Teams</li> </ul> <p>Groups that have an email address can be used for voicemail.</p>"},{"location":"blog/","title":"Blog","text":""}]}